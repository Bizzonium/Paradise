<style type="text/css">
    table.borders   {
        width:95%;
        margin-left:2.4%;
        margin-right:2.4%;
    }

    table.borders, table.borders tr {
        border: 1px solid White;
    }

    td.law_index {
        width: 50px;
    }

    td.state {
        width: 63px;
		text-align:center;
    }

    td.add {
        width: 36px;
    }

    td.edit {
        width: 36px;
		text-align:center;
    }

    td.delete {
        width: 53px;
		text-align:center;
    }

    td.law_type {
        width: 65px;
    }

    td.position {
        width: 37px;
    }
</style>

{{if data.isSlaved && data.isAdmin}}
    <span class='notice'>Этот юнит синхронизирует законы с {{:data.isSlaved}}.</span>
{{/if}}

{{if data.isMalf || data.isAIMalf}}
	<div class="item">
		<div class="itemContentWidest">
			{{:helper.link('Управления законами', null, {'set_view' : 0}, data.view == 0 ? 'selected' : null)}}
			{{:helper.link('Наборы законов', null, {'set_view' : 1}, data.view == 1 ? 'selected' : null)}}
		</div>
	</div>
{{/if}}

{{if data.view == 0}}
	{{if data.has_zeroth_laws}}
		<table class='borders'>
		<tr><td class='law_index'>Индекс</td><td>Закон</td><td class='state'>Заявить</td>
			{{if data.isMalf}}
				<td class='edit'>Изменить</td>
				<td class='delete'>Удалить</td>
			{{/if}}
		</tr>

		<div class="itemLabelNarrow">
			ERR_NULL_VALUE законы:
		</div>
		{{for data.zeroth_laws}}
			<tr>
				<td valign="top">{{:value.index}}.</td>
				<td>{{:value.law}}</td>
				<td>{{:helper.link('Да', null, {'ref': value.ref, 'state_law' : 1}, value.state == 1 ? 'selected' : null)}}{{:helper.link('Нет', null, {'ref': value.ref, 'state_law' : 0}, value.state == 0 ? 'selected' : null)}}</td>
				{{if data.isMalf}}
					<td class='edit'>{{:helper.link('Изменить', null, {'edit_law': value.ref}, data.isAdmin ? null : 'disabled')}}</td>
					<td class='delete'>{{:helper.link('Удалить', null, {'delete_law': value.ref}, data.isAdmin ? null : 'disabled', data.isAdmin ? 'redButton' : null)}}</td>
				{{/if}}
			</tr>
		{{/for}}
		</table>
	{{/if}}

	{{if data.has_ion_laws}}
		<table class='borders'>
		<tr><td class='law_index'>Индекс</td><td>Закон</td><td class='state'>Заявить</td>
			{{if data.isMalf}}
				<td class='edit'>Изменить</td>
				<td class='delete'>Удалить</td>
			{{/if}}
		</tr>

		<div class="itemLabelNarrow">
			{{:data.ion_law_nr}} законы:
		</div>
		{{for data.ion_laws}}
			<tr>
				<td valign="top">{{:value.index}}.</td>
				<td>{{:value.law}}</td>
				<td>{{:helper.link('Да', null, {'ref': value.ref, 'state_law' : 1}, value.state == 1 ? 'selected' : null)}}{{:helper.link('Нет', null, {'ref': value.ref, 'state_law' : 0}, value.state == 0 ? 'selected' : null)}}</td>
				{{if data.isMalf}}
					<td class='edit'>{{:helper.link('Изменить', null, {'edit_law': value.ref})}}</td>
					<td class='delete'>{{:helper.link('Удалить', null, {'delete_law': value.ref}, null, 'redButton')}}</td>
				{{/if}}
			</tr>
		{{/for}}
		</table>
	{{/if}}

	{{if data.has_inherent_laws}}
		<table class='borders'>
		<tr><td class='law_index'>Индекс</td><td>Закон</td><td class='state'>Заявить</td>
			{{if data.isMalf}}
				<td class='edit'>Изменить</td>
				<td class='delete'>Удалить</td>
			{{/if}}
		</tr>

		<div class="itemLabelNarrow">
			Неотъемлемые законы:
		</div>

		{{for data.inherent_laws}}
			<tr>
				<td valign="top">{{:value.index}}.</td>
				<td>{{:value.law}}</td>
				<td>{{:helper.link('Да', null, {'ref': value.ref, 'state_law' : 1}, value.state == 1 ? 'selected' : null)}}{{:helper.link('Нет', null, {'ref': value.ref, 'state_law' : 0}, value.state == 0 ? 'selected' : null)}}</td>
				{{if data.isMalf}}
					<td class='edit'>{{:helper.link('Изменить', null, {'edit_law': value.ref})}}</td>
					<td class='delete'>{{:helper.link('Удалить', null, {'delete_law': value.ref}, null, 'redButton')}}</td>
				{{/if}}
			</tr>
		{{/for}}
		</table>
	{{/if}}

	{{if data.has_supplied_laws}}
		<table class='borders'>
		<tr><td class='law_index'>Индекс</td><td>Закон</td><td class='state'>Заявить</td>
			{{if data.isMalf}}
				<td class='edit'>Изменить</td>
				<td class='delete'>Удалить</td>
			{{/if}}
		</tr>

		<div class="itemLabelNarrow">
			Поставленные законы:
		</div>
		{{for data.supplied_laws}}
			<tr>
				<td valign="top">{{:value.index}}.</td>
				<td>{{:value.law}}</td>
				<td>{{:helper.link('Да', null, {'ref': value.ref, 'state_law' : 1}, value.state == 1 ? 'selected' : null)}}{{:helper.link('Нет', null, {'ref': value.ref, 'state_law' : 0}, value.state == 0 ? 'selected' : null)}}</td>
				{{if data.isMalf}}
					<td class='edit'>{{:helper.link('Изменить', null, {'edit_law': value.ref})}}</td>
					<td class='delete'>{{:helper.link('Удалить', null, {'delete_law': value.ref}, null, 'redButton')}}</td>
				{{/if}}
			</tr>
		{{/for}}
		</table>
	{{/if}}

	<div class="item">
		<div class="itemLabelNarrow">
			Канал заявления:
		</div>
		<div class="itemContentWide">
			{{for data.channels}}
				{{:helper.link(value.channel, null, {'law_channel' : value.channel}, value.channel == data.channel ? 'selected' : null)}}
			{{/for}}
		</div>
	</div>

	<div class="item">
		<div class="itemLabelNarrow">
			Заявить законы:
		</div>
		<div class="itemContent">
			{{:helper.link('Заявить законы', null, {'state_laws' : 1})}}
		</div>
	</div>

	{{if data.isMalf}}
		<div class="item">
			<div class="itemLabelNarrow">
				Добавить законы:
			</div>
			<div class="itemContent">
				<table class='borders'>
					<tr><td class='law_type'>Тип</td><td>Закон</td><td class='position'>Индекс</td><td class='edit'>Изменить</td><td class='add'>Добавить</td></tr>
					{{if data.isAdmin && !data.has_zeroth_laws}}
						<tr><td class='law_type'>Ноль</td><td>{{:data.zeroth_law}}</td><td class='position'>N/A</td><td class='edit'>{{:helper.link('Изменить', null, {'change_zeroth_law' : 1})}}</td><td class='add'>{{:helper.link('Добавить', null, {'add_zeroth_law' : 1})}}</td></tr>
					{{/if}}
					<tr><td class='law_type'>Ион</td><td>{{:data.ion_law}}</td><td class='position'>N/A</td><td class='edit'>{{:helper.link('Изменить', null, {'change_ion_law' : 1})}}</td><td class='add'>{{:helper.link('Добавить', null, {'add_ion_law' : 1})}}</td></tr>
					<tr><td class='law_type'>Неотъемлемый</td><td>{{:data.inherent_law}}</td><td class='position'>N/A</td><td class='edit'>{{:helper.link('Изменить', null, {'change_inherent_law' : 1})}}</td><td class='add'>{{:helper.link('Добавить', null, {'add_inherent_law' : 1})}}</td></tr>
					<tr><td class='law_type'>Поставленный</td><td>{{:data.supplied_law}}</td><td class='position'>{{:helper.link(data.supplied_law_position, null, {'change_supplied_law_position' : 1})}}</td><td class='edit'>{{:helper.link('Изменить', null, {'change_supplied_law' : 1})}}</td><td class='add'>{{:helper.link('Добавить', null, {'add_supplied_law' : 1})}}</td></tr>
				</table>
			</div>
		</div>
	{{/if}}

    {{if data.isAI}}
        <div class="item">
            <div class="itemLabelNarrow">
                Уведомить о законе:
            </div>
            <div class="itemContent">
                {{:helper.link('Уведомить', null, {'notify_laws' : 1})}}
            </div>
        </div>
    {{/if}}
{{else data.view == 1}}
	{{for data.law_sets}}
		<div class="item">
			<div class="itemLabelWide">
				<H2>{{:value.name}}</H2>{{:value.header}}
			</div>

			{{if value.laws.has_ion_laws}}
				<table class='borders'>
					<tr><td class='law_index'>Индекс</td><td>Law</td>
					{{for value.laws.ion_laws :lawValue:lawindex}}
						<tr>
							<td valign="top">{{:lawValue.index}}.</td>
							<td>{{:lawValue.law}}</td>
						</tr>
					{{/for}}
				</table>
			{{/if}}

			{{if value.laws.has_zeroth_laws || value.laws.has_inherent_laws}}
				<table class='borders'>
					<tr><td class='law_index'>Индекс</td><td>Law</td>
					{{for value.laws.zeroth_laws :lawValue:lawindex}}
						<tr>
							<td valign="top">{{:lawValue.index}}.</td>
							<td><span class='bad'>{{:lawValue.law}}</span></td>
						</tr>
					{{/for}}
					{{for value.laws.inherent_laws :lawValue:lawindex}}
						<tr>
							<td valign="top">{{:lawValue.index}}.</td>
							<td>{{:lawValue.law}}</td>
						</tr>
					{{/for}}
				</table>
			{{/if}}

			{{if value.laws.has_supplied_laws}}
				<table class='borders'>
					<tr><td class='law_index'>Индекс</td><td>Law</td>
					{{for value.laws.supplied_laws :lawValue:lawindex}}
						<tr>
							<td valign="top">{{:lawValue.index}}.</td>
							<td>{{:lawValue.law}}</td>
						</tr>
					{{/for}}
				</table>
			{{/if}}

			<div class="itemContent">
				<br>
				{{:helper.link('Загрузить законы', null, {'transfer_laws' : value.ref}, data.isSlaved ? 'disabled' : null)}}{{:helper.link('Заявить законы', null, {'state_law_set' : value.ref})}}
			</div>
		</div>
	{{/for}}
{{/if}}
