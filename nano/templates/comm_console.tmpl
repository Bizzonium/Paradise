<!--
Title: Communications
Used In File(s): /code/game/machinery/computers/communications.dm
-->
<!--
#define COMM_SCREEN_MAIN		1
#define COMM_SCREEN_STAT		2
#define COMM_SCREEN_MESSAGES	3
#define COMM_SCREEN_SECLEVEL	4
-->
{{if !data.authenticated}}
<div class="notice">Пожалуйста, проведите Вашей ID картой. {{:helper.link('Войти','unlock',{'login':1},null,'fixed')}}</div>
{{else}}
	{{if !data.is_ai}}
	<div class="notice">Пожалуйста, не забывайте {{:helper.link('Выйти','lock',{'logout':1},null,'fixed')}}</div>
	{{/if}}
	{{if data.lastCallLoc}}
	<div class="line">Последний вызов шаттла произошёл в: <b>{{:data.lastCallLoc}}</b></div>
	{{else}}
	<div class="line">Не удаётся отследить сигнал последнего вызова/отзыва шаттла.</div>
	{{/if}}
	<div class="item">
		<h3>Аварийный шаттл:</h3>
		{{if data.shuttle.eta}}
			<div class="itemLabel">ETA:</div>
			<div class="itemContents">
				{{>data.shuttle.eta}}
			</div>
		{{/if}}<!-- SHUTTLE ETA -->
		<div class="itemLabel">Опции:</div>
		<div class="itemContents">
			{{if data.shuttle.callStatus == 1 && !data.is_ai}}
				{{:helper.link('Отменить шаттл','arrow-left',{'operation':'cancelshuttle'})}}
			{{else data.shuttle.callStatus == 2}}
				{{:helper.link('Вызвать шаттл','arrow-circle-down',{'operation':'callshuttle'})}}
			{{/if}}
		</div>
	</div>

	{{if data.screen==1}}
		<!-- MAIN SCREEN -->
		<h3>Меню</h3>
		<div class="item">
			{{if data.authenticated==2}}
				<div class="line">
					{{:helper.link('Сделать объявление','info',{'operation':'announce'})}}
				</div>
				<div class="line">
				{{if data.emagged}}
					{{:helper.link('Написать [UNKNOWN]','envelope',{'operation':'MessageSyndicate'})}}
					</div>
					<div class="line">
					{{:helper.link('Сбросить реле','refresh',{'operation':'RestoreBackup'})}}
				{{else}}
					{{:helper.link('Написать в ЦентКом','envelope',{'operation':'MessageCentcomm'})}}
				{{/if}}
				</div>
				<div class="line">
					{{:helper.link('Запросить коды аутентификации ядерной бомбы','exclamation-triangle',{'operation':'nukerequest'})}}
				</div>
			{{/if}}
			<div class="line">
				{{:helper.link('Изменить уровень угрозы','signal',{'operation':'changeseclevel'})}}
			</div>
			<div class="line">
				{{:helper.link('Изменить статус дисплеев','info',{'operation':'status'})}}
			</div>
			<div class="line">
				{{:helper.link('Список сообщений','comment',{'operation':'messagelist'})}}
			</div>
			<div class="line">
				{{:helper.link('Перезагрузить сервер Nano-Mob Hunter GO!','power-off',{'operation':'RestartNanoMob'})}}
			</div>
			<div class="line">
				{{if data.atcSquelched}}
					{{:helper.link('Включить ATC реле', 'signal', {'operation': 'ToggleATC'})}}
				{{else}}
					{{:helper.link('Отключить ATC реле', 'signal', {'operation': 'ToggleATC'})}}
				{{/if}}
			</div>
		</div>
	{{else data.screen==2}}
		<!-- STATUS DISPLAYS -->
		<h2>Статус дисплеев</h2>
		{{:helper.link('Назад','home',{'operation':'main'})}}
		<h3>Пресеты</h3>
		{{for data.stat_display.presets}}
			<div class="line">
				<div class="statusLabel">{{:helper.link(value.label,'info',{'operation':'setstat','statdisp':value.name},null,(name==data.stat_display.type?'linkOn':''))}}</div>
			</div>
		{{/for}}
		<h3>Тревоги</h3>
		{{for data.stat_display.alerts}}
			<div class="line">
				<div class="statusLabel">{{:helper.link(value.label,'exclamation-triangle',{'operation':'setstat','statdisp':'alert','alert':value.alert},null,(value.alert==data.stat_display.type?'linkOn':''))}}</div>
			</div>
		{{/for}}
		<h3>Сообщения</h3>
		<div class="item">
			{{if data.stat_display.type}}
			<div class="line">
				<div class="statusLabel">{{:helper.link('Строка 1:','gear',{'operation':'setmsg1'})}}</div>
				<div class="statusValue">{{>data.stat_display.line_1}}</div>
			</div>
			<div class="line">
				<div class="statusLabel">{{:helper.link('Строка 2:','gear',{'operation':'setmsg2'})}}</div>
				<div class="statusValue">{{>data.stat_display.line_2}}</div>
			</div>
			{{/if}}
		</div>
	{{else data.screen==3}}
		<!-- MESSAGES -->
		<h3>Сообщения</h3>
		{{if data.current_message}}
			{{:helper.link('Список сообщений','home',{'operation':'messagelist'})}}
			<h3>{{:data.current_message_title}}</h3>
			<div class="item">
				{{:data.current_message}}
			</div>
		{{else}}
			{{:helper.link('Назад','home',{'operation':'main'})}}
			{{for data.messages}}
				<div class="line">
					<b>{{:value.title}}</b><br>
					{{:helper.link('Открыть','envelope-o',{'operation':'messagelist','msgid':value.id})}}
					{{:helper.link('Удалить','close',{'operation':'delmessage','msgid':value.id})}}
				</div>
			{{/for}}
		{{/if}}
	{{else data.screen==4}}
		<!-- ALERT LEVEL -->
		<h3>Уровень угрозы</h3>
		{{:helper.link('Назад','home',{'operation':'main'})}}
		<div class="item">
			<div class="line">
				<div class="itemLabel">Уровень угрозы:</div>
				<div class="itemContents">{{>data.str_security_level}}</div>
			</div>
			<div class="line">
				<div class="itemLabel">Пресеты:</div>
				<div class="itemContents">
					{{for data.levels}}
						{{:helper.link(value.name,'comment',{'operation':'newalertlevel','level':value.id},null,(value.id==data.security_level?'linkOn':''))}}
					{{/for}}
				</div>
			</div>
		</div>
	{{/if}}<!-- SCREEN -->
{{/if}}<!-- AUTHENTICATED -->
