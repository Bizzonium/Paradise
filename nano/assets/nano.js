var NanoUtility=function(){var a={};return{init:function(){var e=$("body");a=e.data("urlParameters")},generateHref:function(e){var t="?";for(var n in a)a.hasOwnProperty(n)&&("?"!==t&&(t+=";"),t+=n+"="+a[n]);for(var n in e)e.hasOwnProperty(n)&&("?"!==t&&(t+=";"),t+=n+"="+e[n]);return t},winset:function(e,t,n){var a;return null==n&&(n=NanoStateManager.getData().config.window.ref),(a={})[n+"."+e]=t,location.href=NanoUtility.href("winset",a)},extend:function(n,a){return Object.keys(a).forEach(function(e){var t;return(t=a[e])&&"[object Object]"===Object.prototype.toString.call(t)?(n[e]=n[e]||{},NanoUtility.extend(n[e],t)):n[e]=t}),n},href:function(e,t){return null==e&&(e=""),null==t&&(t={}),e=new Url("byond://"+e),NanoUtility.extend(e.query,t),e},close:function(){var e;return e={command:"nanoclose "+a.src},this.winset("is-visible","false"),location.href=NanoUtility.href("winset",e)}}}();"undefined"==typeof jQuery&&reportError("ERROR: Javascript library failed to load!"),"undefined"==typeof doT&&reportError("ERROR: Template engine failed to load!");var reportError=function(e){window.location="byond://?nano_err="+encodeURIComponent(e),alert(e)};$(document).ready(function(){NanoUtility.init(),NanoStateManager.init(),NanoTemplate.init(),NanoWindow.init()}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,n=Number(arguments[1])||0;for((n=n<0?Math.ceil(n):Math.floor(n))<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1}),String.prototype.format||(String.prototype.format=function(n){return this.replace(String.prototype.format.regex,function(e){var t=parseInt(e.substring(1,e.length-1));return 0<=t?n[t]:-1===t?"{":-2===t?"}":""})},String.prototype.format.regex=new RegExp("{-?[0-9]+}","g")),Object.size=function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t},window.console||(window.console={log:function(e){return!1}}),String.prototype.toTitleCase=function(){var r=/^(a|an|and|as|at|but|by|en|for|if|in|of|on|or|the|to|vs?\.?|via)$/i;return this.replace(/([^\W_]+[^\s-]*) */g,function(e,t,n,a){return 0<n&&n+t.length!==a.length&&-1<t.search(r)&&":"!==a.charAt(n-2)&&a.charAt(n-1).search(/[^\s-]/)<0?e.toLowerCase():-1<t.substr(1).search(/[A-Z]|\../)?e:e.charAt(0).toUpperCase()+e.substr(1)})},$.ajaxSetup({cache:!1}),Function.prototype.inheritsFrom=function(e){return this.prototype=new e,(this.prototype.constructor=this).prototype.parent=e.prototype,this},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.ckey||(String.prototype.ckey=function(){return this.replace(/\W/g,"").toLowerCase()}),NanoStateManager=function(){function t(e,t){for(var n in e)e.hasOwnProperty(n)&&jQuery.isFunction(e[n])&&(t=e[n].call(this,t));return t}var n=!1,a=null,r={},o={},i={},s=null,l=function(e){null!=s&&(!1!==(e=s.onBeforeUpdate(e))?(a=e,s.onUpdate(a),s.onAfterUpdate(a)):reportError("data is false, return"))};return{init:function(){!function(){null!=(a=$("body").data("initialData"))&&a.hasOwnProperty("config")&&a.hasOwnProperty("data")||reportError("Error: Initial data did not load correctly."+JSON.stringify(a));var e="default";a.config.hasOwnProperty("stateKey")&&a.config.stateKey&&(e=a.config.stateKey.toLowerCase()),NanoStateManager.setCurrentState(e),$(document).on("templatesLoaded",function(){l(a),n=!0})}()},receiveUpdateData:function(e){!function(e){var t;try{t=jQuery.parseJSON(e)}catch(e){return reportError("recieveUpdateData failed. <br>Error name: "+e.name+"<br>Error Message: "+e.message)}t.hasOwnProperty("data")||(a&&a.hasOwnProperty("data")?t.data=a.data:t.data={}),n?l(t):a=t}(e)},addBeforeUpdateCallback:function(e,t){r[e]=t},addBeforeUpdateCallbacks:function(e){for(var t in e)e.hasOwnProperty(t)&&NanoStateManager.addBeforeUpdateCallback(t,e[t])},removeBeforeUpdateCallback:function(e){r.hasOwnProperty(e)&&delete r[e]},executeBeforeUpdateCallbacks:function(e){return t(r,e)},addAfterUpdateCallback:function(e,t){o[e]=t},addAfterUpdateCallbacks:function(e){for(var t in e)e.hasOwnProperty(t)&&NanoStateManager.addAfterUpdateCallback(t,e[t])},removeAfterUpdateCallback:function(e){o.hasOwnProperty(e)&&delete o[e]},executeAfterUpdateCallbacks:function(e){return t(o,e)},addState:function(e){e instanceof NanoStateClass?e.key?i[e.key]=e:reportError("ERROR: Attempted to add a state with an invalid stateKey"):reportError("ERROR: Attempted to add a state which is not instanceof NanoStateClass")},setCurrentState:function(e){if(void 0===e||!e)return reportError("ERROR: No state key was passed!"),!1;if(!i.hasOwnProperty(e))return reportError("ERROR: Attempted to set a current state which does not exist: "+e),!1;var t=s;return s=i[e],null!=t&&t.onRemove(s),s.onAdd(t),!0},getCurrentState:function(){return s},getData:function(){return a}}}(),NanoBaseCallbacks=function(){var a=!0,t={},n={status:function(n){var e;return 2==n.config.status?(e="good",$(".linkActive").removeClass("inactive")):(e=1==n.config.status?"average":"bad",$(".linkActive").addClass("inactive")),$(".statusicon").removeClass("good bad average").addClass(e),$(".linkActive").stopTime("linkPending"),$(".linkActive").removeClass("linkPending"),$(".linkActive").off("click").on("click",function(e){e.preventDefault();var t=$(this).data("href");null!=t&&a&&(a=!1,$("body").oneTime(300,"enableClick",function(){a=!0}),2==n.config.status&&$(this).oneTime(300,"linkPending",function(){$(this).addClass("linkPending")}),window.location.href=t)}),n},nanomap:function(e){return $(".mapIcon").off("mouseenter mouseleave").on("mouseenter",function(e){$("#uiMapTooltip").html($(this).children(".tooltip").html()).show().stopTime().oneTime(5e3,"hideTooltip",function(){$(this).fadeOut(500)})}),$(".zoomLink").off("click").on("click",function(e){e.preventDefault();var t=$(this).data("zoomLevel"),n=$("#uiMap"),a=n.width()*t,r=n.height()*t;n.css({zoom:t,left:"50%",top:"50%",marginLeft:"-"+Math.floor(a/2)+"px",marginTop:"-"+Math.floor(r/2)+"px"})}),$("#uiMapImage").attr("src",e.config.map+"_nanomap_z"+e.config.mapZLevel+".png"),e}};return{addCallbacks:function(){NanoStateManager.addBeforeUpdateCallbacks(t),NanoStateManager.addAfterUpdateCallbacks(n)},removeCallbacks:function(){for(var e in t)t.hasOwnProperty(e)&&NanoStateManager.removeBeforeUpdateCallback(e);for(var e in n)n.hasOwnProperty(e)&&NanoStateManager.removeAfterUpdateCallback(e)}}}(),NanoBaseHelpers=function(){var t={syndicateMode:function(){return $(".mainBG").css("background","url('syndicate.png') no-repeat fixed center/50% 50%, linear-gradient(to bottom, #8f1414 0%, #4B0A0A 100%) no-repeat fixed center;"),$("#uiTitleFluff").css("background-image","url('uiTitleFluff-Syndicate.png')"),$("#uiTitleFluff").css("background-position","50% 50%"),$("#uiTitleFluff").css("background-repeat","no-repeat"),""},combine:function(e,t){return e&&t?e.concat(t):e||t},dump:function(e){return JSON.stringify(e)},link:function(e,t,n,a,r,o){var i="",s="noIcon";void 0!==t&&t&&(i='<div class="uiLinkPendingIcon"></div><i class="fa fa-fw fa-'+t+'"></i>',s="hasIcon"),void 0!==r&&r||(r="link");var l="";void 0!==o&&o&&(l='id="'+o+'"');var c=NanoTransition.allocID(l+"_"+e.toString().replace(/[^a-z0-9_]/gi,"_")+"_"+t);return void 0!==a&&a?'<div unselectable="on" class="link '+s+" "+c+'" '+l+">"+i+e+'</div><script>$(function() { var newState = {"..class": "'+r+" "+a+'"}; var old = NanoTransition.transitionElement("'+c+'", null, newState, 200); NanoTransition.animateHover("'+c+'", null, old, newState); });<\/script>':'<div unselectable="on" class="linkActive '+s+" "+c+'" data-href="'+NanoUtility.generateHref(n)+'" '+l+">"+i+e+'</div><script>$(function() { var newState = {"..class": "'+r+'"}; var old = NanoTransition.transitionElement("'+c+'", null, newState, 200); NanoTransition.animateHover("'+c+'", null, old, newState); });<\/script>'},xor:function(e,t){return e^t},precisionRound:function(e,t){if(0==t)return Math.round(number);var n=Math.pow(10,t);return Math.round(e*n)/n},round:function(e){return Math.round(e)},fixed:function(e){return Math.round(10*e)/10},floor:function(e){return Math.floor(e)},ceil:function(e){return Math.ceil(e)},string:function(){if(0==arguments.length)return"";if(1==arguments.length)return arguments[0];if(1<arguments.length){stringArgs=[];for(var e=1;e<arguments.length;e++)stringArgs.push(arguments[e]);return arguments[0].format(stringArgs)}return""},formatNumber:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},displayBar:function(e,t,n,a,r){t<n?e<t?e=t:n<e&&(e=n):t<e?e=t:e<n&&(e=n),void 0!==a&&a||(a=""),void 0!==r&&r||(r="");var o=Math.round((e-t)/(n-t)*100),i=NanoTransition.allocID(t+"_"+n);return'<div class="displayBar '+i+" "+a+'"><div class="displayBarFill"></div><div class="displayBarText '+a+'">'+r+'</div></div><script>$(function() { NanoTransition.transitionElement("'+i+'", ".displayBarFill", {width: "'+o+'%", "..class": "'+a+'"}); });<\/script>'},dangerToClass:function(e){return 0==e?"good":1==e?"average":"bad"},dangerToSpan:function(e){return 0==e?'"<span class="good">Good</span>"':1==e?'"<span class="average">Minor Alert</span>"':'"<span class="bad">Major Alert</span>"'},generateHref:function(e){var t=$("body");_urlParameters=t.data("urlParameters");var n="?";for(var a in _urlParameters)_urlParameters.hasOwnProperty(a)&&("?"!==n&&(n+=";"),n+=a+"="+_urlParameters[a]);for(var a in e)e.hasOwnProperty(a)&&("?"!==n&&(n+=";"),n+=a+"="+e[a]);return n},displayDNABlocks:function(e,t,n,a,r){if(!e)return'<div class="notice">Please place a valid subject into the DNA modifier.</div>';var o=e.split(""),i='<div class="dnaBlock"><div class="link dnaBlockNumber">1</div>',s=1,l=1;for(var c in o)if(o.hasOwnProperty(c)&&"object"!=typeof o[c]){var d;d="UI"==r.toUpperCase()?{selectUIBlock:s,selectUISubblock:l}:{selectSEBlock:s,selectSESubblock:l};var u="linkActive";s==t&&l==n&&(u="selected"),i+='<div class="link '+u+' dnaSubBlock" data-href="'+NanoUtility.generateHref(d)+'" id="dnaBlock'+c+'">'+o[c]+"</div>",++c%a==0&&c<o.length?(l=1,i+='</div><div class="dnaBlock"><div class="link dnaBlockNumber">'+ ++s+"</div>"):l++}return i+="</div>"},cMirror:function(e){CodeMirror.fromTextArea(document.getElementById(e),{lineNumbers:!0,indentUnit:4,indentWithTabs:!0,theme:"lesser-dark"})},smoothNumber:function(e){var t=NanoTransition.allocID("n");return'<span class="'+t+'"></span><script>$(function() { var newState = {value: '+e+'}; var old = NanoTransition.updateElement("'+t+'", newState); NanoTransition.animateTextValue("'+t+'", null, -1, old["value"], newState["value"]); });<\/script>'},smoothRound:function(e,t){var n=NanoTransition.allocID(t);return void 0===t&&(placed=0),'<span class="'+n+'"></span><script>$(function() { var newState = {value: '+e.toFixed(t)+'}; var old = NanoTransition.updateElement("'+n+'", newState); NanoTransition.animateTextValue("'+n+'", null, '+t+', old["value"], newState["value"]); });<\/script>'}};return{addHelpers:function(){NanoTemplate.addHelpers(t)},removeHelpers:function(){for(var e in t)t.hasOwnProperty(e)&&NanoTemplate.removeHelper(e)}}}(),NanoStateDefaultClass.inheritsFrom(NanoStateClass);var NanoStateDefault=new NanoStateDefaultClass;function NanoStateDefaultClass(){this.key="default",this.key=this.key.toLowerCase(),NanoStateManager.addState(this)}NanoStatePDAClass.inheritsFrom(NanoStateClass);var NanoStatePDA=new NanoStatePDAClass;function NanoStatePDAClass(){this.key="pda",this.key=this.key.toLowerCase(),this.current_template="",NanoStateManager.addState(this)}function NanoStateClass(){}NanoStatePDAClass.prototype.onUpdate=function(t){NanoStateClass.prototype.onUpdate.call(this,t);var n=this;try{if(null!=t.data.app){var a=t.data.app.template;null!=a&&a!=n.current_template?$.when($.ajax({url:a+".tmpl",cache:!1,dataType:"text"})).done(function(e){e+='<div class="clearBoth"></div>';try{NanoTemplate.addTemplate("app",e),NanoTemplate.resetTemplate("app"),$("#uiApp").html(NanoTemplate.parse("app",t)),n.current_template=a,n.onAfterUpdate(t)}catch(e){return void reportError("ERROR: An error occurred while loading the PDA App UI: "+e.message)}}).fail(function(){reportError("ERROR: Loading template app("+a+") failed!")}):NanoTemplate.templateExists("app")&&$("#uiApp").html(NanoTemplate.parse("app",t))}}catch(e){return void reportError("ERROR: An error occurred while rendering the PDA App UI: "+e.message)}},NanoStateClass.prototype.key=null,NanoStateClass.prototype.layoutRendered=!1,NanoStateClass.prototype.contentRendered=!1,NanoStateClass.prototype.mapInitialised=!1,NanoStateClass.prototype.isCurrent=function(){return NanoStateManager.getCurrentState()==this},NanoStateClass.prototype.onAdd=function(e){NanoBaseCallbacks.addCallbacks(),NanoBaseHelpers.addHelpers()},NanoStateClass.prototype.onRemove=function(e){NanoBaseCallbacks.removeCallbacks(),NanoBaseHelpers.removeHelpers()},NanoStateClass.prototype.onBeforeUpdate=function(e){return e=NanoStateManager.executeBeforeUpdateCallbacks(e)},NanoStateClass.prototype.onUpdate=function(e){try{(!this.layoutRendered||e.config.hasOwnProperty("autoUpdateLayout")&&e.config.autoUpdateLayout)&&($("#uiLayout").html(NanoTemplate.parse("layout",e)),this.layoutRendered=!0),(!this.contentRendered||e.config.hasOwnProperty("autoUpdateContent")&&e.config.autoUpdateContent)&&($("#uiContent").html(NanoTemplate.parse("main",e)),this.contentRendered=!0),NanoTemplate.templateExists("mapContent")&&(this.mapInitialised||($("#uiMap").draggable(),$("#uiMapTooltip").off("click").on("click",function(e){e.preventDefault(),$(this).fadeOut(400)}),this.mapInitialised=!0),$("#uiMapContent").html(NanoTemplate.parse("mapContent",e)),e.config.hasOwnProperty("showMap")&&e.config.showMap?($("#uiContent").addClass("hidden"),$("#uiMapWrapper").removeClass("hidden")):($("#uiMapWrapper").addClass("hidden"),$("#uiContent").removeClass("hidden"))),NanoTemplate.templateExists("mapHeader")&&$("#uiMapHeader").html(NanoTemplate.parse("mapHeader",e)),NanoTemplate.templateExists("mapFooter")&&$("#uiMapFooter").html(NanoTemplate.parse("mapFooter",e))}catch(e){return void reportError("ERROR: An error occurred while rendering the UI: "+e.message)}},NanoStateClass.prototype.onAfterUpdate=function(e){NanoStateManager.executeAfterUpdateCallbacks(e)},NanoStateClass.prototype.alertText=function(e){alert(e)};var NanoTemplate=function(){var n={},a={},r={},o={},i=function(){if(Object.size(n)){for(var t in n)if(n.hasOwnProperty(t))return void $.when($.ajax({url:n[t],cache:!1,dataType:"text"})).done(function(e){e+='<div class="clearBoth"></div>';try{NanoTemplate.addTemplate(t,e)}catch(e){return void reportError("ERROR: An error occurred while loading the UI: "+e.message)}delete n[t],i()}).fail(function(){reportError("ERROR: Loading template "+t+"("+n[t]+") failed!")})}else $(document).trigger("templatesLoaded")};return{init:function(){null==(n=$("body").data("templateData"))&&reportError("Error: Template data did not load correctly."),i()},addTemplate:function(e,t){a[e]=t},templateExists:function(e){return a.hasOwnProperty(e)},resetTemplate:function(e){r[e]=null},parse:function(e,t){if(!r.hasOwnProperty(e)||!r[e]){if(!a.hasOwnProperty(e))return reportError('ERROR: Template "'+e+'" does not exist in _compiledTemplates!'),"<h2>Template error (does not exist)</h2>";!function(){for(var e in a)try{r[e]=doT.template(a[e],null,a)}catch(e){reportError(e.message)}}()}return"function"!=typeof r[e]?(reportError(r[e]),reportError('ERROR: Template "'+e+'" failed to compile!'),"<h2>Template error (failed to compile)</h2>"):r[e].call(this,t.data,t.config,o)},addHelper:function(e,t){jQuery.isFunction(t)?o[e]=t:reportError("NanoTemplate.addHelper failed to add "+e+" as it is not a function.")},addHelpers:function(e){for(var t in e)e.hasOwnProperty(t)&&NanoTemplate.addHelper(t,e[t])},removeHelper:function(e){helpers.hasOwnProperty(e)&&delete o[e]}}}();NanoTransition=function(){var s={},l={},t=0;NanoStateManager.addBeforeUpdateCallback("TransitionReset",function(e){return t=0,e});function i(e,t,n){var a,r=s[e];void 0===n&&(n=!1);var o=$("."+e);if(0==o.length)return t;if(o=o[0],r&&r.tagName==o.tagName&&r.tabIndex==o.tabIndex&&r.parent==o.parentNode.tagName&&r.children==o.children.length){if(a=l[e],n){var i={};for(k in a)i[k]=a[k];for(k in t)i[k]=t[k];t=i}}else a=t,s[e]={tagName:o.tagName,tabIndex:o.tabIndex,parent:o.parentNode.tagName,children:o.children.length};return l[e]=t,a}function d(e,t){var n=$("."+e);return t?$(n).children(t):$(n)}function o(e,t,n,a,r){var o=d(e,t);void 0===r&&(r=1900),o.css(n).animate(a,{duration:r,queue:!1});var i=n["..class"],s=a["..class"];if(i&&s&&(o.addClass(i),i!=s)){i=i.split(" "),s=s.split(" ");var l=i.filter(function(e){return-1==s.indexOf(e)}),c=s.filter(function(e){return-1==i.indexOf(e)});i=l.join(" "),s=c.join(" "),o.switchClass(i,s,{duration:r,queue:!1})}}return{allocID:function(e){return"_Hide_Map_close"==e?"transition__map":(void 0===e&&(e=""),"transition__"+t+++"_"+e.toString())},updateElement:i,animateElement:o,animateTextValue:function(e,t,n,a,r,o){var i=d(e,t);void 0===o&&(o=1900),-1==n?i.text(a.toString()):i.text(a.toFixed(n)),a!=r&&i.animate({i:1},{duration:o,queue:!1,step:function(e,t){t.elem.textContent=-1==n?(a*(1-e)+r*e).toString():(a*(1-e)+r*e).toFixed(n)}})},animateHover:function(e,t,n,a,r){var o=d(e,t);void 0===r&&(r=200),n["..hover"]&&o.addClass("hover"),o.hover(function(){o.stop(1,1).addClass("hover",{duration:r,queue:!1}),i(e,{"..hover":!0},!0)},function(){o.stop(1,1).removeClass("hover",{duration:r,queue:!1}),i(e,{"..hover":!1},!0)})},transitionElement:function(e,t,n,a){var r=i(e,n);return o(e,t,r,n,a),r}}}();var NanoWindow=function(){function u(e,t){NanoUtility.winset("pos",e+","+t)}function p(e,t){NanoUtility.winset("size",e+","+t)}function e(){var e=window.screenLeft,t=window.screenTop;u(0,0),f=window.screenLeft,h=window.screenTop;var n=e-f,a=t-h;u(n=n<f?0:n,a=a<h?0:a);var r=$(window).height(),o=$(window).width();$("body").height()>=$(window).height()-29&&(o+=17),$(document).width()>$(window).width()&&(r+=17);var i=Math.max(280,o),s=Math.max(140,r);p(i,s)}var f,h,a,m,v,y,g,t=function(){NanoUtility.winset("titlebar",0),NanoUtility.winset("can-resize",0),NanoUtility.winset("transparent-color","#FF00E4"),$(".fancy").show(),$("#uiTitleFluff").css("right","72px"),$(".statusicon").css("left","34px"),$("#uiTitleText").css("left","66px")},n=function(){$(".close").on("click",function(e){NanoUtility.close()}),$(".minimize").on("click",function(e){NanoUtility.winset("is-minimized","true")})},r=function(){$("body").on("mousemove","#uiTitleWrapper",function(e){o(e)}),$("body").on("mousedown","#uiTitleWrapper",function(){a=!0,$(this)[0].setCapture&&$(this)[0].setCapture()}),$("body").on("mouseup","#uiTitleWrapper",function(){a=!1,$(this)[0].releaseCapture&&$(this)[0].releaseCapture()}),$("body").on("mousemove","div.resizeArea",function(e){i.call(this,e)}),$("body").on("mousedown","div.resizeArea",function(){y=!0,this.setCapture&&this.setCapture()}),$("body").on("mouseup","div.resizeArea",function(){y=!1,this.releaseCapture&&this.releaseCapture()})},o=function(e){if(e=e||window.event,m!==e.screenX||v!==e.screenY){if(void 0===m&&(m=e.screenX,v=e.clientY),a){var t=e.screenX-m,n=e.screenY-v;t+=window.screenLeft-f,n+=window.screenTop-h,u(t,n)}m=e.screenX,v=e.screenY}},i=function(e){if(!g){if(g=!0,e=e||window.event,void 0===m&&(m=e.screenX-f,v=e.screenY-h),y){var t=$(window).width(),n=$(window).height();$("body").height()>=$(window).height()-29&&(t+=17),$(document).width()>$(window).width()&&(n+=17);var a=Number($(this).attr("rx")),r=Number($(this).attr("ry")),o=e.screenX-f-m,i=e.screenY-h-v,s=window.screenLeft-f,l=window.screenTop-h,c=t+o*a;-1==a&&(s+=o);var d=n+i*r;-1==r&&(l+=i),c=Math.max(280,c),d=Math.max(140,d),u(s,l),p(c,d)}m=e.screenX-f,v=e.screenY-h,g=!1}};return{init:function(){$(document).on("templatesLoaded",function(){e(),NanoStateManager.getData().config.user.fancy&&(t(),e(),n(),r())})}}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5hbm8uanMiXSwibmFtZXMiOlsiTmFub1V0aWxpdHkiLCJfdXJsUGFyYW1ldGVycyIsImluaXQiLCJib2R5IiwiJCIsImRhdGEiLCJnZW5lcmF0ZUhyZWYiLCJwYXJhbWV0ZXJzIiwicXVlcnlTdHJpbmciLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsIndpbnNldCIsInZhbHVlIiwid2luZG93Iiwib2JqIiwiTmFub1N0YXRlTWFuYWdlciIsImdldERhdGEiLCJjb25maWciLCJyZWYiLCJsb2NhdGlvbiIsImhyZWYiLCJleHRlbmQiLCJmaXJzdCIsInNlY29uZCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwic2Vjb25kVmFsIiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwidXJsIiwicGFyYW1zIiwiVXJsIiwicXVlcnkiLCJjbG9zZSIsImNvbW1hbmQiLCJzcmMiLCJ0aGlzIiwialF1ZXJ5IiwicmVwb3J0RXJyb3IiLCJkb1QiLCJzdHIiLCJlbmNvZGVVUklDb21wb25lbnQiLCJhbGVydCIsImRvY3VtZW50IiwicmVhZHkiLCJOYW5vVGVtcGxhdGUiLCJOYW5vV2luZG93IiwiQXJyYXkiLCJpbmRleE9mIiwiZWx0IiwibGVuIiwibGVuZ3RoIiwiZnJvbSIsIk51bWJlciIsImFyZ3VtZW50cyIsIk1hdGgiLCJjZWlsIiwiZmxvb3IiLCJTdHJpbmciLCJmb3JtYXQiLCJhcmdzIiwicmVwbGFjZSIsInJlZ2V4IiwiaXRlbSIsImludFZhbCIsInBhcnNlSW50Iiwic3Vic3RyaW5nIiwiUmVnRXhwIiwic2l6ZSIsImNvbnNvbGUiLCJsb2ciLCJ0b1RpdGxlQ2FzZSIsInNtYWxsV29yZHMiLCJtYXRjaCIsInAxIiwiaW5kZXgiLCJ0aXRsZSIsInNlYXJjaCIsImNoYXJBdCIsInRvTG93ZXJDYXNlIiwic3Vic3RyIiwidG9VcHBlckNhc2UiLCJhamF4U2V0dXAiLCJjYWNoZSIsIkZ1bmN0aW9uIiwiaW5oZXJpdHNGcm9tIiwicGFyZW50Q2xhc3NPck9iamVjdCIsImNvbnN0cnVjdG9yIiwicGFyZW50IiwidHJpbSIsImNrZXkiLCJleGVjdXRlQ2FsbGJhY2tzIiwiY2FsbGJhY2tzIiwiaXNGdW5jdGlvbiIsIl9pc0luaXRpYWxpc2VkIiwiX2RhdGEiLCJfYmVmb3JlVXBkYXRlQ2FsbGJhY2tzIiwiX2FmdGVyVXBkYXRlQ2FsbGJhY2tzIiwiX3N0YXRlcyIsIl9jdXJyZW50U3RhdGUiLCJkb1VwZGF0ZSIsIm9uQmVmb3JlVXBkYXRlIiwib25VcGRhdGUiLCJvbkFmdGVyVXBkYXRlIiwiSlNPTiIsInN0cmluZ2lmeSIsInN0YXRlS2V5Iiwic2V0Q3VycmVudFN0YXRlIiwib24iLCJyZWNlaXZlVXBkYXRlRGF0YSIsImpzb25TdHJpbmciLCJ1cGRhdGVEYXRhIiwicGFyc2VKU09OIiwiZXJyb3IiLCJuYW1lIiwibWVzc2FnZSIsImFkZEJlZm9yZVVwZGF0ZUNhbGxiYWNrIiwiY2FsbGJhY2tGdW5jdGlvbiIsImFkZEJlZm9yZVVwZGF0ZUNhbGxiYWNrcyIsImNhbGxiYWNrS2V5IiwicmVtb3ZlQmVmb3JlVXBkYXRlQ2FsbGJhY2siLCJleGVjdXRlQmVmb3JlVXBkYXRlQ2FsbGJhY2tzIiwiYWRkQWZ0ZXJVcGRhdGVDYWxsYmFjayIsImFkZEFmdGVyVXBkYXRlQ2FsbGJhY2tzIiwicmVtb3ZlQWZ0ZXJVcGRhdGVDYWxsYmFjayIsImV4ZWN1dGVBZnRlclVwZGF0ZUNhbGxiYWNrcyIsImFkZFN0YXRlIiwic3RhdGUiLCJOYW5vU3RhdGVDbGFzcyIsInByZXZpb3VzU3RhdGUiLCJvblJlbW92ZSIsIm9uQWRkIiwiZ2V0Q3VycmVudFN0YXRlIiwiTmFub0Jhc2VDYWxsYmFja3MiLCJfY2FuQ2xpY2siLCJfYmFzZUJlZm9yZVVwZGF0ZUNhbGxiYWNrcyIsIl9iYXNlQWZ0ZXJVcGRhdGVDYWxsYmFja3MiLCJzdGF0dXMiLCJ1aVN0YXR1c0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInN0b3BUaW1lIiwib2ZmIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIm9uZVRpbWUiLCJuYW5vbWFwIiwiaHRtbCIsImNoaWxkcmVuIiwic2hvdyIsImZhZGVPdXQiLCJ6b29tTGV2ZWwiLCJ1aU1hcE9iamVjdCIsInVpTWFwV2lkdGgiLCJ3aWR0aCIsInVpTWFwSGVpZ2h0IiwiaGVpZ2h0IiwiY3NzIiwiem9vbSIsImxlZnQiLCJ0b3AiLCJtYXJnaW5MZWZ0IiwibWFyZ2luVG9wIiwiYXR0ciIsImFkZENhbGxiYWNrcyIsInJlbW92ZUNhbGxiYWNrcyIsIk5hbm9CYXNlSGVscGVycyIsIl9iYXNlSGVscGVycyIsInN5bmRpY2F0ZU1vZGUiLCJjb21iaW5lIiwiYXJyMSIsImFycjIiLCJjb25jYXQiLCJkdW1wIiwibGluayIsInRleHQiLCJpY29uIiwiZWxlbWVudENsYXNzIiwiZWxlbWVudElkIiwiaWNvbkh0bWwiLCJpY29uQ2xhc3MiLCJlbGVtZW50SWRIdG1sIiwidGlkIiwiTmFub1RyYW5zaXRpb24iLCJhbGxvY0lEIiwieG9yIiwibnVtYmVyIiwiYml0IiwicHJlY2lzaW9uUm91bmQiLCJwbGFjZXMiLCJyb3VuZCIsIm11bHRpcGxpZXIiLCJwb3ciLCJmaXhlZCIsInN0cmluZyIsInN0cmluZ0FyZ3MiLCJpIiwicHVzaCIsImZvcm1hdE51bWJlciIsIngiLCJwYXJ0cyIsInNwbGl0Iiwiam9pbiIsImNhcGl0YWxpemVGaXJzdExldHRlciIsInNsaWNlIiwiZGlzcGxheUJhciIsInJhbmdlTWluIiwicmFuZ2VNYXgiLCJzdHlsZUNsYXNzIiwic2hvd1RleHQiLCJwZXJjZW50YWdlIiwiZGFuZ2VyVG9DbGFzcyIsImxldmVsIiwiZGFuZ2VyVG9TcGFuIiwiZGlzcGxheUROQUJsb2NrcyIsImRuYVN0cmluZyIsInNlbGVjdGVkQmxvY2siLCJzZWxlY3RlZFN1YmJsb2NrIiwiYmxvY2tTaXplIiwicGFyYW1LZXkiLCJjaGFyYWN0ZXJzIiwiYmxvY2siLCJzdWJibG9jayIsInNlbGVjdFVJQmxvY2siLCJzZWxlY3RVSVN1YmJsb2NrIiwic2VsZWN0U0VCbG9jayIsInNlbGVjdFNFU3ViYmxvY2siLCJjTWlycm9yIiwidGV4dGJveCIsIkNvZGVNaXJyb3IiLCJmcm9tVGV4dEFyZWEiLCJnZXRFbGVtZW50QnlJZCIsImxpbmVOdW1iZXJzIiwiaW5kZW50VW5pdCIsImluZGVudFdpdGhUYWJzIiwidGhlbWUiLCJzbW9vdGhOdW1iZXIiLCJzbW9vdGhSb3VuZCIsInVuZGVmaW5lZCIsInBsYWNlZCIsInRvRml4ZWQiLCJhZGRIZWxwZXJzIiwicmVtb3ZlSGVscGVycyIsImhlbHBlcktleSIsInJlbW92ZUhlbHBlciIsIk5hbm9TdGF0ZURlZmF1bHRDbGFzcyIsIk5hbm9TdGF0ZURlZmF1bHQiLCJOYW5vU3RhdGVQREFDbGFzcyIsIk5hbm9TdGF0ZVBEQSIsImN1cnJlbnRfdGVtcGxhdGUiLCJ0ZW1wbGF0ZSIsIndoZW4iLCJhamF4IiwiZGF0YVR5cGUiLCJkb25lIiwidGVtcGxhdGVNYXJrdXAiLCJhZGRUZW1wbGF0ZSIsInJlc2V0VGVtcGxhdGUiLCJwYXJzZSIsImZhaWwiLCJ0ZW1wbGF0ZUV4aXN0cyIsImxheW91dFJlbmRlcmVkIiwiY29udGVudFJlbmRlcmVkIiwibWFwSW5pdGlhbGlzZWQiLCJpc0N1cnJlbnQiLCJuZXh0U3RhdGUiLCJkcmFnZ2FibGUiLCJhbGVydFRleHQiLCJfdGVtcGxhdGVEYXRhIiwiX3RlbXBsYXRlcyIsIl9jb21waWxlZFRlbXBsYXRlcyIsIl9oZWxwZXJzIiwibG9hZE5leHRUZW1wbGF0ZSIsInRyaWdnZXIiLCJ0ZW1wbGF0ZVN0cmluZyIsInRlbXBsYXRlS2V5IiwiY29tcGlsZVRlbXBsYXRlcyIsImFkZEhlbHBlciIsImhlbHBlck5hbWUiLCJoZWxwZXJGdW5jdGlvbiIsImhlbHBlcnMiLCJpZENhY2hlIiwic3RhdGVDYWNoZSIsImN1cnJlbnRJRCIsIl91cGRhdGVFbGVtZW50IiwiaWQiLCJuZXdTdGF0ZSIsIm1lcmdlIiwib2xkU3RhdGUiLCJlbGVtZW50IiwidGFnTmFtZSIsInRhYkluZGV4IiwicGFyZW50Tm9kZSIsIm5ld1N0YXRlQ29weSIsImsiLCJfcmVzb2x2ZVRhcmdldCIsImZpbHRlciIsIl9hbmltYXRlRWxlbWVudCIsInRpbWUiLCJ0YXJnZXQiLCJhbmltYXRlIiwiZHVyYXRpb24iLCJxdWV1ZSIsIm9sZENsYXNzIiwibmV3Q2xhc3MiLCJmaWx0ZXJlZE9sZENsYXNzIiwiZmlsdGVyZWROZXdDbGFzcyIsInN3aXRjaENsYXNzIiwidW5pcXVlSUQiLCJ1cGRhdGVFbGVtZW50IiwiYW5pbWF0ZUVsZW1lbnQiLCJhbmltYXRlVGV4dFZhbHVlIiwib2xkVmFsdWUiLCJuZXdWYWx1ZSIsInN0ZXAiLCJub3ciLCJmeCIsImVsZW0iLCJ0ZXh0Q29udGVudCIsImFuaW1hdGVIb3ZlciIsImhvdmVyIiwic3RvcCIsIi4uaG92ZXIiLCJ0cmFuc2l0aW9uRWxlbWVudCIsIm9sZCIsInNldFBvcyIsInkiLCJzZXRTaXplIiwidyIsImgiLCJvYmV5TGltaXRzIiwicHJldlgiLCJzY3JlZW5MZWZ0IiwicHJldlkiLCJzY3JlZW5Ub3AiLCJvZmZzZXRYIiwib2Zmc2V0WSIsImNsYW1wZWRYIiwiY2xhbXBlZFkiLCJuZXdXaWR0aCIsIm1heCIsIm5ld0hlaWdodCIsImRyYWdnaW5nIiwibGFzdFgiLCJsYXN0WSIsInJlc2l6aW5nIiwicmVzaXplV29ya2luZyIsImZhbmN5Q2hyb21lIiwiYXR0YWNoQnV0dG9ucyIsImF0dGFjaERyYWdBbmRSZXNpemUiLCJldiIsImRyYWciLCJzZXRDYXB0dXJlIiwicmVsZWFzZUNhcHR1cmUiLCJyZXNpemUiLCJzY3JlZW5YIiwic2NyZWVuWSIsImNsaWVudFkiLCJkeCIsImR5IiwicngiLCJyeSIsIm5ld1giLCJuZXdZIiwibmV3VyIsIm5ld0giLCJ1c2VyIiwiZmFuY3kiXSwibWFwcGluZ3MiOiJBQUNBLElBQUlBLFlBQWMsV0FDZCxJQUFJQyxFQUFpQixHQUVyQixNQUFPLENBQ0hDLEtBQU0sV0FDRixJQUFJQyxFQUFPQyxFQUFFLFFBQ2JILEVBQWlCRSxFQUFLRSxLQUFLLGtCQUcvQkMsYUFBYyxTQUFVQyxHQUNwQixJQUFJQyxFQUFjLElBRWxCLElBQUssSUFBSUMsS0FBT1IsRUFDUkEsRUFBZVMsZUFBZUQsS0FDVixNQUFoQkQsSUFDQUEsR0FBZSxLQUVuQkEsR0FBZUMsRUFBTSxJQUFNUixFQUFlUSxJQUlsRCxJQUFLLElBQUlBLEtBQU9GLEVBRVJBLEVBQVdHLGVBQWVELEtBQ04sTUFBaEJELElBQ0FBLEdBQWUsS0FFbkJBLEdBQWVDLEVBQU0sSUFBTUYsRUFBV0UsSUFHOUMsT0FBT0QsR0FFWEcsT0FBUSxTQUFVRixFQUFLRyxFQUFPQyxHQUMxQixJQUFJQyxFQVNKLE9BUmMsTUFBVkQsSUFDQUEsRUFBU0UsaUJBQWlCQyxVQUFVQyxPQUFPSixPQUFPSyxNQUdsREosRUFBTSxJQUNGRCxFQUFTLElBQU1KLEdBQU9HLEVBR3ZCTyxTQUFTQyxLQUFPcEIsWUFBWW9CLEtBQUssU0FGcENOLElBSVJPLE9BQVEsU0FBU0MsRUFBT0MsR0FXcEIsT0FWQUMsT0FBT0MsS0FBS0YsR0FBUUcsUUFBUSxTQUFTakIsR0FDakMsSUFBSWtCLEVBRUosT0FEQUEsRUFBWUosRUFBT2QsS0FDNEMsb0JBQTlDZSxPQUFPSSxVQUFVQyxTQUFTQyxLQUFLSCxJQUM1Q0wsRUFBTWIsR0FBT2EsRUFBTWIsSUFBUSxHQUNwQlQsWUFBWXFCLE9BQU9DLEVBQU1iLEdBQU1rQixJQUUvQkwsRUFBTWIsR0FBT2tCLElBR3JCTCxHQUVYRixLQUFNLFNBQVNXLEVBQUtDLEdBU2hCLE9BUlcsTUFBUEQsSUFDQUEsRUFBTSxJQUVJLE1BQVZDLElBQ0FBLEVBQVMsSUFFYkQsRUFBTSxJQUFJRSxJQUFJLFdBQWFGLEdBQzNCL0IsWUFBWXFCLE9BQU9VLEVBQUlHLE1BQU9GLEdBQ3ZCRCxHQUVYSSxNQUFPLFdBQ0gsSUFBSUgsRUFLSixPQUpBQSxFQUFTLENBQ0xJLFFBQVMsYUFBZW5DLEVBQWVvQyxLQUUzQ0MsS0FBSzNCLE9BQU8sYUFBYyxTQUNuQlEsU0FBU0MsS0FBT3BCLFlBQVlvQixLQUFLLFNBQVVZLEtBMUU1QyxHQStFRyxvQkFBVk8sUUFDUEMsWUFBWSw2Q0FFRSxvQkFBUEMsS0FDUEQsWUFBWSwwQ0FHaEIsSUFBSUEsWUFBYyxTQUFVRSxHQUN4QjdCLE9BQU9NLFNBQVcscUJBQXVCd0IsbUJBQW1CRCxHQUM1REUsTUFBTUYsSUFJVnRDLEVBQUV5QyxVQUFVQyxNQUFNLFdBQ2Q5QyxZQUFZRSxPQUNaYSxpQkFBaUJiLE9BQ2pCNkMsYUFBYTdDLE9BQ2I4QyxXQUFXOUMsU0FHVitDLE1BQU1yQixVQUFVc0IsVUFFakJELE1BQU1yQixVQUFVc0IsUUFBVSxTQUFTQyxHQUUvQixJQUFJQyxFQUFNZCxLQUFLZSxPQUVYQyxFQUFPQyxPQUFPQyxVQUFVLEtBQU8sRUFPbkMsS0FOQUYsRUFBUUEsRUFBTyxFQUNURyxLQUFLQyxLQUFLSixHQUNWRyxLQUFLRSxNQUFNTCxJQUNOLElBQ1BBLEdBQVFGLEdBRUxFLEVBQU9GLEVBQUtFLElBRWYsR0FBSUEsS0FBUWhCLE1BQ1JBLEtBQUtnQixLQUFVSCxFQUNmLE9BQU9HLEVBRWYsT0FBUSxJQUlYTSxPQUFPaEMsVUFBVWlDLFNBRWxCRCxPQUFPaEMsVUFBVWlDLE9BQVMsU0FBVUMsR0FFaEMsT0FEVXhCLEtBQ0N5QixRQUFRSCxPQUFPaEMsVUFBVWlDLE9BQU9HLE1BQU8sU0FBU0MsR0FDdkQsSUFBSUMsRUFBU0MsU0FBU0YsRUFBS0csVUFBVSxFQUFHSCxFQUFLWixPQUFTLElBV3RELE9BVGMsR0FBVmEsRUFDVUosRUFBS0ksSUFDSSxJQUFaQSxFQUNHLEtBQ1MsSUFBWkEsRUFDRyxJQUVBLE1BS3RCTixPQUFPaEMsVUFBVWlDLE9BQU9HLE1BQVEsSUFBSUssT0FBTyxhQUFjLE1BRzdEN0MsT0FBTzhDLEtBQU8sU0FBU3hELEdBQ25CLElBQUl3RCxFQUFPLEVBQ1gsSUFBSyxJQUFJN0QsS0FBT0ssRUFDUkEsRUFBSUosZUFBZUQsSUFBTTZELElBRWpDLE9BQU9BLEdBR1B6RCxPQUFPMEQsVUFDUDFELE9BQU8wRCxRQUFVLENBQ2JDLElBQU0sU0FBUzlCLEdBQ1gsT0FBTyxLQUtuQmtCLE9BQU9oQyxVQUFVNkMsWUFBYyxXQUMzQixJQUFJQyxFQUFhLHFFQUVqQixPQUFPcEMsS0FBS3lCLFFBQVEsc0JBQXVCLFNBQVVZLEVBQU9DLEVBQUlDLEVBQU9DLEdBQ25FLE9BQVksRUFBUkQsR0FBYUEsRUFBUUQsRUFBR3ZCLFNBQVd5QixFQUFNekIsU0FDaEIsRUFBekJ1QixFQUFHRyxPQUFPTCxJQUFnRCxNQUE1QkksRUFBTUUsT0FBT0gsRUFBUSxJQUNuREMsRUFBTUUsT0FBT0gsRUFBUSxHQUFHRSxPQUFPLFVBQVksRUFDcENKLEVBQU1NLGVBR3VCLEVBQXBDTCxFQUFHTSxPQUFPLEdBQUdILE9BQU8sYUFDYkosRUFHSkEsRUFBTUssT0FBTyxHQUFHRyxjQUFnQlIsRUFBTU8sT0FBTyxNQUk1RDlFLEVBQUVnRixVQUFVLENBQ1JDLE9BQU8sSUFHWEMsU0FBUzFELFVBQVUyRCxhQUFlLFNBQVVDLEdBSXhDLE9BSEFsRCxLQUFLVixVQUFZLElBQUk0RCxHQUNyQmxELEtBQUtWLFVBQVU2RCxZQUFjbkQsTUFDeEJWLFVBQVU4RCxPQUFTRixFQUFvQjVELFVBQ3JDVSxNQUdOc0IsT0FBT2hDLFVBQVUrRCxPQUNsQi9CLE9BQU9oQyxVQUFVK0QsS0FBTyxXQUNwQixPQUFPckQsS0FBS3lCLFFBQVEsYUFBYyxNQUtyQ0gsT0FBT2hDLFVBQVVnRSxPQUNsQmhDLE9BQU9oQyxVQUFVZ0UsS0FBTyxXQUNwQixPQUFPdEQsS0FBS3lCLFFBQVEsTUFBTyxJQUFJa0IsZ0JBSXZDbEUsaUJBQW1CLFdBNEdRLFNBQW5COEUsRUFBNkJDLEVBQVd6RixHQUV4QyxJQUFLLElBQUlJLEtBQU9xRixFQUVSQSxFQUFVcEYsZUFBZUQsSUFBUThCLE9BQU93RCxXQUFXRCxFQUFVckYsTUFFN0RKLEVBQU95RixFQUFVckYsR0FBS3FCLEtBQUtRLEtBQU1qQyxJQUl6QyxPQUFPQSxFQW5IWCxJQUFJMkYsR0FBaUIsRUFFakJDLEVBQVEsS0FHUkMsRUFBeUIsR0FFekJDLEVBQXdCLEdBR3hCQyxFQUFVLEdBQ1ZDLEVBQWdCLEtBdUVoQkMsRUFBVyxTQUFVakcsR0FFQSxNQUFqQmdHLEtBT1MsS0FGYmhHLEVBQU9nRyxFQUFjRSxlQUFlbEcsS0FRcEM0RixFQUFRNUYsRUFFUmdHLEVBQWNHLFNBQVNQLEdBRXZCSSxFQUFjSSxjQUFjUixJQVJ4QnpELFlBQVksMkJBeUJwQixNQUFPLENBQ0h0QyxLQUFNLFlBeEdDLFdBS00sT0FGYitGLEVBQVE3RixFQUFFLFFBQVFDLEtBQUssaUJBRUQ0RixFQUFNdkYsZUFBZSxXQUFjdUYsRUFBTXZGLGVBQWUsU0FFMUU4QixZQUFZLDhDQUFnRGtFLEtBQUtDLFVBQVVWLElBRy9FLElBQUlXLEVBQVcsVUFDWFgsRUFBYyxPQUFFdkYsZUFBZSxhQUFldUYsRUFBYyxPQUFZLFdBRXhFVyxFQUFXWCxFQUFjLE9BQVksU0FBRWhCLGVBRzNDbEUsaUJBQWlCOEYsZ0JBQWdCRCxHQUVqQ3hHLEVBQUV5QyxVQUFVaUUsR0FBRyxrQkFBbUIsV0FDOUJSLEVBQVNMLEdBRVRELEdBQWlCLElBcUZqQjlGLElBRUo2RyxrQkFBbUIsU0FBVUMsSUFsRlQsU0FBVUEsR0FFOUIsSUFBSUMsRUFHSixJQUdJQSxFQUFhMUUsT0FBTzJFLFVBQVVGLEdBRWxDLE1BQU9HLEdBR0gsT0FEQTNFLFlBQVksNkNBQW9EMkUsRUFBTUMsS0FBTyxzQkFBd0JELEVBQU1FLFNBTTFHSixFQUFXdkcsZUFBZSxVQUV2QnVGLEdBQVNBLEVBQU12RixlQUFlLFFBRTlCdUcsRUFBaUIsS0FBSWhCLEVBQVksS0FJakNnQixFQUFpQixLQUFJLElBSXpCakIsRUFFQU0sRUFBU1csR0FJVGhCLEVBQVFnQixFQWdEUkYsQ0FBa0JDLElBRXRCTSx3QkFBeUIsU0FBVTdHLEVBQUs4RyxHQUVwQ3JCLEVBQXVCekYsR0FBTzhHLEdBRWxDQyx5QkFBMEIsU0FBVTFCLEdBQ2hDLElBQUssSUFBSTJCLEtBQWUzQixFQUNmQSxFQUFVcEYsZUFBZStHLElBSTlCMUcsaUJBQWlCdUcsd0JBQXdCRyxFQUFhM0IsRUFBVTJCLEtBR3hFQywyQkFBNEIsU0FBVWpILEdBRTlCeUYsRUFBdUJ4RixlQUFlRCxXQUUvQnlGLEVBQXVCekYsSUFHdENrSCw2QkFBOEIsU0FBVXRILEdBQ3BDLE9BQU93RixFQUFpQkssRUFBd0I3RixJQUVwRHVILHVCQUF3QixTQUFVbkgsRUFBSzhHLEdBRW5DcEIsRUFBc0IxRixHQUFPOEcsR0FFakNNLHdCQUF5QixTQUFVL0IsR0FDL0IsSUFBSyxJQUFJMkIsS0FBZTNCLEVBQ2ZBLEVBQVVwRixlQUFlK0csSUFJOUIxRyxpQkFBaUI2Ryx1QkFBdUJILEVBQWEzQixFQUFVMkIsS0FHdkVLLDBCQUEyQixTQUFVckgsR0FFN0IwRixFQUFzQnpGLGVBQWVELFdBRTlCMEYsRUFBc0IxRixJQUdyQ3NILDRCQUE2QixTQUFVMUgsR0FDbkMsT0FBT3dGLEVBQWlCTSxFQUF1QjlGLElBRW5EMkgsU0FBVSxTQUFVQyxHQUVWQSxhQUFpQkMsZUFLbEJELEVBQU14SCxJQUtYMkYsRUFBUTZCLEVBQU14SCxLQUFPd0gsRUFIakJ6RixZQUFZLDREQUxaQSxZQUFZLDJFQVVwQnFFLGdCQUFpQixTQUFVRCxHQUV2QixRQUF1QixJQUFaQSxJQUE0QkEsRUFFbkMsT0FEQXBFLFlBQVksb0NBQ0wsRUFFWCxJQUFLNEQsRUFBUTFGLGVBQWVrRyxHQUd4QixPQURBcEUsWUFBWSxpRUFBbUVvRSxJQUN4RSxFQUdYLElBQUl1QixFQUFnQjlCLEVBVXBCLE9BUkFBLEVBQWdCRCxFQUFRUSxHQUVILE1BQWpCdUIsR0FDQUEsRUFBY0MsU0FBUy9CLEdBRzNCQSxFQUFjZ0MsTUFBTUYsSUFFYixHQUVYRyxnQkFBaUIsV0FFYixPQUFPakMsR0FFWHJGLFFBQVMsV0FFTCxPQUFPaUYsSUE1TkEsR0FrT25Cc0Msa0JBQW9CLFdBR2hCLElBQUlDLEdBQVksRUFDWkMsRUFBNkIsR0FDN0JDLEVBQTRCLENBRzVCQyxPQUFRLFNBQVUxQixHQUNkLElBQUkyQixFQXlDSixPQXhDc0MsR0FBbEMzQixFQUFtQixPQUFVLFFBRTdCMkIsRUFBZ0IsT0FDaEJ4SSxFQUFFLGVBQWV5SSxZQUFZLGNBSTdCRCxFQUZ1QyxHQUFsQzNCLEVBQW1CLE9BQVUsT0FFbEIsVUFLQSxNQUpoQjdHLEVBQUUsZUFBZTBJLFNBQVMsYUFPOUIxSSxFQUFFLGVBQWV5SSxZQUFZLG9CQUFvQkMsU0FBU0YsR0FDMUR4SSxFQUFFLGVBQWUySSxTQUFTLGVBQzFCM0ksRUFBRSxlQUFleUksWUFBWSxlQUU3QnpJLEVBQUUsZUFDRzRJLElBQUksU0FDSmxDLEdBQUcsUUFBUyxTQUFVbUMsR0FDbkJBLEVBQU1DLGlCQUNOLElBQUk5SCxFQUFPaEIsRUFBRWtDLE1BQU1qQyxLQUFLLFFBQ2IsTUFBUmUsR0FBZ0JvSCxJQUVmQSxHQUFZLEVBQ1pwSSxFQUFFLFFBQVErSSxRQUFRLElBQUssY0FBZSxXQUNsQ1gsR0FBWSxJQUVzQixHQUFsQ3ZCLEVBQW1CLE9BQVUsUUFFN0I3RyxFQUFFa0MsTUFBTTZHLFFBQVEsSUFBSyxjQUFlLFdBQ2hDL0ksRUFBRWtDLE1BQU13RyxTQUFTLGlCQUd6QmpJLE9BQU9NLFNBQVNDLEtBQU9BLEtBSTVCNkYsR0FFWG1DLFFBQVMsU0FBVW5DLEdBb0NmLE9BbkNBN0csRUFBRSxZQUNHNEksSUFBSSx5QkFDSmxDLEdBQUcsYUFDQSxTQUFVbUMsR0FFTjdJLEVBQUUsaUJBQ0dpSixLQUFLakosRUFBRWtDLE1BQU1nSCxTQUFTLFlBQVlELFFBQ2xDRSxPQUNBUixXQUNBSSxRQUFRLElBQU0sY0FBZSxXQUMxQi9JLEVBQUVrQyxNQUFNa0gsUUFBUSxTQUtwQ3BKLEVBQUUsYUFDRzRJLElBQUksU0FDSmxDLEdBQUcsUUFBUyxTQUFVbUMsR0FDbkJBLEVBQU1DLGlCQUNOLElBQUlPLEVBQVlySixFQUFFa0MsTUFBTWpDLEtBQUssYUFDekJxSixFQUFjdEosRUFBRSxVQUNoQnVKLEVBQWFELEVBQVlFLFFBQVVILEVBQ25DSSxFQUFjSCxFQUFZSSxTQUFXTCxFQUV6Q0MsRUFBWUssSUFBSSxDQUNaQyxLQUFNUCxFQUNOUSxLQUFNLE1BQ05DLElBQUssTUFDTEMsV0FBWSxJQUFNMUcsS0FBS0UsTUFBTWdHLEVBQWEsR0FBSyxLQUMvQ1MsVUFBVyxJQUFNM0csS0FBS0UsTUFBTWtHLEVBQWMsR0FBSyxTQUkzRHpKLEVBQUUsZUFBZWlLLEtBQUssTUFBTXBELEVBQW1CLE9BQU8sSUFBSSxhQUFlQSxFQUFtQixPQUFhLFVBQUksUUFFdEdBLElBSWYsTUFBTyxDQUNIcUQsYUFBYyxXQUNWdkosaUJBQWlCeUcseUJBQXlCaUIsR0FDMUMxSCxpQkFBaUI4Ryx3QkFBd0JhLElBRTdDNkIsZ0JBQWlCLFdBQ2IsSUFBSyxJQUFJOUMsS0FBZWdCLEVBQ2hCQSxFQUEyQi9ILGVBQWUrRyxJQUMxQzFHLGlCQUFpQjJHLDJCQUEyQkQsR0FHcEQsSUFBSyxJQUFJQSxLQUFlaUIsRUFDaEJBLEVBQTBCaEksZUFBZStHLElBQ3pDMUcsaUJBQWlCK0csMEJBQTBCTCxLQXpHM0MsR0FpSHBCK0MsZ0JBQWtCLFdBRWQsSUFBSUMsRUFBZSxDQUVYQyxjQUFlLFdBT1gsT0FOQXRLLEVBQUUsV0FBVzJKLElBQUksYUFBYyxxSUFFL0IzSixFQUFFLGlCQUFpQjJKLElBQUksbUJBQW1CLHFDQUMxQzNKLEVBQUUsaUJBQWlCMkosSUFBSSxzQkFBc0IsV0FDN0MzSixFQUFFLGlCQUFpQjJKLElBQUksb0JBQXFCLGFBRXJDLElBR1hZLFFBQVMsU0FBVUMsRUFBTUMsR0FDckIsT0FBT0QsR0FBUUMsRUFBT0QsRUFBS0UsT0FBT0QsR0FBUUQsR0FBUUMsR0FFdERFLEtBQU0sU0FBVUgsR0FDWixPQUFPbEUsS0FBS0MsVUFBVWlFLElBSTFCSSxLQUFNLFNBQVVDLEVBQU1DLEVBQU0zSyxFQUFZb0ksRUFBUXdDLEVBQWNDLEdBQzFELElBQUlDLEVBQVcsR0FDWEMsRUFBWSxjQUNHLElBQVJKLEdBQXVCQSxJQUU5QkcsRUFBVyw4REFBZ0VILEVBQU8sU0FDbEZJLEVBQVksZ0JBR1csSUFBaEJILEdBQWdDQSxJQUV2Q0EsRUFBZSxRQUduQixJQUFJSSxFQUFnQixRQUNJLElBQWJILEdBQTRCQSxJQUVuQ0csRUFBZ0IsT0FBU0gsRUFBWSxLQUd6QyxJQUFJSSxFQUFNQyxlQUFlQyxRQUFRSCxFQUFnQixJQUFNTixFQUFLcEosV0FBV2tDLFFBQVEsZUFBZ0IsS0FBTyxJQUFNbUgsR0FFNUcsWUFBcUIsSUFBVnZDLEdBQXlCQSxFQUV6QixzQ0FBd0MyQyxFQUFZLElBQU1FLEVBQU0sS0FBT0QsRUFBZ0IsSUFBTUYsRUFBV0osRUFBTyw0REFBOERFLEVBQWUsSUFBTXhDLEVBQVMsbURBQXFENkMsRUFBTSx5REFBMkRBLEVBQU0seUNBRzNVLDRDQUE4Q0YsRUFBWSxJQUFNRSxFQUFNLGdCQUFrQnhMLFlBQVlNLGFBQWFDLEdBQWMsS0FBT2dMLEVBQWdCLElBQU1GLEVBQVdKLEVBQU8sNERBQThERSxFQUFlLG1EQUFxREssRUFBTSx5REFBMkRBLEVBQU0sMENBR2xZRyxJQUFLLFNBQVVDLEVBQU9DLEdBQ2xCLE9BQU9ELEVBQVNDLEdBR3BCQyxlQUFnQixTQUFVbEwsRUFBT21MLEdBQzdCLEdBQWEsR0FBVkEsRUFDQyxPQUFPdEksS0FBS3VJLE1BQU1KLFFBRXRCLElBQUlLLEVBQWF4SSxLQUFLeUksSUFBSSxHQUFJSCxHQUM5QixPQUFRdEksS0FBS3VJLE1BQU1wTCxFQUFRcUwsR0FBY0EsR0FJN0NELE1BQU8sU0FBU0osR0FDWixPQUFPbkksS0FBS3VJLE1BQU1KLElBRXRCTyxNQUFPLFNBQVNQLEdBQ1osT0FBT25JLEtBQUt1SSxNQUFlLEdBQVRKLEdBQWUsSUFHckNqSSxNQUFPLFNBQVNpSSxHQUNaLE9BQU9uSSxLQUFLRSxNQUFNaUksSUFHdEJsSSxLQUFNLFNBQVNrSSxHQUNYLE9BQU9uSSxLQUFLQyxLQUFLa0ksSUFJckJRLE9BQVEsV0FDSixHQUF3QixHQUFwQjVJLFVBQVVILE9BRVYsTUFBTyxHQUVOLEdBQXdCLEdBQXBCRyxVQUFVSCxPQUVmLE9BQU9HLFVBQVUsR0FFaEIsR0FBdUIsRUFBbkJBLFVBQVVILE9BQ25CLENBQ0lnSixXQUFhLEdBQ2IsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUk5SSxVQUFVSCxPQUFRaUosSUFFbENELFdBQVdFLEtBQUsvSSxVQUFVOEksSUFFOUIsT0FBTzlJLFVBQVUsR0FBR0ssT0FBT3dJLFlBRS9CLE1BQU8sSUFFWEcsYUFBYyxTQUFTQyxHQUVuQixJQUFJQyxFQUFRRCxFQUFFNUssV0FBVzhLLE1BQU0sS0FFL0IsT0FEQUQsRUFBTSxHQUFLQSxFQUFNLEdBQUczSSxRQUFRLHdCQUF5QixLQUM5QzJJLEVBQU1FLEtBQUssTUFHdEJDLHNCQUF1QixTQUFVVCxHQUM3QixPQUFPQSxFQUFPcEgsT0FBTyxHQUFHRyxjQUFnQmlILEVBQU9VLE1BQU0sSUFHekRDLFdBQVksU0FBVW5NLEVBQU9vTSxFQUFVQyxFQUFVQyxFQUFZQyxHQUVyREgsRUFBV0MsRUFFUHJNLEVBQVFvTSxFQUVScE0sRUFBUW9NLEVBRUtDLEVBQVJyTSxJQUVMQSxFQUFRcU0sR0FLQUQsRUFBUnBNLEVBRUFBLEVBQVFvTSxFQUVIcE0sRUFBUXFNLElBRWJyTSxFQUFRcU0sUUFJUyxJQUFkQyxHQUE4QkEsSUFFckNBLEVBQWEsU0FHTSxJQUFaQyxHQUE0QkEsSUFFbkNBLEVBQVcsSUFHZixJQUFJQyxFQUFhM0osS0FBS3VJLE9BQU9wTCxFQUFRb00sSUFBYUMsRUFBV0QsR0FBWSxLQUNyRXhCLEVBQU1DLGVBQWVDLFFBQVFzQixFQUFXLElBQU1DLEdBRWxELE1BQU8sMEJBQTRCekIsRUFBTSxJQUFNMEIsRUFBYSxrRUFBb0VBLEVBQWEsS0FBT0MsRUFBVyx3RUFBMEUzQixFQUFNLGtDQUFvQzRCLEVBQWEsbUJBQXFCRixFQUFhLHNCQUd0VUcsY0FBZSxTQUFTQyxHQUNwQixPQUFZLEdBQVRBLEVBQW1CLE9BQ1YsR0FBVEEsRUFBbUIsVUFDZixPQUVYQyxhQUFjLFNBQVNELEdBQ25CLE9BQVksR0FBVEEsRUFBbUIsbUNBQ1YsR0FBVEEsRUFBbUIsNkNBQ2YsMENBRVhoTixhQUFjLFNBQVVDLEdBQ3BCLElBQUlKLEVBQU9DLEVBQUUsUUFDYkgsZUFBaUJFLEVBQUtFLEtBQUssaUJBQzNCLElBQUlHLEVBQWMsSUFFbEIsSUFBSyxJQUFJQyxLQUFPUixlQUVSQSxlQUFlUyxlQUFlRCxLQUVWLE1BQWhCRCxJQUVBQSxHQUFlLEtBRW5CQSxHQUFlQyxFQUFNLElBQU1SLGVBQWVRLElBSWxELElBQUssSUFBSUEsS0FBT0YsRUFFUkEsRUFBV0csZUFBZUQsS0FFTixNQUFoQkQsSUFFQUEsR0FBZSxLQUVuQkEsR0FBZUMsRUFBTSxJQUFNRixFQUFXRSxJQUc5QyxPQUFPRCxHQUdYZ04saUJBQWtCLFNBQVNDLEVBQVdDLEVBQWVDLEVBQWtCQyxFQUFXQyxHQUM5RSxJQUFLSixFQUVELE1BQU8sZ0ZBR1gsSUFBSUssRUFBYUwsRUFBVWQsTUFBTSxJQUU3QnRELEVBQU8saUVBQ1AwRSxFQUFRLEVBQ1JDLEVBQVcsRUFDZixJQUFLLElBQUluSixLQUFTaUosRUFDZCxHQUFLQSxFQUFXcE4sZUFBZW1FLElBQXVDLGlCQUF0QmlKLEVBQVdqSixHQUEzRCxDQUtBLElBQUl0RSxFQUVBQSxFQUQwQixNQUExQnNOLEVBQVMxSSxjQUNJLENBQUU4SSxjQUFrQkYsRUFBT0csaUJBQXFCRixHQUVoRCxDQUFFRyxjQUFrQkosRUFBT0ssaUJBQXFCSixHQUdqRSxJQUFJckYsRUFBUyxhQUNUb0YsR0FBU0wsR0FBaUJNLEdBQVlMLElBQ3RDaEYsRUFBUyxZQUdiVSxHQUFRLG9CQUFzQlYsRUFBUyw0QkFBOEIzSSxZQUFZTSxhQUFhQyxHQUFjLGlCQUFtQnNFLEVBQVEsS0FBT2lKLEVBQVdqSixHQUFTLFdBRWxLQSxFQUNZK0ksR0FBYSxHQUFLL0ksRUFBUWlKLEVBQVd6SyxRQUU3QzJLLEVBQVcsRUFDWDNFLEdBQVEsbUVBRlIwRSxFQUVrRixVQUVsRkMsSUFNUixPQUZBM0UsR0FBUSxVQUlaZ0YsUUFBUyxTQUFTQyxHQUNEQyxXQUFXQyxhQUFhM0wsU0FBUzRMLGVBQWVILEdBQVUsQ0FDbkVJLGFBQWEsRUFDYkMsV0FBWSxFQUNaQyxnQkFBZ0IsRUFDaEJDLE1BQU8saUJBR2ZDLGFBQWMsU0FBU2xELEdBQ25CLElBQUlKLEVBQU1DLGVBQWVDLFFBQVEsS0FFakMsTUFBTyxnQkFBa0JGLEVBQU0sMERBQTRESSxFQUFTLDhDQUFnREosRUFBTSxrREFBb0RBLEVBQU0sZ0VBRXhOdUQsWUFBYSxTQUFTbkQsRUFBUUcsR0FDMUIsSUFBSVAsRUFBTUMsZUFBZUMsUUFBUUssR0FJakMsWUFIY2lELElBQVhqRCxJQUNDa0QsT0FBUyxHQUVOLGdCQUFrQnpELEVBQU0sMERBQTRESSxFQUFPc0QsUUFBUW5ELEdBQVUsOENBQWdEUCxFQUFNLGtEQUFvREEsRUFBTSxZQUFjTyxFQUFTLHNEQUl2USxNQUFPLENBQ0hvRCxXQUFZLFdBRVJwTSxhQUFhb00sV0FBVzFFLElBRzVCMkUsY0FBZSxXQUVYLElBQUssSUFBSUMsS0FBYTVFLEVBRWRBLEVBQWEvSixlQUFlMk8sSUFFNUJ0TSxhQUFhdU0sYUFBYUQsS0FqUjVCLEdBeVJsQkUsc0JBQXNCaEssYUFBYTJDLGdCQUNuQyxJQUFJc0gsaUJBQW1CLElBQUlELHNCQUUzQixTQUFTQSx3QkFFTGpOLEtBQUs3QixJQUFNLFVBSVg2QixLQUFLN0IsSUFBTTZCLEtBQUs3QixJQUFJd0UsY0FFcEJsRSxpQkFBaUJpSCxTQUFTMUYsTUFHOUJtTixrQkFBa0JsSyxhQUFhMkMsZ0JBQy9CLElBQUl3SCxhQUFlLElBQUlELGtCQUV2QixTQUFTQSxvQkFDTG5OLEtBQUs3QixJQUFNLE1BQ1g2QixLQUFLN0IsSUFBTTZCLEtBQUs3QixJQUFJd0UsY0FDdkIzQyxLQUFLcU4saUJBQW1CLEdBRXJCNU8saUJBQWlCaUgsU0FBUzFGLE1BK0M5QixTQUFTNEYsa0JBNUNUdUgsa0JBQWtCN04sVUFBVTRFLFNBQVcsU0FBU25HLEdBQy9DNkgsZUFBZXRHLFVBQVU0RSxTQUFTMUUsS0FBS1EsS0FBTWpDLEdBQzdDLElBQUk0SCxFQUFRM0YsS0FFWixJQUNDLEdBQTBCLE1BQXZCakMsRUFBVyxLQUFPLElBQVcsQ0FDL0IsSUFBSXVQLEVBQVd2UCxFQUFXLEtBQU8sSUFBWSxTQUM5QixNQUFadVAsR0FBb0JBLEdBQVkzSCxFQUFNMEgsaUJBQ3hDdlAsRUFBRXlQLEtBQUt6UCxFQUFFMFAsS0FBSyxDQUNiL04sSUFBSzZOLEVBQVcsUUFDaEJ2SyxPQUFPLEVBQ1AwSyxTQUFVLFVBRVZDLEtBQUssU0FBU0MsR0FDZEEsR0FBa0IsZ0NBRWxCLElBQ0NsTixhQUFhbU4sWUFBWSxNQUFPRCxHQUNoQ2xOLGFBQWFvTixjQUFjLE9BQzNCL1AsRUFBRSxVQUFVaUosS0FBS3RHLGFBQWFxTixNQUFNLE1BQU8vUCxJQUMzQzRILEVBQU0wSCxpQkFBbUJDLEVBRXpCM0gsRUFBTXhCLGNBQWNwRyxHQUNuQixNQUFNOEcsR0FFUCxZQURBM0UsWUFBWSwwREFBNEQyRSxFQUFNRSxZQUkvRWdKLEtBQU0sV0FDTjdOLFlBQVksK0JBQWlDb04sRUFBVyxlQUdyRDdNLGFBQWF1TixlQUFlLFFBQy9CbFEsRUFBRSxVQUFVaUosS0FBS3RHLGFBQWFxTixNQUFNLE1BQU8vUCxLQUk3QyxNQUFNOEcsR0FFUCxZQURBM0UsWUFBWSw0REFBOEQyRSxFQUFNRSxXQVFsRmEsZUFBZXRHLFVBQVVuQixJQUFNLEtBQy9CeUgsZUFBZXRHLFVBQVUyTyxnQkFBaUIsRUFDMUNySSxlQUFldEcsVUFBVTRPLGlCQUFrQixFQUMzQ3RJLGVBQWV0RyxVQUFVNk8sZ0JBQWlCLEVBRTFDdkksZUFBZXRHLFVBQVU4TyxVQUFZLFdBQ2pDLE9BQU8zUCxpQkFBaUJ1SCxtQkFBcUJoRyxNQUdqRDRGLGVBQWV0RyxVQUFVeUcsTUFBUSxTQUFVRixHQUd2Q0ksa0JBQWtCK0IsZUFDbEJFLGdCQUFnQjJFLGNBR3BCakgsZUFBZXRHLFVBQVV3RyxTQUFXLFNBQVV1SSxHQUcxQ3BJLGtCQUFrQmdDLGtCQUNsQkMsZ0JBQWdCNEUsaUJBR3BCbEgsZUFBZXRHLFVBQVUyRSxlQUFpQixTQUFVbEcsR0FLaEQsT0FGQUEsRUFBT1UsaUJBQWlCNEcsNkJBQTZCdEgsSUFLekQ2SCxlQUFldEcsVUFBVTRFLFNBQVcsU0FBVW5HLEdBRzFDLE1BRVNpQyxLQUFLaU8sZ0JBQW1CbFEsRUFBYSxPQUFFSyxlQUFlLHFCQUF1QkwsRUFBYSxPQUFvQixvQkFFL0dELEVBQUUsYUFBYWlKLEtBQUt0RyxhQUFhcU4sTUFBTSxTQUFVL1AsSUFDakRpQyxLQUFLaU8sZ0JBQWlCLEtBRXJCak8sS0FBS2tPLGlCQUFvQm5RLEVBQWEsT0FBRUssZUFBZSxzQkFBd0JMLEVBQWEsT0FBcUIscUJBRWxIRCxFQUFFLGNBQWNpSixLQUFLdEcsYUFBYXFOLE1BQU0sT0FBUS9QLElBQ2hEaUMsS0FBS2tPLGlCQUFrQixHQUV2QnpOLGFBQWF1TixlQUFlLGdCQUV2QmhPLEtBQUttTyxpQkFHTnJRLEVBQUUsVUFBVXdRLFlBRVp4USxFQUFFLGlCQUNHNEksSUFBSSxTQUNKbEMsR0FBRyxRQUFTLFNBQVVtQyxHQUNuQkEsRUFBTUMsaUJBQ045SSxFQUFFa0MsTUFBTWtILFFBQVEsT0FHeEJsSCxLQUFLbU8sZ0JBQWlCLEdBRzFCclEsRUFBRSxpQkFBaUJpSixLQUFLdEcsYUFBYXFOLE1BQU0sYUFBYy9QLElBRXJEQSxFQUFhLE9BQUVLLGVBQWUsWUFBY0wsRUFBYSxPQUFXLFNBRXBFRCxFQUFFLGNBQWMwSSxTQUFTLFVBQ3pCMUksRUFBRSxpQkFBaUJ5SSxZQUFZLFlBSS9CekksRUFBRSxpQkFBaUIwSSxTQUFTLFVBQzVCMUksRUFBRSxjQUFjeUksWUFBWSxZQUdoQzlGLGFBQWF1TixlQUFlLGNBRTVCbFEsRUFBRSxnQkFBZ0JpSixLQUFLdEcsYUFBYXFOLE1BQU0sWUFBYS9QLElBRXZEMEMsYUFBYXVOLGVBQWUsY0FFNUJsUSxFQUFFLGdCQUFnQmlKLEtBQUt0RyxhQUFhcU4sTUFBTSxZQUFhL1AsSUFHL0QsTUFBTThHLEdBR0YsWUFEQTNFLFlBQVksb0RBQXNEMkUsRUFBTUUsV0FLaEZhLGVBQWV0RyxVQUFVNkUsY0FBZ0IsU0FBVXBHLEdBRy9DVSxpQkFBaUJnSCw0QkFBNEIxSCxJQUdqRDZILGVBQWV0RyxVQUFVaVAsVUFBWSxTQUFVNUYsR0FHM0NySSxNQUFNcUksSUFJVixJQUFJbEksYUFBZSxXQUVmLElBQUkrTixFQUFnQixHQUVoQkMsRUFBYSxHQUNiQyxFQUFxQixHQUVyQkMsRUFBVyxHQWNYQyxFQUFtQixXQUluQixHQUZvQjFQLE9BQU84QyxLQUFLd00sSUFTaEMsSUFBSyxJQUFJclEsS0FBT3FRLEVBRVosR0FBS0EsRUFBY3BRLGVBQWVELEdBNkJsQyxZQXhCQUwsRUFBRXlQLEtBQUt6UCxFQUFFMFAsS0FBSyxDQUNOL04sSUFBSytPLEVBQWNyUSxHQUNuQjRFLE9BQU8sRUFDUDBLLFNBQVUsVUFFYkMsS0FBTSxTQUFTQyxHQUVaQSxHQUFrQixnQ0FFbEIsSUFDSWxOLGFBQWFtTixZQUFZelAsRUFBS3dQLEdBRWxDLE1BQU05SSxHQUVGLFlBREEzRSxZQUFZLGtEQUFvRDJFLEVBQU1FLGdCQUluRXlKLEVBQWNyUSxHQUNyQnlRLE1BRUhiLEtBQU0sV0FDSDdOLFlBQVksMkJBQTZCL0IsRUFBTSxJQUFNcVEsRUFBY3JRLEdBQU8sb0JBakNsRkwsRUFBRXlDLFVBQVVzTyxRQUFRLG9CQW1ENUIsTUFBTyxDQUNIalIsS0FBTSxXQWxFZSxPQUZyQjRRLEVBQWdCMVEsRUFBRSxRQUFRQyxLQUFLLGtCQUkzQm1DLFlBQVksZ0RBR2hCME8sS0FnRUFoQixZQUFhLFNBQVV6UCxFQUFLMlEsR0FDeEJMLEVBQVd0USxHQUFPMlEsR0FFdEJkLGVBQWdCLFNBQVU3UCxHQUN0QixPQUFPc1EsRUFBV3JRLGVBQWVELElBRTNDMFAsY0FBZSxTQUFVMVAsR0FDeEJ1USxFQUFtQnZRLEdBQU8sTUFFckIyUCxNQUFPLFNBQVVpQixFQUFhaFIsR0FDMUIsSUFBSzJRLEVBQW1CdFEsZUFBZTJRLEtBQWlCTCxFQUFtQkssR0FBYyxDQUNyRixJQUFLTixFQUFXclEsZUFBZTJRLEdBRTNCLE9BREE3TyxZQUFZLG9CQUFzQjZPLEVBQWMsMkNBQ3pDLDRDQTVCQSxXQUNuQixJQUFLLElBQUk1USxLQUFPc1EsRUFDWixJQUNJQyxFQUFtQnZRLEdBQU9nQyxJQUFJbU4sU0FBU21CLEVBQVd0USxHQUFNLEtBQU1zUSxHQUVsRSxNQUFPNUosR0FDSDNFLFlBQVkyRSxFQUFNRSxVQXdCbEJpSyxHQUVKLE1BQThDLG1CQUFuQ04sRUFBbUJLLElBQzFCN08sWUFBWXdPLEVBQW1CSyxJQUMvQjdPLFlBQVksb0JBQXNCNk8sRUFBYyx3QkFDekMsK0NBRUpMLEVBQW1CSyxHQUFhdlAsS0FBS1EsS0FBTWpDLEVBQVcsS0FBR0EsRUFBYSxPQUFHNFEsSUFFcEZNLFVBQVcsU0FBVUMsRUFBWUMsR0FDeEJsUCxPQUFPd0QsV0FBVzBMLEdBS3ZCUixFQUFTTyxHQUFjQyxFQUpuQmpQLFlBQVksd0NBQTBDZ1AsRUFBYSw4QkFNM0VyQyxXQUFZLFNBQVV1QyxHQUNsQixJQUFLLElBQUlGLEtBQWNFLEVBQ2RBLEVBQVFoUixlQUFlOFEsSUFJNUJ6TyxhQUFhd08sVUFBVUMsRUFBWUUsRUFBUUYsS0FHbkRsQyxhQUFjLFNBQVVrQyxHQUNoQkUsUUFBUWhSLGVBQWU4USxXQUVoQlAsRUFBU08sS0E5SGIsR0FvSW5CL0YsZUFBaUIsV0FDaEIsSUFBSWtHLEVBQVUsR0FDVkMsRUFBYSxHQUNiQyxFQUFZLEVBRWhCOVEsaUJBQWlCdUcsd0JBQXdCLGtCQUFtQixTQUFTTCxHQUVwRSxPQURBNEssRUFBWSxFQUNMNUssSUFjYSxTQUFqQjZLLEVBQTBCQyxFQUFJQyxFQUFVQyxHQUMzQyxJQUNJQyxFQURBN00sRUFBUXNNLEVBQVFJLFFBR1AvQyxJQUFWaUQsSUFDRkEsR0FBUSxHQUVULElBQUlFLEVBQVUvUixFQUFFLElBQU0yUixHQUN0QixHQUFxQixHQUFsQkksRUFBUTlPLE9BQ1YsT0FBTzJPLEVBS1IsR0FEQUcsRUFBVUEsRUFBUSxHQUNmOU0sR0FDQ0EsRUFBTStNLFNBQVdELEVBQVFDLFNBQ3pCL00sRUFBTWdOLFVBQVlGLEVBQVFFLFVBQzFCaE4sRUFBTUssUUFBVXlNLEVBQVFHLFdBQVdGLFNBQ25DL00sRUFBTWlFLFVBQVk2SSxFQUFRN0ksU0FBU2pHLFFBS3RDLEdBRkE2TyxFQUFXTixFQUFXRyxHQUVuQkUsRUFBTyxDQUNULElBQUlNLEVBQWUsR0FDbkIsSUFBSUMsS0FBS04sRUFDUkssRUFBYUMsR0FBS04sRUFBU00sR0FDNUIsSUFBSUEsS0FBS1IsRUFDUk8sRUFBYUMsR0FBS1IsRUFBU1EsR0FDNUJSLEVBQVdPLFFBSVpMLEVBQVdGLEVBRVhMLEVBQVFJLEdBQU0sQ0FDYkssUUFBU0QsRUFBUUMsUUFDakJDLFNBQVVGLEVBQVFFLFNBQ2xCM00sT0FBUXlNLEVBQVFHLFdBQVdGLFFBQzNCOUksU0FBVTZJLEVBQVE3SSxTQUFTakcsUUFNN0IsT0FEQXVPLEVBQVdHLEdBQU1DLEVBQ1ZFLEVBR2EsU0FBakJPLEVBQTBCVixFQUFJVyxHQUNqQyxJQUFJUCxFQUFVL1IsRUFBRSxJQUFNMlIsR0FFdEIsT0FBT1csRUFBU3RTLEVBQUUrUixHQUFTN0ksU0FBU29KLEdBQVV0UyxFQUFFK1IsR0FJM0IsU0FBbEJRLEVBQTJCWixFQUFJVyxFQUFRUixFQUFVRixFQUFVWSxHQUM5RCxJQUFJQyxFQUFTSixFQUFlVixFQUFJVyxRQUVwQjFELElBQVQ0RCxJQUNGQSxFQUFPLE1BR1JDLEVBQ0U5SSxJQUFJbUksR0FDSlksUUFBUWQsRUFBVSxDQUNsQmUsU0FBVUgsRUFDVkksT0FBTyxJQUlULElBQUlDLEVBQVdmLEVBQVMsV0FDcEJnQixFQUFXbEIsRUFBUyxXQUN4QixHQUFHaUIsR0FBWUMsSUFDZEwsRUFBTy9KLFNBQVNtSyxHQUNiQSxHQUFZQyxHQUFVLENBRXBCRCxFQUFXQSxFQUFTdEcsTUFBTSxLQUMxQnVHLEVBQVdBLEVBQVN2RyxNQUFNLEtBRDlCLElBR0l3RyxFQUFtQkYsRUFBU1AsT0FBTyxTQUFTakcsR0FBSyxPQUErQixHQUF4QnlHLEVBQVNoUSxRQUFRdUosS0FDekUyRyxFQUFtQkYsRUFBU1IsT0FBTyxTQUFTakcsR0FBSyxPQUErQixHQUF4QndHLEVBQVMvUCxRQUFRdUosS0FFN0V3RyxFQUFXRSxFQUFpQnZHLEtBQUssS0FDakNzRyxFQUFXRSxFQUFpQnhHLEtBQUssS0FFakNpRyxFQUFPUSxZQUFZSixFQUFVQyxFQUFVLENBQ3RDSCxTQUFVSCxFQUNWSSxPQUFPLEtBaUVYLE1BQU8sQ0FDTnRILFFBbktjLFNBQVM0SCxHQUN2QixNQUFlLG1CQUFaQSxFQUNLLHdCQUVRdEUsSUFBYnNFLElBQ0ZBLEVBQVcsSUFDTCxlQUFrQnpCLElBQWUsSUFBTXlCLEVBQVN6UixhQThKdkQwUixjQUFlekIsRUFDZjBCLGVBQWdCYixFQUNoQmMsaUJBL0R1QixTQUFTMUIsRUFBSVcsRUFBUTNHLEVBQVEySCxFQUFVQyxFQUFVZixHQUN4RSxJQUFJQyxFQUFTSixFQUFlVixFQUFJVyxRQUVwQjFELElBQVQ0RCxJQUNGQSxFQUFPLE9BRU0sR0FBWDdHLEVBQ0Y4RyxFQUFPNUgsS0FBS3lJLEVBQVM3UixZQUVyQmdSLEVBQU81SCxLQUFLeUksRUFBU3hFLFFBQVFuRCxJQUUzQjJILEdBQVlDLEdBQ2RkLEVBQU9DLFFBQVEsQ0FBQ3hHLEVBQUcsR0FBSSxDQUN0QnlHLFNBQVVILEVBQ1ZJLE9BQU8sRUFDUFksS0FBTSxTQUFTQyxFQUFLQyxHQUVsQkEsRUFBR0MsS0FBS0MsYUFESyxHQUFYakksR0FDcUIySCxHQUFZLEVBQUlHLEdBQU9GLEVBQVdFLEdBQUtoUyxZQUV2QzZSLEdBQVksRUFBSUcsR0FBT0YsRUFBV0UsR0FBSzNFLFFBQVFuRCxPQTZDMUVrSSxhQXZDbUIsU0FBU2xDLEVBQUlXLEVBQVFSLEVBQVVGLEVBQVVZLEdBQzVELElBQUlDLEVBQVNKLEVBQWVWLEVBQUlXLFFBRXBCMUQsSUFBVDRELElBQ0ZBLEVBQU8sS0FFTFYsRUFBUyxZQUNYVyxFQUFPL0osU0FBUyxTQUVqQitKLEVBQU9xQixNQUNOLFdBQ0NyQixFQUFPc0IsS0FBSyxFQUFHLEdBQUdyTCxTQUFTLFFBQVMsQ0FDbkNpSyxTQUFVSCxFQUNWSSxPQUFPLElBRVJsQixFQUFlQyxFQUFJLENBQUNxQyxXQUFXLElBQU8sSUFFdkMsV0FDQ3ZCLEVBQU9zQixLQUFLLEVBQUcsR0FBR3RMLFlBQVksUUFBUyxDQUN0Q2tLLFNBQVVILEVBQ1ZJLE9BQU8sSUFFUmxCLEVBQWVDLEVBQUksQ0FBQ3FDLFdBQVcsSUFBUSxNQWtCekNDLGtCQVp3QixTQUFTdEMsRUFBSVcsRUFBUXpLLEVBQU8ySyxHQUNwRCxJQUFJMEIsRUFBTXhDLEVBQWVDLEVBQUk5SixHQUU3QixPQURBMEssRUFBZ0JaLEVBQUlXLEVBQVE0QixFQUFLck0sRUFBTzJLLEdBQ2pDMEIsSUExS1EsR0F1TGpCLElBQUl0UixXQUFhLFdBTUEsU0FBVHVSLEVBQW1COUgsRUFBRytILEdBQ3RCeFUsWUFBWVcsT0FBTyxNQUFPOEwsRUFBSSxJQUFNK0gsR0FFMUIsU0FBVkMsRUFBb0JDLEVBQUdDLEdBQ3hCM1UsWUFBWVcsT0FBTyxPQUFRK1QsRUFBSSxJQUFNQyxHQUd2QixTQUFiQyxJQUVBLElBQUlDLEVBQVFoVSxPQUFPaVUsV0FDZkMsRUFBUWxVLE9BQU9tVSxVQUVuQlQsRUFBTyxFQUFHLEdBRVZVLEVBQVVwVSxPQUFPaVUsV0FDakJJLEVBQVVyVSxPQUFPbVUsVUFFakIsSUFBSUcsRUFBV04sRUFBUUksRUFDbkJHLEVBQVdMLEVBQVFHLEVBSXZCWCxFQUhBWSxFQUFXQSxFQUFXRixFQUFVLEVBQUlFLEVBQ3BDQyxFQUFXQSxFQUFXRixFQUFVLEVBQUlFLEdBTXBDLElBQUl0TCxFQUFTMUosRUFBRVMsUUFBUWlKLFNBQ25CRixFQUFReEosRUFBRVMsUUFBUStJLFFBQ25CeEosRUFBRSxRQUFRMEosVUFBYTFKLEVBQUVTLFFBQVFpSixTQUFXLEtBQzNDRixHQUFTLElBRVZ4SixFQUFFeUMsVUFBVStHLFFBQVV4SixFQUFFUyxRQUFRK0ksVUFDL0JFLEdBQVUsSUFFZCxJQUFJdUwsRUFBVzVSLEtBQUs2UixJQXJDVCxJQXFDdUIxTCxHQUM5QjJMLEVBQVk5UixLQUFLNlIsSUFyQ1QsSUFxQ3dCeEwsR0FDcEMySyxFQUFRWSxFQUFVRSxHQXhDdEIsSUFBSU4sRUFBU0MsRUF5SFRNLEVBQVVDLEVBQU9DLEVBeUJqQkMsRUFBVUMsRUFuRlZDLEVBQWMsV0FDZDdWLFlBQVlXLE9BQU8sV0FBWSxHQUMvQlgsWUFBWVcsT0FBTyxhQUFjLEdBQ2pDWCxZQUFZVyxPQUFPLG9CQUFxQixXQUN4Q1AsRUFBRSxVQUFVbUosT0FDWm5KLEVBQUUsaUJBQWlCMkosSUFBSSxRQUFTLFFBQ2hDM0osRUFBRSxlQUFlMkosSUFBSSxPQUFRLFFBQzdCM0osRUFBRSxnQkFBZ0IySixJQUFJLE9BQVEsU0FHOUIrTCxFQUFnQixXQU9oQjFWLEVBQUUsVUFBVTBHLEdBQUcsUUFBUyxTQUFVbUMsR0FMdkJqSixZQUFZbUMsVUFRdkIvQixFQUFFLGFBQWEwRyxHQUFHLFFBQVMsU0FBVW1DLEdBTDFCakosWUFBWVcsT0FBTyxlQUFnQixXQVU5Q29WLEVBQXNCLFdBRXRCM1YsRUFBRSxRQUFRMEcsR0FBRyxZQUFhLGtCQUFtQixTQUFVa1AsR0FDbkRDLEVBQUtELEtBR1Q1VixFQUFFLFFBQVEwRyxHQUFHLFlBQWEsa0JBQW1CLFdBQ3pDME8sR0FBVyxFQUNQcFYsRUFBRWtDLE1BQU0sR0FBRzRULFlBQWM5VixFQUFFa0MsTUFBTSxHQUFHNFQsZUFHNUM5VixFQUFFLFFBQVEwRyxHQUFHLFVBQVcsa0JBQW1CLFdBQ3ZDME8sR0FBVyxFQUNQcFYsRUFBRWtDLE1BQU0sR0FBRzZULGdCQUFrQi9WLEVBQUVrQyxNQUFNLEdBQUc2VCxtQkFJaEQvVixFQUFFLFFBQVEwRyxHQUFHLFlBQWEsaUJBQWtCLFNBQVVrUCxHQUNsREksRUFBT3RVLEtBQUtRLEtBQU0wVCxLQUd0QjVWLEVBQUUsUUFBUTBHLEdBQUcsWUFBYSxpQkFBa0IsV0FDeEM2TyxHQUFXLEVBQ1ByVCxLQUFLNFQsWUFBYzVULEtBQUs0VCxlQUdoQzlWLEVBQUUsUUFBUTBHLEdBQUcsVUFBVyxpQkFBa0IsV0FDdEM2TyxHQUFXLEVBQ1ByVCxLQUFLNlQsZ0JBQWtCN1QsS0FBSzZULG9CQU1wQ0YsRUFBTyxTQUFVRCxHQUVqQixHQURBQSxFQUFLQSxHQUFNblYsT0FBT29JLE1BQ2R3TSxJQUFVTyxFQUFHSyxTQUFXWCxJQUFVTSxFQUFHTSxRQUF6QyxDQVNBLFFBTGN0SCxJQUFWeUcsSUFDQUEsRUFBUU8sRUFBR0ssUUFDWFgsRUFBUU0sRUFBR08sU0FHWGYsRUFBVSxDQUNWLElBQUlnQixFQUFNUixFQUFHSyxRQUFVWixFQUNuQmdCLEVBQU1ULEVBQUdNLFFBQVVaLEVBQ3ZCYyxHQUFNM1YsT0FBT2lVLFdBQWFHLEVBQzFCd0IsR0FBTTVWLE9BQU9tVSxVQUFZRSxFQUV6QlgsRUFBT2lDLEVBQUlDLEdBR2ZoQixFQUFRTyxFQUFHSyxRQUNYWCxFQUFRTSxFQUFHTSxVQUlYRixFQUFTLFNBQVVKLEdBQ25CLElBQUlKLEVBQUosQ0FZQSxHQVJBQSxHQUFnQixFQUNoQkksRUFBS0EsR0FBTW5WLE9BQU9vSSxXQUVKK0YsSUFBVnlHLElBQ0FBLEVBQVFPLEVBQUdLLFFBQVVwQixFQUNyQlMsRUFBUU0sRUFBR00sUUFBVXBCLEdBR3JCUyxFQUFVLENBQ1YsSUFBSS9MLEVBQVF4SixFQUFFUyxRQUFRK0ksUUFDbEJFLEVBQVMxSixFQUFFUyxRQUFRaUosU0FFcEIxSixFQUFFLFFBQVEwSixVQUFhMUosRUFBRVMsUUFBUWlKLFNBQVcsS0FDM0NGLEdBQVMsSUFHVnhKLEVBQUV5QyxVQUFVK0csUUFBVXhKLEVBQUVTLFFBQVErSSxVQUMvQkUsR0FBVSxJQUdkLElBQUk0TSxFQUFLblQsT0FBT25ELEVBQUVrQyxNQUFNK0gsS0FBSyxPQUN6QnNNLEVBQUtwVCxPQUFPbkQsRUFBRWtDLE1BQU0rSCxLQUFLLE9BRXpCbU0sRUFBT1IsRUFBR0ssUUFBUXBCLEVBQVdRLEVBQzdCZ0IsRUFBT1QsRUFBR00sUUFBUXBCLEVBQVdRLEVBRTdCa0IsRUFBTy9WLE9BQU9pVSxXQUFhRyxFQUMzQjRCLEVBQU9oVyxPQUFPbVUsVUFBWUUsRUFFMUI0QixFQUFPbE4sRUFBUzRNLEVBQUtFLEdBQ2YsR0FBUEEsSUFDQ0UsR0FBUUosR0FFWixJQUFJTyxFQUFPak4sRUFBVTJNLEVBQUtFLEdBQ2hCLEdBQVBBLElBQ0NFLEdBQVFKLEdBR1pLLEVBQU9yVCxLQUFLNlIsSUE3TEwsSUE2TG1Cd0IsR0FDMUJDLEVBQU90VCxLQUFLNlIsSUE3TEosSUE2TG1CeUIsR0FDM0J4QyxFQUFPcUMsRUFBTUMsR0FDYnBDLEVBQVFxQyxFQUFNQyxHQUdsQnRCLEVBQVFPLEVBQUdLLFFBQVVwQixFQUNyQlMsRUFBUU0sRUFBR00sUUFBVXBCLEVBRXJCVSxHQUFnQixJQUlwQixNQUFPLENBQ0gxVixLQUFNLFdBQ0ZFLEVBQUV5QyxVQUFVaUUsR0FBRyxrQkFBbUIsV0E3SnRDOE4sSUFFSTdULGlCQUFpQkMsVUFBVUMsT0FBTytWLEtBQUtDLFFBSTNDcEIsSUFHQWpCLElBRUFrQixJQUNBQyxTQTlEUyIsImZpbGUiOiJuYW5vLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gTmFub1V0aWxpdHkgaXMgdGhlIHBsYWNlIHRvIHN0b3JlIHV0aWxpdHkgZnVuY3Rpb25zXG52YXIgTmFub1V0aWxpdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF91cmxQYXJhbWV0ZXJzID0ge307IC8vIFRoaXMgaXMgcG9wdWxhdGVkIHdpdGggdGhlIGJhc2UgdXJsIHBhcmFtZXRlcnMgKHVzZWQgYnkgYWxsIGxpbmtzKSwgd2hpY2ggaXMgcHJvYmFieSBqdXN0IHRoZSBcInNyY1wiIHBhcmFtZXRlclxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGJvZHkgPSAkKCdib2R5Jyk7IC8vIFdlIHN0b3JlIGRhdGEgaW4gdGhlIGJvZHkgdGFnLCBpdCdzIGFzIGdvb2QgYSBwbGFjZSBhcyBhbnlcbiAgICAgICAgICAgIF91cmxQYXJhbWV0ZXJzID0gYm9keS5kYXRhKCd1cmxQYXJhbWV0ZXJzJyk7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIGdlbmVyYXRlIGEgQnlvbmQgaHJlZiwgY29tYmluZXMgX3VybFBhcmFtZXRlcnMgd2l0aCBwYXJhbWV0ZXJzXG4gICAgICAgIGdlbmVyYXRlSHJlZjogZnVuY3Rpb24gKHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHZhciBxdWVyeVN0cmluZyA9ICc/JztcblxuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIF91cmxQYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKF91cmxQYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nICE9PSAnPycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nICs9ICc7JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBxdWVyeVN0cmluZyArPSBrZXkgKyAnPScgKyBfdXJsUGFyYW1ldGVyc1trZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHBhcmFtZXRlcnMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocXVlcnlTdHJpbmcgIT09ICc/Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlTdHJpbmcgKz0gJzsnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nICs9IGtleSArICc9JyArIHBhcmFtZXRlcnNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcXVlcnlTdHJpbmc7XG4gICAgICAgIH0sXG4gICAgICAgIHdpbnNldDogZnVuY3Rpb24gKGtleSwgdmFsdWUsIHdpbmRvdykge1xuICAgICAgICAgICAgdmFyIG9iaiwgcGFyYW1zLCB3aW5zZXRSZWY7XG4gICAgICAgICAgICBpZiAod2luZG93ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cgPSBOYW5vU3RhdGVNYW5hZ2VyLmdldERhdGEoKS5jb25maWcud2luZG93LnJlZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmFtcyA9IChcbiAgICAgICAgICAgICAgICBvYmogPSB7fSxcbiAgICAgICAgICAgICAgICBvYmpbd2luZG93ICsgXCIuXCIgKyBrZXldID0gdmFsdWUsXG4gICAgICAgICAgICAgICAgb2JqXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIGxvY2F0aW9uLmhyZWYgPSBOYW5vVXRpbGl0eS5ocmVmKFwid2luc2V0XCIsIHBhcmFtcyk7XG4gICAgICAgIH0sXG4gICAgICAgIGV4dGVuZDogZnVuY3Rpb24oZmlyc3QsIHNlY29uZCkge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoc2Vjb25kKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgICAgIHZhciBzZWNvbmRWYWw7XG4gICAgICAgICAgICAgICAgc2Vjb25kVmFsID0gc2Vjb25kW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKHNlY29uZFZhbCAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc2Vjb25kVmFsKSA9PT0gXCJbb2JqZWN0IE9iamVjdF1cIikge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdFtrZXldID0gZmlyc3Rba2V5XSB8fCB7fTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5hbm9VdGlsaXR5LmV4dGVuZChmaXJzdFtrZXldLCBzZWNvbmRWYWwpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmaXJzdFtrZXldID0gc2Vjb25kVmFsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0O1xuICAgICAgICB9LFxuICAgICAgICBocmVmOiBmdW5jdGlvbih1cmwsIHBhcmFtcykge1xuICAgICAgICAgICAgaWYgKHVybCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdXJsID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJhbXMgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHBhcmFtcyA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXJsID0gbmV3IFVybChcImJ5b25kOi8vXCIgKyB1cmwpO1xuICAgICAgICAgICAgTmFub1V0aWxpdHkuZXh0ZW5kKHVybC5xdWVyeSwgcGFyYW1zKTtcbiAgICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgIH0sXG4gICAgICAgIGNsb3NlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBwYXJhbXM7XG4gICAgICAgICAgICBwYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJuYW5vY2xvc2UgXCIgKyBfdXJsUGFyYW1ldGVycy5zcmNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLndpbnNldChcImlzLXZpc2libGVcIiwgXCJmYWxzZVwiKTtcbiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbi5ocmVmID0gTmFub1V0aWxpdHkuaHJlZihcIndpbnNldFwiLCBwYXJhbXMpO1xuICAgICAgICB9XG4gICAgfVxufSAoKTtcblxuaWYgKHR5cGVvZiBqUXVlcnkgPT0gJ3VuZGVmaW5lZCcpIHsgIFxuICAgIHJlcG9ydEVycm9yKCdFUlJPUjogSmF2YXNjcmlwdCBsaWJyYXJ5IGZhaWxlZCB0byBsb2FkIScpO1xufVxuaWYgKHR5cGVvZiBkb1QgPT0gJ3VuZGVmaW5lZCcpIHsgIFxuICAgIHJlcG9ydEVycm9yKCdFUlJPUjogVGVtcGxhdGUgZW5naW5lIGZhaWxlZCB0byBsb2FkIScpO1xufVxuXG52YXIgcmVwb3J0RXJyb3IgPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgd2luZG93LmxvY2F0aW9uID0gXCJieW9uZDovLz9uYW5vX2Vycj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChzdHIpO1xuICAgIGFsZXJ0KHN0cik7XG59XG5cbi8vIEFsbCBzY3JpcHRzIGFyZSBpbml0aWFsaXNlZCBoZXJlLCB0aGlzIGFsbG93cyBjb250cm9sIG9mIGluaXQgb3JkZXJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICBOYW5vVXRpbGl0eS5pbml0KCk7XG4gICAgTmFub1N0YXRlTWFuYWdlci5pbml0KCk7XG4gICAgTmFub1RlbXBsYXRlLmluaXQoKTtcbiAgICBOYW5vV2luZG93LmluaXQoKTtcbn0pO1xuXG5pZiAoIUFycmF5LnByb3RvdHlwZS5pbmRleE9mKVxue1xuICAgIEFycmF5LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24oZWx0IC8qLCBmcm9tKi8pXG4gICAge1xuICAgICAgICB2YXIgbGVuID0gdGhpcy5sZW5ndGg7XG5cbiAgICAgICAgdmFyIGZyb20gPSBOdW1iZXIoYXJndW1lbnRzWzFdKSB8fCAwO1xuICAgICAgICBmcm9tID0gKGZyb20gPCAwKVxuICAgICAgICAgICAgPyBNYXRoLmNlaWwoZnJvbSlcbiAgICAgICAgICAgIDogTWF0aC5mbG9vcihmcm9tKTtcbiAgICAgICAgaWYgKGZyb20gPCAwKVxuICAgICAgICAgICAgZnJvbSArPSBsZW47XG5cbiAgICAgICAgZm9yICg7IGZyb20gPCBsZW47IGZyb20rKylcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKGZyb20gaW4gdGhpcyAmJlxuICAgICAgICAgICAgICAgIHRoaXNbZnJvbV0gPT09IGVsdClcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfTtcbn07XG5cbmlmICghU3RyaW5nLnByb3RvdHlwZS5mb3JtYXQpXG57XG4gICAgU3RyaW5nLnByb3RvdHlwZS5mb3JtYXQgPSBmdW5jdGlvbiAoYXJncykge1xuICAgICAgICB2YXIgc3RyID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKFN0cmluZy5wcm90b3R5cGUuZm9ybWF0LnJlZ2V4LCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICB2YXIgaW50VmFsID0gcGFyc2VJbnQoaXRlbS5zdWJzdHJpbmcoMSwgaXRlbS5sZW5ndGggLSAxKSk7XG4gICAgICAgICAgICB2YXIgcmVwbGFjZTtcbiAgICAgICAgICAgIGlmIChpbnRWYWwgPj0gMCkge1xuICAgICAgICAgICAgICAgIHJlcGxhY2UgPSBhcmdzW2ludFZhbF07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGludFZhbCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXBsYWNlID0gXCJ7XCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGludFZhbCA9PT0gLTIpIHtcbiAgICAgICAgICAgICAgICByZXBsYWNlID0gXCJ9XCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcGxhY2UgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2U7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU3RyaW5nLnByb3RvdHlwZS5mb3JtYXQucmVnZXggPSBuZXcgUmVnRXhwKFwiey0/WzAtOV0rfVwiLCBcImdcIik7XG59O1xuXG5PYmplY3Quc2l6ZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBzaXplID0gMCwga2V5O1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSBzaXplKys7XG4gICAgfVxuICAgIHJldHVybiBzaXplO1xufTtcblxuaWYoIXdpbmRvdy5jb25zb2xlKSB7XG4gICAgd2luZG93LmNvbnNvbGUgPSB7XG4gICAgICAgIGxvZyA6IGZ1bmN0aW9uKHN0cikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbn07XG5cblN0cmluZy5wcm90b3R5cGUudG9UaXRsZUNhc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNtYWxsV29yZHMgPSAvXihhfGFufGFuZHxhc3xhdHxidXR8Ynl8ZW58Zm9yfGlmfGlufG9mfG9ufG9yfHRoZXx0b3x2cz9cXC4/fHZpYSkkL2k7XG5cbiAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC8oW15cXFdfXStbXlxccy1dKikgKi9nLCBmdW5jdGlvbiAobWF0Y2gsIHAxLCBpbmRleCwgdGl0bGUpIHtcbiAgICAgICAgaWYgKGluZGV4ID4gMCAmJiBpbmRleCArIHAxLmxlbmd0aCAhPT0gdGl0bGUubGVuZ3RoICYmXG4gICAgICAgICAgICBwMS5zZWFyY2goc21hbGxXb3JkcykgPiAtMSAmJiB0aXRsZS5jaGFyQXQoaW5kZXggLSAyKSAhPT0gXCI6XCIgJiZcbiAgICAgICAgICAgIHRpdGxlLmNoYXJBdChpbmRleCAtIDEpLnNlYXJjaCgvW15cXHMtXS8pIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocDEuc3Vic3RyKDEpLnNlYXJjaCgvW0EtWl18XFwuLi8pID4gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBtYXRjaDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtYXRjaC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG1hdGNoLnN1YnN0cigxKTtcbiAgICB9KTtcbn07XG5cbiQuYWpheFNldHVwKHtcbiAgICBjYWNoZTogZmFsc2Vcbn0pO1xuXG5GdW5jdGlvbi5wcm90b3R5cGUuaW5oZXJpdHNGcm9tID0gZnVuY3Rpb24gKHBhcmVudENsYXNzT3JPYmplY3QpIHtcbiAgICB0aGlzLnByb3RvdHlwZSA9IG5ldyBwYXJlbnRDbGFzc09yT2JqZWN0O1xuICAgIHRoaXMucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gdGhpcztcbiAgICB0aGlzLnByb3RvdHlwZS5wYXJlbnQgPSBwYXJlbnRDbGFzc09yT2JqZWN0LnByb3RvdHlwZTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5cbmlmICghU3RyaW5nLnByb3RvdHlwZS50cmltKSB7XG4gICAgU3RyaW5nLnByb3RvdHlwZS50cmltID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG4gICAgfTtcbn1cblxuLy8gUmVwbGljYXRlIHRoZSBja2V5IHByb2MgZnJvbSBCWU9ORFxuaWYgKCFTdHJpbmcucHJvdG90eXBlLmNrZXkpIHtcbiAgICBTdHJpbmcucHJvdG90eXBlLmNrZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL1xcVy9nLCAnJykudG9Mb3dlckNhc2UoKTtcbiAgICB9O1xufVxuLy8gTmFub1N0YXRlTWFuYWdlciBoYW5kbGVzIGRhdGEgZnJvbSB0aGUgc2VydmVyIGFuZCB1c2VzIGl0IHRvIHJlbmRlciB0ZW1wbGF0ZXNcbk5hbm9TdGF0ZU1hbmFnZXIgPSBmdW5jdGlvbiAoKSBcbntcbiAgICAvLyBfaXNJbml0aWFsaXNlZCBpcyBzZXQgdG8gdHJ1ZSB3aGVuIGFsbCBvZiB0aGlzIHVpJ3MgdGVtcGxhdGVzIGhhdmUgYmVlbiBwcm9jZXNzZWQvcmVuZGVyZWRcbiAgICB2YXIgX2lzSW5pdGlhbGlzZWQgPSBmYWxzZTtcbiAgICAvLyB0aGUgZGF0YSBmb3IgdGhpcyB1aVxuICAgIHZhciBfZGF0YSA9IG51bGw7XG5cbiAgICAvLyB0aGlzIGlzIGFuIGFycmF5IG9mIGNhbGxiYWNrcyB3aGljaCBhcmUgY2FsbGVkIHdoZW4gbmV3IGRhdGEgYXJyaXZlcywgYmVmb3JlIGl0IGlzIHByb2Nlc3NlZFxuICAgIHZhciBfYmVmb3JlVXBkYXRlQ2FsbGJhY2tzID0ge307XG4gICAgLy8gdGhpcyBpcyBhbiBhcnJheSBvZiBjYWxsYmFja3Mgd2hpY2ggYXJlIGNhbGxlZCB3aGVuIG5ldyBkYXRhIGFycml2ZXMsIGJlZm9yZSBpdCBpcyBwcm9jZXNzZWRcbiAgICB2YXIgX2FmdGVyVXBkYXRlQ2FsbGJhY2tzID0ge307XG4gICAgXG4gICAgLy8gdGhpcyBpcyBhbiBhcnJheSBvZiBzdGF0ZSBvYmplY3RzLCB0aGVzZSBjYW4gYmUgdXNlZCB0byBwcm92aWRlIGN1c3RvbSBqYXZhc2NyaXB0IGxvZ2ljXG4gICAgdmFyIF9zdGF0ZXMgPSB7fTtcbiAgICB2YXIgX2N1cnJlbnRTdGF0ZSA9IG51bGw7XG4gICAgXG4gICAgLy8gdGhlIGluaXQgZnVuY3Rpb24gaXMgY2FsbGVkIHdoZW4gdGhlIHVpIGhhcyBsb2FkZWRcbiAgICAvLyB0aGlzIGZ1bmN0aW9uIHNldHMgdXAgdGhlIHRlbXBsYXRlcyBhbmQgYmFzZSBmdW5jdGlvbmFsaXR5XG4gICAgdmFyIGluaXQgPSBmdW5jdGlvbiAoKSBcbiAgICB7XG4gICAgICAgIC8vIFdlIHN0b3JlIGluaXRpYWxEYXRhIGFuZCB0ZW1wbGF0ZURhdGEgaW4gdGhlIGJvZHkgdGFnLCBpdCdzIGFzIGdvb2QgYSBwbGFjZSBhcyBhbnlcbiAgICAgICAgX2RhdGEgPSAkKCdib2R5JykuZGF0YSgnaW5pdGlhbERhdGEnKTsgIFxuICAgICAgICBcbiAgICAgICAgaWYgKF9kYXRhID09IG51bGwgfHwgIV9kYXRhLmhhc093blByb3BlcnR5KCdjb25maWcnKSB8fCAhX2RhdGEuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSlcbiAgICAgICAge1xuICAgICAgICAgICAgcmVwb3J0RXJyb3IoJ0Vycm9yOiBJbml0aWFsIGRhdGEgZGlkIG5vdCBsb2FkIGNvcnJlY3RseS4nICsgSlNPTi5zdHJpbmdpZnkoX2RhdGEpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzdGF0ZUtleSA9ICdkZWZhdWx0JztcbiAgICAgICAgaWYgKF9kYXRhWydjb25maWcnXS5oYXNPd25Qcm9wZXJ0eSgnc3RhdGVLZXknKSAmJiBfZGF0YVsnY29uZmlnJ11bJ3N0YXRlS2V5J10pXG4gICAgICAgIHtcbiAgICAgICAgICAgIHN0YXRlS2V5ID0gX2RhdGFbJ2NvbmZpZyddWydzdGF0ZUtleSddLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBOYW5vU3RhdGVNYW5hZ2VyLnNldEN1cnJlbnRTdGF0ZShzdGF0ZUtleSk7XG4gICAgICAgIFxuICAgICAgICAkKGRvY3VtZW50KS5vbigndGVtcGxhdGVzTG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZG9VcGRhdGUoX2RhdGEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBfaXNJbml0aWFsaXNlZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgXG4gICAgLy8gUmVjZWl2ZSB1cGRhdGUgZGF0YSBmcm9tIHRoZSBzZXJ2ZXJcbiAgICB2YXIgcmVjZWl2ZVVwZGF0ZURhdGEgPSBmdW5jdGlvbiAoanNvblN0cmluZylcbiAgICB7XG4gICAgICAgIHZhciB1cGRhdGVEYXRhO1xuICAgICAgICBcbiAgICAgICAgLy8gcmVwb3J0RXJyb3IoXCJyZWNpZXZlVXBkYXRlRGF0YSBjYWxsZWQuXCIgKyBcIjxicj5UeXBlOiBcIiArIHR5cGVvZiBqc29uU3RyaW5nKTsgLy9kZWJ1ZyBob29rXG4gICAgICAgIHRyeVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBwYXJzZSB0aGUgSlNPTiBzdHJpbmcgZnJvbSB0aGUgc2VydmVyIGludG8gYSBKU09OIG9iamVjdFxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IGpRdWVyeS5wYXJzZUpTT04oanNvblN0cmluZyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXBvcnRFcnJvcihcInJlY2lldmVVcGRhdGVEYXRhIGZhaWxlZC4gXCIgKyBcIjxicj5FcnJvciBuYW1lOiBcIiArIGVycm9yLm5hbWUgKyBcIjxicj5FcnJvciBNZXNzYWdlOiBcIiArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVwb3J0RXJyb3IoXCJyZWNpZXZlVXBkYXRlRGF0YSBwYXNzZWQgdHJ5Y2F0Y2ggYmxvY2suXCIpOyAvL2RlYnVnIGhvb2tcbiAgICAgICAgXG4gICAgICAgIGlmICghdXBkYXRlRGF0YS5oYXNPd25Qcm9wZXJ0eSgnZGF0YScpKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoX2RhdGEgJiYgX2RhdGEuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhJ10gPSBfZGF0YVsnZGF0YSddO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEnXSA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoX2lzSW5pdGlhbGlzZWQpIC8vIGFsbCB0ZW1wbGF0ZXMgaGF2ZSBiZWVuIHJlZ2lzdGVyZWQsIHNvIHJlbmRlciB0aGVtXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRvVXBkYXRlKHVwZGF0ZURhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgX2RhdGEgPSB1cGRhdGVEYXRhOyAvLyBhbGwgdGVtcGxhdGVzIGhhdmUgbm90IGJlZW4gcmVnaXN0ZXJlZC4gV2Ugc2V0IF9kYXRhIGRpcmVjdGx5IGhlcmUgd2hpY2ggd2lsbCBiZSBhcHBsaWVkIGFmdGVyIHRoZSB0ZW1wbGF0ZSBpcyBsb2FkZWQgd2l0aCB0aGUgaW5pdGlhbCBkYXRhXG4gICAgICAgIH0gICBcbiAgICB9O1xuXG4gICAgLy8gVGhpcyBmdW5jdGlvbiBkb2VzIHRoZSB1cGRhdGUgYnkgY2FsbGluZyB0aGUgbWV0aG9kcyBvbiB0aGUgY3VycmVudCBzdGF0ZVxuICAgIHZhciBkb1VwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhKVxuICAgIHtcbiAgICAgICAgaWYgKF9jdXJyZW50U3RhdGUgPT0gbnVsbClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF0YSA9IF9jdXJyZW50U3RhdGUub25CZWZvcmVVcGRhdGUoZGF0YSk7XG5cbiAgICAgICAgaWYgKGRhdGEgPT09IGZhbHNlKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXBvcnRFcnJvcignZGF0YSBpcyBmYWxzZSwgcmV0dXJuJyk7XG4gICAgICAgICAgICByZXR1cm47IC8vIEEgYmVmb3JlVXBkYXRlQ2FsbGJhY2sgcmV0dXJuZWQgYSBmYWxzZSB2YWx1ZSwgdGhpcyBwcmV2ZW50cyB0aGUgcmVuZGVyIGZyb20gb2NjdXJpbmdcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgX2RhdGEgPSBkYXRhO1xuXG4gICAgICAgIF9jdXJyZW50U3RhdGUub25VcGRhdGUoX2RhdGEpO1xuXG4gICAgICAgIF9jdXJyZW50U3RhdGUub25BZnRlclVwZGF0ZShfZGF0YSk7XG4gICAgfTtcbiAgICBcbiAgICAvLyBFeGVjdXRlIGFsbCBjYWxsYmFja3MgaW4gdGhlIGNhbGxiYWNrcyBhcnJheS9vYmplY3QgcHJvdmlkZWQsIHVwZGF0ZURhdGEgaXMgcGFzc2VkIHRvIHRoZW0gZm9yIHByb2Nlc3NpbmcgYW5kIHBvdGVudGlhbCBtb2RpZmljYXRpb25cbiAgICB2YXIgZXhlY3V0ZUNhbGxiYWNrcyA9IGZ1bmN0aW9uIChjYWxsYmFja3MsIGRhdGEpXG4gICAgeyAgIFxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gY2FsbGJhY2tzKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2tzLmhhc093blByb3BlcnR5KGtleSkgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oY2FsbGJhY2tzW2tleV0pKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBjYWxsYmFja3Nba2V5XS5jYWxsKHRoaXMsIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkgXG4gICAgICAgIHtcbiAgICAgICAgICAgIGluaXQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVjZWl2ZVVwZGF0ZURhdGE6IGZ1bmN0aW9uIChqc29uU3RyaW5nKSBcbiAgICAgICAge1xuICAgICAgICAgICAgcmVjZWl2ZVVwZGF0ZURhdGEoanNvblN0cmluZyk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZEJlZm9yZVVwZGF0ZUNhbGxiYWNrOiBmdW5jdGlvbiAoa2V5LCBjYWxsYmFja0Z1bmN0aW9uKVxuICAgICAgICB7XG4gICAgICAgICAgICBfYmVmb3JlVXBkYXRlQ2FsbGJhY2tzW2tleV0gPSBjYWxsYmFja0Z1bmN0aW9uO1xuICAgICAgICB9LFxuICAgICAgICBhZGRCZWZvcmVVcGRhdGVDYWxsYmFja3M6IGZ1bmN0aW9uIChjYWxsYmFja3MpIHsgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgY2FsbGJhY2tLZXkgaW4gY2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjYWxsYmFja3MuaGFzT3duUHJvcGVydHkoY2FsbGJhY2tLZXkpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIE5hbm9TdGF0ZU1hbmFnZXIuYWRkQmVmb3JlVXBkYXRlQ2FsbGJhY2soY2FsbGJhY2tLZXksIGNhbGxiYWNrc1tjYWxsYmFja0tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZW1vdmVCZWZvcmVVcGRhdGVDYWxsYmFjazogZnVuY3Rpb24gKGtleSlcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKF9iZWZvcmVVcGRhdGVDYWxsYmFja3MuaGFzT3duUHJvcGVydHkoa2V5KSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgX2JlZm9yZVVwZGF0ZUNhbGxiYWNrc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBleGVjdXRlQmVmb3JlVXBkYXRlQ2FsbGJhY2tzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVDYWxsYmFja3MoX2JlZm9yZVVwZGF0ZUNhbGxiYWNrcywgZGF0YSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZEFmdGVyVXBkYXRlQ2FsbGJhY2s6IGZ1bmN0aW9uIChrZXksIGNhbGxiYWNrRnVuY3Rpb24pXG4gICAgICAgIHtcbiAgICAgICAgICAgIF9hZnRlclVwZGF0ZUNhbGxiYWNrc1trZXldID0gY2FsbGJhY2tGdW5jdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgYWRkQWZ0ZXJVcGRhdGVDYWxsYmFja3M6IGZ1bmN0aW9uIChjYWxsYmFja3MpIHsgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgY2FsbGJhY2tLZXkgaW4gY2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjYWxsYmFja3MuaGFzT3duUHJvcGVydHkoY2FsbGJhY2tLZXkpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIE5hbm9TdGF0ZU1hbmFnZXIuYWRkQWZ0ZXJVcGRhdGVDYWxsYmFjayhjYWxsYmFja0tleSwgY2FsbGJhY2tzW2NhbGxiYWNrS2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZUFmdGVyVXBkYXRlQ2FsbGJhY2s6IGZ1bmN0aW9uIChrZXkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChfYWZ0ZXJVcGRhdGVDYWxsYmFja3MuaGFzT3duUHJvcGVydHkoa2V5KSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgX2FmdGVyVXBkYXRlQ2FsbGJhY2tzW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGV4ZWN1dGVBZnRlclVwZGF0ZUNhbGxiYWNrczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBleGVjdXRlQ2FsbGJhY2tzKF9hZnRlclVwZGF0ZUNhbGxiYWNrcywgZGF0YSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZFN0YXRlOiBmdW5jdGlvbiAoc3RhdGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghKHN0YXRlIGluc3RhbmNlb2YgTmFub1N0YXRlQ2xhc3MpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlcG9ydEVycm9yKCdFUlJPUjogQXR0ZW1wdGVkIHRvIGFkZCBhIHN0YXRlIHdoaWNoIGlzIG5vdCBpbnN0YW5jZW9mIE5hbm9TdGF0ZUNsYXNzJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFzdGF0ZS5rZXkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVwb3J0RXJyb3IoJ0VSUk9SOiBBdHRlbXB0ZWQgdG8gYWRkIGEgc3RhdGUgd2l0aCBhbiBpbnZhbGlkIHN0YXRlS2V5Jyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3N0YXRlc1tzdGF0ZS5rZXldID0gc3RhdGU7XG4gICAgICAgIH0sXG4gICAgICAgIHNldEN1cnJlbnRTdGF0ZTogZnVuY3Rpb24gKHN0YXRlS2V5KVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHN0YXRlS2V5ID09ICd1bmRlZmluZWQnIHx8ICFzdGF0ZUtleSkge1xuICAgICAgICAgICAgICAgIHJlcG9ydEVycm9yKCdFUlJPUjogTm8gc3RhdGUga2V5IHdhcyBwYXNzZWQhJyk7ICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFfc3RhdGVzLmhhc093blByb3BlcnR5KHN0YXRlS2V5KSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXBvcnRFcnJvcignRVJST1I6IEF0dGVtcHRlZCB0byBzZXQgYSBjdXJyZW50IHN0YXRlIHdoaWNoIGRvZXMgbm90IGV4aXN0OiAnICsgc3RhdGVLZXkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgcHJldmlvdXNTdGF0ZSA9IF9jdXJyZW50U3RhdGU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIF9jdXJyZW50U3RhdGUgPSBfc3RhdGVzW3N0YXRlS2V5XTtcblxuICAgICAgICAgICAgaWYgKHByZXZpb3VzU3RhdGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHByZXZpb3VzU3RhdGUub25SZW1vdmUoX2N1cnJlbnRTdGF0ZSk7XG4gICAgICAgICAgICB9ICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIF9jdXJyZW50U3RhdGUub25BZGQocHJldmlvdXNTdGF0ZSk7XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9LFxuICAgICAgICBnZXRDdXJyZW50U3RhdGU6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBfY3VycmVudFN0YXRlO1xuICAgICAgICB9LFxuICAgICAgICBnZXREYXRhOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gX2RhdGE7XG4gICAgICAgIH1cbiAgICB9O1xufSAoKTtcbiBcbi8vIE5hbm9CYXNlQ2FsbGJhY2tzIGlzIHdoZXJlIHRoZSBiYXNlIGNhbGxiYWNrcyAoY29tbW9uIHRvIGFsbCB0ZW1wbGF0ZXMpIGFyZSBzdG9yZWRcbk5hbm9CYXNlQ2FsbGJhY2tzID0gZnVuY3Rpb24gKClcbntcbiAgICAvLyBfY2FuQ2xpY2sgaXMgdXNlZCB0byBkaXNhYmxlIGNsaWNrcyBmb3IgYSBzaG9ydCBwZXJpb2QgYWZ0ZXIgZWFjaCBjbGljayAodG8gYXZvaWQgbWlzLWNsaWNrcylcbiAgICB2YXIgX2NhbkNsaWNrID0gdHJ1ZTtcbiAgICB2YXIgX2Jhc2VCZWZvcmVVcGRhdGVDYWxsYmFja3MgPSB7fTtcbiAgICB2YXIgX2Jhc2VBZnRlclVwZGF0ZUNhbGxiYWNrcyA9IHtcbiAgICAgICAgLy8gdGhpcyBjYWxsYmFjayBpcyB0cmlnZ2VyZWQgYWZ0ZXIgbmV3IGRhdGEgaXMgcHJvY2Vzc2VkXG4gICAgICAgIC8vIGl0IHVwZGF0ZXMgdGhlIHN0YXR1cy92aXNpYmlsaXR5IGljb24gYW5kIGFkZHMgY2xpY2sgZXZlbnQgaGFuZGxpbmcgdG8gYnV0dG9ucy9saW5rcyAgICAgXG4gICAgICAgIHN0YXR1czogZnVuY3Rpb24gKHVwZGF0ZURhdGEpIHtcbiAgICAgICAgICAgIHZhciB1aVN0YXR1c0NsYXNzO1xuICAgICAgICAgICAgaWYgKHVwZGF0ZURhdGFbJ2NvbmZpZyddWydzdGF0dXMnXSA9PSAyKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHVpU3RhdHVzQ2xhc3MgPSAnZ29vZCc7XG4gICAgICAgICAgICAgICAgJCgnLmxpbmtBY3RpdmUnKS5yZW1vdmVDbGFzcygnaW5hY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVwZGF0ZURhdGFbJ2NvbmZpZyddWydzdGF0dXMnXSA9PSAxKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHVpU3RhdHVzQ2xhc3MgPSAnYXZlcmFnZSc7XG4gICAgICAgICAgICAgICAgJCgnLmxpbmtBY3RpdmUnKS5hZGRDbGFzcygnaW5hY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB1aVN0YXR1c0NsYXNzID0gJ2JhZCc7XG4gICAgICAgICAgICAgICAgJCgnLmxpbmtBY3RpdmUnKS5hZGRDbGFzcygnaW5hY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQoJy5zdGF0dXNpY29uJykucmVtb3ZlQ2xhc3MoXCJnb29kIGJhZCBhdmVyYWdlXCIpLmFkZENsYXNzKHVpU3RhdHVzQ2xhc3MpO1xuICAgICAgICAgICAgJCgnLmxpbmtBY3RpdmUnKS5zdG9wVGltZSgnbGlua1BlbmRpbmcnKTtcbiAgICAgICAgICAgICQoJy5saW5rQWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2xpbmtQZW5kaW5nJyk7XG5cbiAgICAgICAgICAgICQoJy5saW5rQWN0aXZlJylcbiAgICAgICAgICAgICAgICAub2ZmKCdjbGljaycpXG4gICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaHJlZiA9ICQodGhpcykuZGF0YSgnaHJlZicpO1xuICAgICAgICAgICAgICAgICAgICBpZihocmVmICE9IG51bGwgJiYgX2NhbkNsaWNrKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2FuQ2xpY2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5vbmVUaW1lKDMwMCwgJ2VuYWJsZUNsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYW5DbGljayA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVEYXRhWydjb25maWcnXVsnc3RhdHVzJ10gPT0gMilcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLm9uZVRpbWUoMzAwLCAnbGlua1BlbmRpbmcnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2xpbmtQZW5kaW5nJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhyZWY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZURhdGE7XG4gICAgICAgIH0sXG4gICAgICAgIG5hbm9tYXA6IGZ1bmN0aW9uICh1cGRhdGVEYXRhKSB7XG4gICAgICAgICAgICAkKCcubWFwSWNvbicpXG4gICAgICAgICAgICAgICAgLm9mZignbW91c2VlbnRlciBtb3VzZWxlYXZlJylcbiAgICAgICAgICAgICAgICAub24oJ21vdXNlZW50ZXInLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyN1aU1hcFRvb2x0aXAnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKCQodGhpcykuY2hpbGRyZW4oJy50b29sdGlwJykuaHRtbCgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zaG93KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3RvcFRpbWUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbmVUaW1lKDUwMDAsICdoaWRlVG9vbHRpcCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5mYWRlT3V0KDUwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAkKCcuem9vbUxpbmsnKVxuICAgICAgICAgICAgICAgIC5vZmYoJ2NsaWNrJylcbiAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB6b29tTGV2ZWwgPSAkKHRoaXMpLmRhdGEoJ3pvb21MZXZlbCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdWlNYXBPYmplY3QgPSAkKCcjdWlNYXAnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVpTWFwV2lkdGggPSB1aU1hcE9iamVjdC53aWR0aCgpICogem9vbUxldmVsO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdWlNYXBIZWlnaHQgPSB1aU1hcE9iamVjdC5oZWlnaHQoKSAqIHpvb21MZXZlbDtcblxuICAgICAgICAgICAgICAgICAgICB1aU1hcE9iamVjdC5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogem9vbUxldmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJzUwJScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICc1MCUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luTGVmdDogJy0nICsgTWF0aC5mbG9vcih1aU1hcFdpZHRoIC8gMikgKyAncHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luVG9wOiAnLScgKyBNYXRoLmZsb29yKHVpTWFwSGVpZ2h0IC8gMikgKyAncHgnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkKCcjdWlNYXBJbWFnZScpLmF0dHIoJ3NyYycsdXBkYXRlRGF0YVsnY29uZmlnJ11bJ21hcCddICsgJ19uYW5vbWFwX3onICsgdXBkYXRlRGF0YVsnY29uZmlnJ11bJ21hcFpMZXZlbCddICsgJy5wbmcnKTtcblxuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZURhdGE7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkQ2FsbGJhY2tzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBOYW5vU3RhdGVNYW5hZ2VyLmFkZEJlZm9yZVVwZGF0ZUNhbGxiYWNrcyhfYmFzZUJlZm9yZVVwZGF0ZUNhbGxiYWNrcyk7XG4gICAgICAgICAgICBOYW5vU3RhdGVNYW5hZ2VyLmFkZEFmdGVyVXBkYXRlQ2FsbGJhY2tzKF9iYXNlQWZ0ZXJVcGRhdGVDYWxsYmFja3MpO1xuICAgICAgICB9LFxuICAgICAgICByZW1vdmVDYWxsYmFja3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGNhbGxiYWNrS2V5IGluIF9iYXNlQmVmb3JlVXBkYXRlQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgaWYgKF9iYXNlQmVmb3JlVXBkYXRlQ2FsbGJhY2tzLmhhc093blByb3BlcnR5KGNhbGxiYWNrS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBOYW5vU3RhdGVNYW5hZ2VyLnJlbW92ZUJlZm9yZVVwZGF0ZUNhbGxiYWNrKGNhbGxiYWNrS2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBjYWxsYmFja0tleSBpbiBfYmFzZUFmdGVyVXBkYXRlQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgaWYgKF9iYXNlQWZ0ZXJVcGRhdGVDYWxsYmFja3MuaGFzT3duUHJvcGVydHkoY2FsbGJhY2tLZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIE5hbm9TdGF0ZU1hbmFnZXIucmVtb3ZlQWZ0ZXJVcGRhdGVDYWxsYmFjayhjYWxsYmFja0tleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn0oKTtcblxuLy8gTmFub0Jhc2VIZWxwZXJzIGlzIHdoZXJlIHRoZSBiYXNlIHRlbXBsYXRlIGhlbHBlcnMgKGNvbW1vbiB0byBhbGwgdGVtcGxhdGVzKSBhcmUgc3RvcmVkXG5OYW5vQmFzZUhlbHBlcnMgPSBmdW5jdGlvbiAoKVxue1xuICAgIHZhciBfYmFzZUhlbHBlcnMgPSB7XG4gICAgICAgICAgICAvLyBjaGFuZ2UgdWkgc3R5bGluZyB0byBcInN5bmRpY2F0ZSBtb2RlXCJcbiAgICAgICAgICAgIHN5bmRpY2F0ZU1vZGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQoJy5tYWluQkcnKS5jc3MoXCJiYWNrZ3JvdW5kXCIsIFwidXJsKCdzeW5kaWNhdGUucG5nJykgbm8tcmVwZWF0IGZpeGVkIGNlbnRlci81MCUgNTAlLCBsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjOGYxNDE0IDAlLCAjNEIwQTBBIDEwMCUpIG5vLXJlcGVhdCBmaXhlZCBjZW50ZXI7XCIpO1xuXG4gICAgICAgICAgICAgICAgJCgnI3VpVGl0bGVGbHVmZicpLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIixcInVybCgndWlUaXRsZUZsdWZmLVN5bmRpY2F0ZS5wbmcnKVwiKTtcbiAgICAgICAgICAgICAgICAkKCcjdWlUaXRsZUZsdWZmJykuY3NzKFwiYmFja2dyb3VuZC1wb3NpdGlvblwiLFwiNTAlIDUwJVwiKTtcbiAgICAgICAgICAgICAgICAkKCcjdWlUaXRsZUZsdWZmJykuY3NzKFwiYmFja2dyb3VuZC1yZXBlYXRcIiwgXCJuby1yZXBlYXRcIik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBjb21iaW5lOiBmdW5jdGlvbiggYXJyMSwgYXJyMiApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyMSAmJiBhcnIyID8gYXJyMS5jb25jYXQoYXJyMikgOiBhcnIxIHx8IGFycjI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZHVtcDogZnVuY3Rpb24oIGFycjEgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFycjEpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBCeW9uZCBsaW5rXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiggdGV4dCwgaWNvbiwgcGFyYW1ldGVycywgc3RhdHVzLCBlbGVtZW50Q2xhc3MsIGVsZW1lbnRJZCApIHtcbiAgICAgICAgICAgICAgICB2YXIgaWNvbkh0bWwgPSAnJztcbiAgICAgICAgICAgICAgICB2YXIgaWNvbkNsYXNzID0gJ25vSWNvbic7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpY29uICE9ICd1bmRlZmluZWQnICYmIGljb24pXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpY29uSHRtbCA9ICc8ZGl2IGNsYXNzPVwidWlMaW5rUGVuZGluZ0ljb25cIj48L2Rpdj48aSBjbGFzcz1cImZhIGZhLWZ3IGZhLScgKyBpY29uICsgJ1wiPjwvaT4nO1xuICAgICAgICAgICAgICAgICAgICBpY29uQ2xhc3MgPSAnaGFzSWNvbic7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50Q2xhc3MgPT0gJ3VuZGVmaW5lZCcgfHwgIWVsZW1lbnRDbGFzcylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRDbGFzcyA9ICdsaW5rJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudElkSHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZWxlbWVudElkICE9ICd1bmRlZmluZWQnICYmIGVsZW1lbnRJZClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRJZEh0bWwgPSAnaWQ9XCInICsgZWxlbWVudElkICsgJ1wiJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgdGlkID0gTmFub1RyYW5zaXRpb24uYWxsb2NJRChlbGVtZW50SWRIdG1sICsgXCJfXCIgKyB0ZXh0LnRvU3RyaW5nKCkucmVwbGFjZSgvW15hLXowLTlfXS9naSwgXCJfXCIpICsgXCJfXCIgKyBpY29uKTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RhdHVzICE9ICd1bmRlZmluZWQnICYmIHN0YXR1cylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnPGRpdiB1bnNlbGVjdGFibGU9XCJvblwiIGNsYXNzPVwibGluayAnICsgaWNvbkNsYXNzICsgJyAnICsgdGlkICsgJ1wiICcgKyBlbGVtZW50SWRIdG1sICsgJz4nICsgaWNvbkh0bWwgKyB0ZXh0ICsgJzwvZGl2PjxzY3JpcHQ+JChmdW5jdGlvbigpIHsgdmFyIG5ld1N0YXRlID0ge1wiLi5jbGFzc1wiOiBcIicgKyBlbGVtZW50Q2xhc3MgKyAnICcgKyBzdGF0dXMgKyAnXCJ9OyB2YXIgb2xkID0gTmFub1RyYW5zaXRpb24udHJhbnNpdGlvbkVsZW1lbnQoXCInICsgdGlkICsgJ1wiLCBudWxsLCBuZXdTdGF0ZSwgMjAwKTsgTmFub1RyYW5zaXRpb24uYW5pbWF0ZUhvdmVyKFwiJyArIHRpZCArICdcIiwgbnVsbCwgb2xkLCBuZXdTdGF0ZSk7IH0pOzwvc2NyaXB0Pic7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuICc8ZGl2IHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJsaW5rQWN0aXZlICcgKyBpY29uQ2xhc3MgKyAnICcgKyB0aWQgKyAnXCIgZGF0YS1ocmVmPVwiJyArIE5hbm9VdGlsaXR5LmdlbmVyYXRlSHJlZihwYXJhbWV0ZXJzKSArICdcIiAnICsgZWxlbWVudElkSHRtbCArICc+JyArIGljb25IdG1sICsgdGV4dCArICc8L2Rpdj48c2NyaXB0PiQoZnVuY3Rpb24oKSB7IHZhciBuZXdTdGF0ZSA9IHtcIi4uY2xhc3NcIjogXCInICsgZWxlbWVudENsYXNzICsgJ1wifTsgdmFyIG9sZCA9IE5hbm9UcmFuc2l0aW9uLnRyYW5zaXRpb25FbGVtZW50KFwiJyArIHRpZCArICdcIiwgbnVsbCwgbmV3U3RhdGUsIDIwMCk7IE5hbm9UcmFuc2l0aW9uLmFuaW1hdGVIb3ZlcihcIicgKyB0aWQgKyAnXCIsIG51bGwsIG9sZCwgbmV3U3RhdGUpOyB9KTs8L3NjcmlwdD4nO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgeG9yOiBmdW5jdGlvbiAobnVtYmVyLGJpdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXIgXiBiaXQ7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBwcmVjaXNpb25Sb3VuZDogZnVuY3Rpb24gKHZhbHVlLCBwbGFjZXMpIHtcbiAgICAgICAgICAgICAgICBpZihwbGFjZXMgPT0gMCl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKG51bWJlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBtdWx0aXBsaWVyID0gTWF0aC5wb3coMTAsIHBsYWNlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChNYXRoLnJvdW5kKHZhbHVlICogbXVsdGlwbGllcikgLyBtdWx0aXBsaWVyKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8vIFJvdW5kIGEgbnVtYmVyIHRvIHRoZSBuZWFyZXN0IGludGVnZXJcbiAgICAgICAgICAgIHJvdW5kOiBmdW5jdGlvbihudW1iZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChudW1iZXIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZpeGVkOiBmdW5jdGlvbihudW1iZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChudW1iZXIgKiAxMCkgLyAxMDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBSb3VuZCBhIG51bWJlciBkb3duIHRvIGludGVnZXJcbiAgICAgICAgICAgIGZsb29yOiBmdW5jdGlvbihudW1iZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihudW1iZXIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIFJvdW5kIGEgbnVtYmVyIHVwIHRvIGludGVnZXJcbiAgICAgICAgICAgIGNlaWw6IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmNlaWwobnVtYmVyKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8vIEZvcm1hdCBhIHN0cmluZyAofnN0cmluZyhcIkhlbGxvIHswfSwgaG93IGFyZSB7MX0/XCIsICdNYXJ0aW4nLCAneW91JykgYmVjb21lcyBcIkhlbGxvIE1hcnRpbiwgaG93IGFyZSB5b3U/XCIpXG4gICAgICAgICAgICBzdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDApXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmd1bWVudHNbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nQXJncyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nQXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50c1swXS5mb3JtYXQoc3RyaW5nQXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmb3JtYXROdW1iZXI6IGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgICAgICAgICAvLyBGcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjkwMTEwMi9ob3ctdG8tcHJpbnQtYS1udW1iZXItd2l0aC1jb21tYXMtYXMtdGhvdXNhbmRzLXNlcGFyYXRvcnMtaW4tamF2YXNjcmlwdFxuICAgICAgICAgICAgICAgIHZhciBwYXJ0cyA9IHgudG9TdHJpbmcoKS5zcGxpdChcIi5cIik7XG4gICAgICAgICAgICAgICAgcGFydHNbMF0gPSBwYXJ0c1swXS5yZXBsYWNlKC9cXEIoPz0oXFxkezN9KSsoPyFcXGQpKS9nLCBcIixcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnRzLmpvaW4oXCIuXCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIENhcGl0YWxpemUgdGhlIGZpcnN0IGxldHRlciBvZiBhIHN0cmluZy4gRnJvbSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwMjYwNjkvY2FwaXRhbGl6ZS10aGUtZmlyc3QtbGV0dGVyLW9mLXN0cmluZy1pbi1qYXZhc2NyaXB0XG4gICAgICAgICAgICBjYXBpdGFsaXplRmlyc3RMZXR0ZXI6IGZ1bmN0aW9uKCBzdHJpbmcgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0cmluZy5zbGljZSgxKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBEaXNwbGF5IGEgYmFyLiBVc2VkIHRvIHNob3cgaGVhbHRoLCBjYXBhY2l0eSwgZXRjLlxuICAgICAgICAgICAgZGlzcGxheUJhcjogZnVuY3Rpb24oIHZhbHVlLCByYW5nZU1pbiwgcmFuZ2VNYXgsIHN0eWxlQ2xhc3MsIHNob3dUZXh0ICkge1xuXG4gICAgICAgICAgICAgICAgaWYgKHJhbmdlTWluIDwgcmFuZ2VNYXgpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPCByYW5nZU1pbilcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSByYW5nZU1pbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IHJhbmdlTWF4KVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHJhbmdlTWF4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA+IHJhbmdlTWluKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHJhbmdlTWluO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlIDwgcmFuZ2VNYXgpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcmFuZ2VNYXg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN0eWxlQ2xhc3MgPT0gJ3VuZGVmaW5lZCcgfHwgIXN0eWxlQ2xhc3MpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZUNsYXNzID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzaG93VGV4dCA9PSAndW5kZWZpbmVkJyB8fCAhc2hvd1RleHQpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzaG93VGV4dCA9ICcnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBwZXJjZW50YWdlID0gTWF0aC5yb3VuZCgodmFsdWUgLSByYW5nZU1pbikgLyAocmFuZ2VNYXggLSByYW5nZU1pbikgKiAxMDApO1xuICAgICAgICAgICAgICAgIHZhciB0aWQgPSBOYW5vVHJhbnNpdGlvbi5hbGxvY0lEKHJhbmdlTWluICsgXCJfXCIgKyByYW5nZU1heCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJkaXNwbGF5QmFyICcgKyB0aWQgKyAnICcgKyBzdHlsZUNsYXNzICsgJ1wiPjxkaXYgY2xhc3M9XCJkaXNwbGF5QmFyRmlsbFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJkaXNwbGF5QmFyVGV4dCAnICsgc3R5bGVDbGFzcyArICdcIj4nICsgc2hvd1RleHQgKyAnPC9kaXY+PC9kaXY+PHNjcmlwdD4kKGZ1bmN0aW9uKCkgeyBOYW5vVHJhbnNpdGlvbi50cmFuc2l0aW9uRWxlbWVudChcIicgKyB0aWQgKyAnXCIsIFwiLmRpc3BsYXlCYXJGaWxsXCIsIHt3aWR0aDogXCInICsgcGVyY2VudGFnZSArICclXCIsIFwiLi5jbGFzc1wiOiBcIicgKyBzdHlsZUNsYXNzICsgJ1wifSk7IH0pOzwvc2NyaXB0Pic7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gQ29udmVydCBkYW5nZXIgbGV2ZWwgdG8gY2xhc3MgKGZvciB0aGUgYWlyIGFsYXJtKVxuICAgICAgICAgICAgZGFuZ2VyVG9DbGFzczogZnVuY3Rpb24obGV2ZWwpIHtcbiAgICAgICAgICAgICAgICBpZihsZXZlbCA9PSAwKSByZXR1cm4gJ2dvb2QnO1xuICAgICAgICAgICAgICAgIGlmKGxldmVsID09IDEpIHJldHVybiAnYXZlcmFnZSc7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdiYWQnO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRhbmdlclRvU3BhbjogZnVuY3Rpb24obGV2ZWwpIHtcbiAgICAgICAgICAgICAgICBpZihsZXZlbCA9PSAwKSByZXR1cm4gJ1wiPHNwYW4gY2xhc3M9XCJnb29kXCI+R29vZDwvc3Bhbj5cIic7XG4gICAgICAgICAgICAgICAgaWYobGV2ZWwgPT0gMSkgcmV0dXJuICdcIjxzcGFuIGNsYXNzPVwiYXZlcmFnZVwiPk1pbm9yIEFsZXJ0PC9zcGFuPlwiJztcbiAgICAgICAgICAgICAgICByZXR1cm4gJ1wiPHNwYW4gY2xhc3M9XCJiYWRcIj5NYWpvciBBbGVydDwvc3Bhbj5cIic7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2VuZXJhdGVIcmVmOiBmdW5jdGlvbiAocGFyYW1ldGVycykge1xuICAgICAgICAgICAgICAgIHZhciBib2R5ID0gJCgnYm9keScpOyAvLyBGb3Igc29tZSBmdWNraW5nIHJlYXNvbiwgZGF0YSBpcyBzdG9yZWQgaW4gdGhlIGJvZHkgdGFnLlxuICAgICAgICAgICAgICAgIF91cmxQYXJhbWV0ZXJzID0gYm9keS5kYXRhKCd1cmxQYXJhbWV0ZXJzJyk7XG4gICAgICAgICAgICAgICAgdmFyIHF1ZXJ5U3RyaW5nID0gJz8nO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIF91cmxQYXJhbWV0ZXJzKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF91cmxQYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KGtleSkpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxdWVyeVN0cmluZyAhPT0gJz8nKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nICs9ICc7JztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nICs9IGtleSArICc9JyArIF91cmxQYXJhbWV0ZXJzW2tleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcGFyYW1ldGVycylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KGtleSkpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxdWVyeVN0cmluZyAhPT0gJz8nKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nICs9ICc7JztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nICs9IGtleSArICc9JyArIHBhcmFtZXRlcnNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcXVlcnlTdHJpbmc7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gRGlzcGxheSBETkEgQmxvY2tzIChmb3IgdGhlIEROQSBNb2RpZmllciBVSSlcbiAgICAgICAgICAgIGRpc3BsYXlETkFCbG9ja3M6IGZ1bmN0aW9uKGRuYVN0cmluZywgc2VsZWN0ZWRCbG9jaywgc2VsZWN0ZWRTdWJibG9jaywgYmxvY2tTaXplLCBwYXJhbUtleSkge1xuICAgICAgICAgICAgICAgIGlmICghZG5hU3RyaW5nKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwibm90aWNlXCI+UGxlYXNlIHBsYWNlIGEgdmFsaWQgc3ViamVjdCBpbnRvIHRoZSBETkEgbW9kaWZpZXIuPC9kaXY+JztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgY2hhcmFjdGVycyA9IGRuYVN0cmluZy5zcGxpdCgnJyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9ICc8ZGl2IGNsYXNzPVwiZG5hQmxvY2tcIj48ZGl2IGNsYXNzPVwibGluayBkbmFCbG9ja051bWJlclwiPjE8L2Rpdj4nO1xuICAgICAgICAgICAgICAgIHZhciBibG9jayA9IDE7XG4gICAgICAgICAgICAgICAgdmFyIHN1YmJsb2NrID0gMTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCBpbiBjaGFyYWN0ZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hhcmFjdGVycy5oYXNPd25Qcm9wZXJ0eShpbmRleCkgfHwgdHlwZW9mIGNoYXJhY3RlcnNbaW5kZXhdID09PSAnb2JqZWN0JylcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1ldGVycztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFtS2V5LnRvVXBwZXJDYXNlKCkgPT0gJ1VJJyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzID0geyAnc2VsZWN0VUlCbG9jaycgOiBibG9jaywgJ3NlbGVjdFVJU3ViYmxvY2snIDogc3ViYmxvY2sgfTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMgPSB7ICdzZWxlY3RTRUJsb2NrJyA6IGJsb2NrLCAnc2VsZWN0U0VTdWJibG9jaycgOiBzdWJibG9jayB9O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXR1cyA9ICdsaW5rQWN0aXZlJztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrID09IHNlbGVjdGVkQmxvY2sgJiYgc3ViYmxvY2sgPT0gc2VsZWN0ZWRTdWJibG9jaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gJ3NlbGVjdGVkJztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJsaW5rICcgKyBzdGF0dXMgKyAnIGRuYVN1YkJsb2NrXCIgZGF0YS1ocmVmPVwiJyArIE5hbm9VdGlsaXR5LmdlbmVyYXRlSHJlZihwYXJhbWV0ZXJzKSArICdcIiBpZD1cImRuYUJsb2NrJyArIGluZGV4ICsgJ1wiPicgKyBjaGFyYWN0ZXJzW2luZGV4XSArICc8L2Rpdj4nO1xuXG4gICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCAlIGJsb2NrU2l6ZSA9PSAwICYmIGluZGV4IDwgY2hhcmFjdGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJibG9jayA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8L2Rpdj48ZGl2IGNsYXNzPVwiZG5hQmxvY2tcIj48ZGl2IGNsYXNzPVwibGluayBkbmFCbG9ja051bWJlclwiPicgKyBibG9jayArICc8L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ViYmxvY2srKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gaHRtbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjTWlycm9yOiBmdW5jdGlvbih0ZXh0Ym94KSB7XG4gICAgICAgICAgICAgICAgdmFyIGVkaXRvciA9IENvZGVNaXJyb3IuZnJvbVRleHRBcmVhKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRleHRib3gpLCB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmVOdW1iZXJzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpbmRlbnRVbml0OiA0LFxuICAgICAgICAgICAgICAgICAgICBpbmRlbnRXaXRoVGFiczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdGhlbWU6IFwibGVzc2VyLWRhcmtcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNtb290aE51bWJlcjogZnVuY3Rpb24obnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpZCA9IE5hbm9UcmFuc2l0aW9uLmFsbG9jSUQoXCJuXCIpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuICc8c3BhbiBjbGFzcz1cIicgKyB0aWQgKyAnXCI+PC9zcGFuPjxzY3JpcHQ+JChmdW5jdGlvbigpIHsgdmFyIG5ld1N0YXRlID0ge3ZhbHVlOiAnICsgbnVtYmVyICsgJ307IHZhciBvbGQgPSBOYW5vVHJhbnNpdGlvbi51cGRhdGVFbGVtZW50KFwiJyArIHRpZCArICdcIiwgbmV3U3RhdGUpOyBOYW5vVHJhbnNpdGlvbi5hbmltYXRlVGV4dFZhbHVlKFwiJyArIHRpZCArICdcIiwgbnVsbCwgLTEsIG9sZFtcInZhbHVlXCJdLCBuZXdTdGF0ZVtcInZhbHVlXCJdKTsgfSk7PC9zY3JpcHQ+JztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzbW9vdGhSb3VuZDogZnVuY3Rpb24obnVtYmVyLCBwbGFjZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGlkID0gTmFub1RyYW5zaXRpb24uYWxsb2NJRChwbGFjZXMpO1xuICAgICAgICAgICAgICAgIGlmKHBsYWNlcyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICBwbGFjZWQgPSAwO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuICc8c3BhbiBjbGFzcz1cIicgKyB0aWQgKyAnXCI+PC9zcGFuPjxzY3JpcHQ+JChmdW5jdGlvbigpIHsgdmFyIG5ld1N0YXRlID0ge3ZhbHVlOiAnICsgbnVtYmVyLnRvRml4ZWQocGxhY2VzKSArICd9OyB2YXIgb2xkID0gTmFub1RyYW5zaXRpb24udXBkYXRlRWxlbWVudChcIicgKyB0aWQgKyAnXCIsIG5ld1N0YXRlKTsgTmFub1RyYW5zaXRpb24uYW5pbWF0ZVRleHRWYWx1ZShcIicgKyB0aWQgKyAnXCIsIG51bGwsICcgKyBwbGFjZXMgKyAnLCBvbGRbXCJ2YWx1ZVwiXSwgbmV3U3RhdGVbXCJ2YWx1ZVwiXSk7IH0pOzwvc2NyaXB0Pic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBhZGRIZWxwZXJzOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICBOYW5vVGVtcGxhdGUuYWRkSGVscGVycyhfYmFzZUhlbHBlcnMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZUhlbHBlcnM6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGZvciAodmFyIGhlbHBlcktleSBpbiBfYmFzZUhlbHBlcnMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKF9iYXNlSGVscGVycy5oYXNPd25Qcm9wZXJ0eShoZWxwZXJLZXkpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgTmFub1RlbXBsYXRlLnJlbW92ZUhlbHBlcihoZWxwZXJLZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59KCk7XG5cblxuTmFub1N0YXRlRGVmYXVsdENsYXNzLmluaGVyaXRzRnJvbShOYW5vU3RhdGVDbGFzcyk7XG52YXIgTmFub1N0YXRlRGVmYXVsdCA9IG5ldyBOYW5vU3RhdGVEZWZhdWx0Q2xhc3MoKTtcblxuZnVuY3Rpb24gTmFub1N0YXRlRGVmYXVsdENsYXNzKCkge1xuXG4gICAgdGhpcy5rZXkgPSAnZGVmYXVsdCc7XG5cbiAgICAvL3RoaXMucGFyZW50LmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG5cbiAgICB0aGlzLmtleSA9IHRoaXMua2V5LnRvTG93ZXJDYXNlKCk7XG5cbiAgICBOYW5vU3RhdGVNYW5hZ2VyLmFkZFN0YXRlKHRoaXMpO1xufVxuXG5OYW5vU3RhdGVQREFDbGFzcy5pbmhlcml0c0Zyb20oTmFub1N0YXRlQ2xhc3MpO1xudmFyIE5hbm9TdGF0ZVBEQSA9IG5ldyBOYW5vU3RhdGVQREFDbGFzcygpO1xuXG5mdW5jdGlvbiBOYW5vU3RhdGVQREFDbGFzcygpIHtcbiAgICB0aGlzLmtleSA9ICdwZGEnO1xuICAgIHRoaXMua2V5ID0gdGhpcy5rZXkudG9Mb3dlckNhc2UoKTtcblx0dGhpcy5jdXJyZW50X3RlbXBsYXRlID0gXCJcIjtcblxuICAgIE5hbm9TdGF0ZU1hbmFnZXIuYWRkU3RhdGUodGhpcyk7XG59XG5cdFxuTmFub1N0YXRlUERBQ2xhc3MucHJvdG90eXBlLm9uVXBkYXRlID0gZnVuY3Rpb24oZGF0YSkge1xuXHROYW5vU3RhdGVDbGFzcy5wcm90b3R5cGUub25VcGRhdGUuY2FsbCh0aGlzLCBkYXRhKTtcblx0dmFyIHN0YXRlID0gdGhpcztcblx0XG5cdHRyeSB7XG5cdFx0aWYoZGF0YVsnZGF0YSddWydhcHAnXSAhPSBudWxsKSB7XG5cdFx0XHR2YXIgdGVtcGxhdGUgPSBkYXRhWydkYXRhJ11bJ2FwcCddWyd0ZW1wbGF0ZSddO1xuXHRcdFx0aWYodGVtcGxhdGUgIT0gbnVsbCAmJiB0ZW1wbGF0ZSAhPSBzdGF0ZS5jdXJyZW50X3RlbXBsYXRlKSB7XG5cdFx0XHRcdCQud2hlbigkLmFqYXgoe1xuXHRcdFx0XHRcdHVybDogdGVtcGxhdGUgKyAnLnRtcGwnLFxuXHRcdFx0XHRcdGNhY2hlOiBmYWxzZSxcblx0XHRcdFx0XHRkYXRhVHlwZTogJ3RleHQnXG5cdFx0XHRcdH0pKVxuXHRcdFx0XHQuZG9uZShmdW5jdGlvbih0ZW1wbGF0ZU1hcmt1cCkge1xuXHRcdFx0XHRcdHRlbXBsYXRlTWFya3VwICs9ICc8ZGl2IGNsYXNzPVwiY2xlYXJCb3RoXCI+PC9kaXY+JztcblxuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHROYW5vVGVtcGxhdGUuYWRkVGVtcGxhdGUoJ2FwcCcsIHRlbXBsYXRlTWFya3VwKTtcblx0XHRcdFx0XHRcdE5hbm9UZW1wbGF0ZS5yZXNldFRlbXBsYXRlKCdhcHAnKTtcblx0XHRcdFx0XHRcdCQoXCIjdWlBcHBcIikuaHRtbChOYW5vVGVtcGxhdGUucGFyc2UoJ2FwcCcsIGRhdGEpKTtcblx0XHRcdFx0XHRcdHN0YXRlLmN1cnJlbnRfdGVtcGxhdGUgPSB0ZW1wbGF0ZTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0c3RhdGUub25BZnRlclVwZGF0ZShkYXRhKTtcblx0XHRcdFx0XHR9IGNhdGNoKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRyZXBvcnRFcnJvcignRVJST1I6IEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGxvYWRpbmcgdGhlIFBEQSBBcHAgVUk6ICcgKyBlcnJvci5tZXNzYWdlKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5mYWlsKCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0cmVwb3J0RXJyb3IoJ0VSUk9SOiBMb2FkaW5nIHRlbXBsYXRlIGFwcCgnICsgdGVtcGxhdGUgKyAnKSBmYWlsZWQhJyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKE5hbm9UZW1wbGF0ZS50ZW1wbGF0ZUV4aXN0cygnYXBwJykpIHtcblx0XHRcdFx0XHQkKFwiI3VpQXBwXCIpLmh0bWwoTmFub1RlbXBsYXRlLnBhcnNlKCdhcHAnLCBkYXRhKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0gY2F0Y2goZXJyb3IpIHtcblx0XHRyZXBvcnRFcnJvcignRVJST1I6IEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHJlbmRlcmluZyB0aGUgUERBIEFwcCBVSTogJyArIGVycm9yLm1lc3NhZ2UpO1xuXHRcdHJldHVybjtcblx0fVxufVxuLy8gVGhpcyBpcyB0aGUgYmFzZSBzdGF0ZSBjbGFzcywgaXQgaXMgbm90IHRvIGJlIHVzZWQgZGlyZWN0bHlcblxuZnVuY3Rpb24gTmFub1N0YXRlQ2xhc3MoKSB7fVxuXG5OYW5vU3RhdGVDbGFzcy5wcm90b3R5cGUua2V5ID0gbnVsbDtcbk5hbm9TdGF0ZUNsYXNzLnByb3RvdHlwZS5sYXlvdXRSZW5kZXJlZCA9IGZhbHNlO1xuTmFub1N0YXRlQ2xhc3MucHJvdG90eXBlLmNvbnRlbnRSZW5kZXJlZCA9IGZhbHNlO1xuTmFub1N0YXRlQ2xhc3MucHJvdG90eXBlLm1hcEluaXRpYWxpc2VkID0gZmFsc2U7XG5cbk5hbm9TdGF0ZUNsYXNzLnByb3RvdHlwZS5pc0N1cnJlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIE5hbm9TdGF0ZU1hbmFnZXIuZ2V0Q3VycmVudFN0YXRlKCkgPT0gdGhpcztcbn07XG5cbk5hbm9TdGF0ZUNsYXNzLnByb3RvdHlwZS5vbkFkZCA9IGZ1bmN0aW9uIChwcmV2aW91c1N0YXRlKSB7XG4gICAgLy8gRG8gbm90IGFkZCBjb2RlIGhlcmUsIGFkZCBpdCB0byB0aGUgJ2RlZmF1bHQnIHN0YXRlIChuYW5vX3N0YXRlX2RlZmF1dC5qcykgb3IgY3JlYXRlIGEgbmV3IHN0YXRlIGFuZCBvdmVycmlkZSB0aGlzIGZ1bmN0aW9uXG5cbiAgICBOYW5vQmFzZUNhbGxiYWNrcy5hZGRDYWxsYmFja3MoKTtcbiAgICBOYW5vQmFzZUhlbHBlcnMuYWRkSGVscGVycygpO1xufTtcblxuTmFub1N0YXRlQ2xhc3MucHJvdG90eXBlLm9uUmVtb3ZlID0gZnVuY3Rpb24gKG5leHRTdGF0ZSkge1xuICAgIC8vIERvIG5vdCBhZGQgY29kZSBoZXJlLCBhZGQgaXQgdG8gdGhlICdkZWZhdWx0JyBzdGF0ZSAobmFub19zdGF0ZV9kZWZhdXQuanMpIG9yIGNyZWF0ZSBhIG5ldyBzdGF0ZSBhbmQgb3ZlcnJpZGUgdGhpcyBmdW5jdGlvblxuXG4gICAgTmFub0Jhc2VDYWxsYmFja3MucmVtb3ZlQ2FsbGJhY2tzKCk7XG4gICAgTmFub0Jhc2VIZWxwZXJzLnJlbW92ZUhlbHBlcnMoKTtcbn07XG5cbk5hbm9TdGF0ZUNsYXNzLnByb3RvdHlwZS5vbkJlZm9yZVVwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgLy8gRG8gbm90IGFkZCBjb2RlIGhlcmUsIGFkZCBpdCB0byB0aGUgJ2RlZmF1bHQnIHN0YXRlIChuYW5vX3N0YXRlX2RlZmF1dC5qcykgb3IgY3JlYXRlIGEgbmV3IHN0YXRlIGFuZCBvdmVycmlkZSB0aGlzIGZ1bmN0aW9uXG5cbiAgICBkYXRhID0gTmFub1N0YXRlTWFuYWdlci5leGVjdXRlQmVmb3JlVXBkYXRlQ2FsbGJhY2tzKGRhdGEpO1xuXG4gICAgcmV0dXJuIGRhdGE7IC8vIFJldHVybiBkYXRhIHRvIGNvbnRpbnVlLCByZXR1cm4gZmFsc2UgdG8gcHJldmVudCBvblVwZGF0ZSBhbmQgb25BZnRlclVwZGF0ZVxufTtcblxuTmFub1N0YXRlQ2xhc3MucHJvdG90eXBlLm9uVXBkYXRlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAvLyBEbyBub3QgYWRkIGNvZGUgaGVyZSwgYWRkIGl0IHRvIHRoZSAnZGVmYXVsdCcgc3RhdGUgKG5hbm9fc3RhdGVfZGVmYXV0LmpzKSBvciBjcmVhdGUgYSBuZXcgc3RhdGUgYW5kIG92ZXJyaWRlIHRoaXMgZnVuY3Rpb25cblxuICAgIHRyeVxuICAgIHtcbiAgICAgICAgaWYgKCF0aGlzLmxheW91dFJlbmRlcmVkIHx8IChkYXRhWydjb25maWcnXS5oYXNPd25Qcm9wZXJ0eSgnYXV0b1VwZGF0ZUxheW91dCcpICYmIGRhdGFbJ2NvbmZpZyddWydhdXRvVXBkYXRlTGF5b3V0J10pKVxuICAgICAgICB7XG4gICAgICAgICAgICAkKFwiI3VpTGF5b3V0XCIpLmh0bWwoTmFub1RlbXBsYXRlLnBhcnNlKCdsYXlvdXQnLCBkYXRhKSk7IC8vIHJlbmRlciB0aGUgJ21haWwnIHRlbXBsYXRlIHRvIHRoZSAjbWFpblRlbXBsYXRlIGRpdlxuICAgICAgICAgICAgdGhpcy5sYXlvdXRSZW5kZXJlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmNvbnRlbnRSZW5kZXJlZCB8fCAoZGF0YVsnY29uZmlnJ10uaGFzT3duUHJvcGVydHkoJ2F1dG9VcGRhdGVDb250ZW50JykgJiYgZGF0YVsnY29uZmlnJ11bJ2F1dG9VcGRhdGVDb250ZW50J10pKVxuICAgICAgICB7XG4gICAgICAgICAgICAkKFwiI3VpQ29udGVudFwiKS5odG1sKE5hbm9UZW1wbGF0ZS5wYXJzZSgnbWFpbicsIGRhdGEpKTsgLy8gcmVuZGVyIHRoZSAnbWFpbCcgdGVtcGxhdGUgdG8gdGhlICNtYWluVGVtcGxhdGUgZGl2XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE5hbm9UZW1wbGF0ZS50ZW1wbGF0ZUV4aXN0cygnbWFwQ29udGVudCcpKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIXRoaXMubWFwSW5pdGlhbGlzZWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gQWRkIGRyYWcgZnVuY3Rpb25hbGl0eSB0byB0aGUgbWFwIHVpXG4gICAgICAgICAgICAgICAgJCgnI3VpTWFwJykuZHJhZ2dhYmxlKCk7XG5cbiAgICAgICAgICAgICAgICAkKCcjdWlNYXBUb29sdGlwJylcbiAgICAgICAgICAgICAgICAgICAgLm9mZignY2xpY2snKVxuICAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5mYWRlT3V0KDQwMCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5tYXBJbml0aWFsaXNlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQoXCIjdWlNYXBDb250ZW50XCIpLmh0bWwoTmFub1RlbXBsYXRlLnBhcnNlKCdtYXBDb250ZW50JywgZGF0YSkpOyAvLyByZW5kZXIgdGhlICdtYXBDb250ZW50JyB0ZW1wbGF0ZSB0byB0aGUgI3VpTWFwQ29udGVudCBkaXZcblxuICAgICAgICAgICAgaWYgKGRhdGFbJ2NvbmZpZyddLmhhc093blByb3BlcnR5KCdzaG93TWFwJykgJiYgZGF0YVsnY29uZmlnJ11bJ3Nob3dNYXAnXSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkKCcjdWlDb250ZW50JykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgICAgICQoJyN1aU1hcFdyYXBwZXInKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJCgnI3VpTWFwV3JhcHBlcicpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgICAkKCcjdWlDb250ZW50JykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChOYW5vVGVtcGxhdGUudGVtcGxhdGVFeGlzdHMoJ21hcEhlYWRlcicpKVxuICAgICAgICB7XG4gICAgICAgICAgICAkKFwiI3VpTWFwSGVhZGVyXCIpLmh0bWwoTmFub1RlbXBsYXRlLnBhcnNlKCdtYXBIZWFkZXInLCBkYXRhKSk7IC8vIHJlbmRlciB0aGUgJ21hcEhlYWRlcicgdGVtcGxhdGUgdG8gdGhlICN1aU1hcEhlYWRlciBkaXZcbiAgICAgICAgfVxuICAgICAgICBpZiAoTmFub1RlbXBsYXRlLnRlbXBsYXRlRXhpc3RzKCdtYXBGb290ZXInKSlcbiAgICAgICAge1xuICAgICAgICAgICAgJChcIiN1aU1hcEZvb3RlclwiKS5odG1sKE5hbm9UZW1wbGF0ZS5wYXJzZSgnbWFwRm9vdGVyJywgZGF0YSkpOyAvLyByZW5kZXIgdGhlICdtYXBGb290ZXInIHRlbXBsYXRlIHRvIHRoZSAjdWlNYXBGb290ZXIgZGl2XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2goZXJyb3IpXG4gICAge1xuICAgICAgICByZXBvcnRFcnJvcignRVJST1I6IEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHJlbmRlcmluZyB0aGUgVUk6ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn07XG5cbk5hbm9TdGF0ZUNsYXNzLnByb3RvdHlwZS5vbkFmdGVyVXBkYXRlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAvLyBEbyBub3QgYWRkIGNvZGUgaGVyZSwgYWRkIGl0IHRvIHRoZSAnZGVmYXVsdCcgc3RhdGUgKG5hbm9fc3RhdGVfZGVmYXV0LmpzKSBvciBjcmVhdGUgYSBuZXcgc3RhdGUgYW5kIG92ZXJyaWRlIHRoaXMgZnVuY3Rpb25cblxuICAgIE5hbm9TdGF0ZU1hbmFnZXIuZXhlY3V0ZUFmdGVyVXBkYXRlQ2FsbGJhY2tzKGRhdGEpO1xufTtcblxuTmFub1N0YXRlQ2xhc3MucHJvdG90eXBlLmFsZXJ0VGV4dCA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgLy8gRG8gbm90IGFkZCBjb2RlIGhlcmUsIGFkZCBpdCB0byB0aGUgJ2RlZmF1bHQnIHN0YXRlIChuYW5vX3N0YXRlX2RlZmF1dC5qcykgb3IgY3JlYXRlIGEgbmV3IHN0YXRlIGFuZCBvdmVycmlkZSB0aGlzIGZ1bmN0aW9uXG5cbiAgICBhbGVydCh0ZXh0KTtcbn07XG5cblxudmFyIE5hbm9UZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBfdGVtcGxhdGVEYXRhID0ge307XG5cbiAgICB2YXIgX3RlbXBsYXRlcyA9IHt9O1xuICAgIHZhciBfY29tcGlsZWRUZW1wbGF0ZXMgPSB7fTtcbiAgICBcbiAgICB2YXIgX2hlbHBlcnMgPSB7fTtcblxuICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBXZSBzdG9yZSB0ZW1wbGF0ZURhdGEgaW4gdGhlIGJvZHkgdGFnLCBpdCdzIGFzIGdvb2QgYSBwbGFjZSBhcyBhbnlcbiAgICAgICAgX3RlbXBsYXRlRGF0YSA9ICQoJ2JvZHknKS5kYXRhKCd0ZW1wbGF0ZURhdGEnKTtcblxuICAgICAgICBpZiAoX3RlbXBsYXRlRGF0YSA9PSBudWxsKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXBvcnRFcnJvcignRXJyb3I6IFRlbXBsYXRlIGRhdGEgZGlkIG5vdCBsb2FkIGNvcnJlY3RseS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxvYWROZXh0VGVtcGxhdGUoKTtcbiAgICB9O1xuXG4gICAgdmFyIGxvYWROZXh0VGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIHdlIGNvdW50IHRoZSBudW1iZXIgb2YgdGVtcGxhdGVzIGZvciB0aGlzIHVpIHNvIHRoYXQgd2Uga25vdyB3aGVuIHRoZXkndmUgYWxsIGJlZW4gcmVuZGVyZWRcbiAgICAgICAgdmFyIHRlbXBsYXRlQ291bnQgPSBPYmplY3Quc2l6ZShfdGVtcGxhdGVEYXRhKTtcblxuICAgICAgICBpZiAoIXRlbXBsYXRlQ291bnQpXG4gICAgICAgIHtcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoJ3RlbXBsYXRlc0xvYWRlZCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbG9hZCBtYXJrdXAgZm9yIGVhY2ggdGVtcGxhdGUgYW5kIHJlZ2lzdGVyIGl0XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBfdGVtcGxhdGVEYXRhKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIV90ZW1wbGF0ZURhdGEuaGFzT3duUHJvcGVydHkoa2V5KSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJC53aGVuKCQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogX3RlbXBsYXRlRGF0YVtrZXldLFxuICAgICAgICAgICAgICAgICAgICBjYWNoZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAndGV4dCdcbiAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAuZG9uZSggZnVuY3Rpb24odGVtcGxhdGVNYXJrdXApIHtcblxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZU1hcmt1cCArPSAnPGRpdiBjbGFzcz1cImNsZWFyQm90aFwiPjwvZGl2Pic7XG5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIE5hbm9UZW1wbGF0ZS5hZGRUZW1wbGF0ZShrZXksIHRlbXBsYXRlTWFya3VwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVwb3J0RXJyb3IoJ0VSUk9SOiBBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBsb2FkaW5nIHRoZSBVSTogJyArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIF90ZW1wbGF0ZURhdGFba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgbG9hZE5leHRUZW1wbGF0ZSgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmZhaWwoIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0RXJyb3IoJ0VSUk9SOiBMb2FkaW5nIHRlbXBsYXRlICcgKyBrZXkgKyAnKCcgKyBfdGVtcGxhdGVEYXRhW2tleV0gKyAnKSBmYWlsZWQhJyk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgY29tcGlsZVRlbXBsYXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIF90ZW1wbGF0ZXMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgX2NvbXBpbGVkVGVtcGxhdGVzW2tleV0gPSBkb1QudGVtcGxhdGUoX3RlbXBsYXRlc1trZXldLCBudWxsLCBfdGVtcGxhdGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHJlcG9ydEVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGluaXQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRkVGVtcGxhdGU6IGZ1bmN0aW9uIChrZXksIHRlbXBsYXRlU3RyaW5nKSB7XG4gICAgICAgICAgICBfdGVtcGxhdGVzW2tleV0gPSB0ZW1wbGF0ZVN0cmluZztcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGVFeGlzdHM6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGVtcGxhdGVzLmhhc093blByb3BlcnR5KGtleSk7XG4gICAgICAgIH0sXG5cdFx0cmVzZXRUZW1wbGF0ZTogZnVuY3Rpb24gKGtleSkge1xuXHRcdFx0X2NvbXBpbGVkVGVtcGxhdGVzW2tleV0gPSBudWxsO1xuXHRcdH0sXG4gICAgICAgIHBhcnNlOiBmdW5jdGlvbiAodGVtcGxhdGVLZXksIGRhdGEpIHtcbiAgICAgICAgICAgIGlmICghX2NvbXBpbGVkVGVtcGxhdGVzLmhhc093blByb3BlcnR5KHRlbXBsYXRlS2V5KSB8fCAhX2NvbXBpbGVkVGVtcGxhdGVzW3RlbXBsYXRlS2V5XSkge1xuICAgICAgICAgICAgICAgIGlmICghX3RlbXBsYXRlcy5oYXNPd25Qcm9wZXJ0eSh0ZW1wbGF0ZUtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0RXJyb3IoJ0VSUk9SOiBUZW1wbGF0ZSBcIicgKyB0ZW1wbGF0ZUtleSArICdcIiBkb2VzIG5vdCBleGlzdCBpbiBfY29tcGlsZWRUZW1wbGF0ZXMhJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnPGgyPlRlbXBsYXRlIGVycm9yIChkb2VzIG5vdCBleGlzdCk8L2gyPic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbXBpbGVUZW1wbGF0ZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgX2NvbXBpbGVkVGVtcGxhdGVzW3RlbXBsYXRlS2V5XSAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgcmVwb3J0RXJyb3IoX2NvbXBpbGVkVGVtcGxhdGVzW3RlbXBsYXRlS2V5XSk7XG4gICAgICAgICAgICAgICAgcmVwb3J0RXJyb3IoJ0VSUk9SOiBUZW1wbGF0ZSBcIicgKyB0ZW1wbGF0ZUtleSArICdcIiBmYWlsZWQgdG8gY29tcGlsZSEnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gJzxoMj5UZW1wbGF0ZSBlcnJvciAoZmFpbGVkIHRvIGNvbXBpbGUpPC9oMj4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9jb21waWxlZFRlbXBsYXRlc1t0ZW1wbGF0ZUtleV0uY2FsbCh0aGlzLCBkYXRhWydkYXRhJ10sIGRhdGFbJ2NvbmZpZyddLCBfaGVscGVycyk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZEhlbHBlcjogZnVuY3Rpb24gKGhlbHBlck5hbWUsIGhlbHBlckZ1bmN0aW9uKSB7XG4gICAgICAgICAgICBpZiAoIWpRdWVyeS5pc0Z1bmN0aW9uKGhlbHBlckZ1bmN0aW9uKSkge1xuICAgICAgICAgICAgICAgIHJlcG9ydEVycm9yKCdOYW5vVGVtcGxhdGUuYWRkSGVscGVyIGZhaWxlZCB0byBhZGQgJyArIGhlbHBlck5hbWUgKyAnIGFzIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLicpO1xuICAgICAgICAgICAgICAgIHJldHVybjsgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIF9oZWxwZXJzW2hlbHBlck5hbWVdID0gaGVscGVyRnVuY3Rpb247XG4gICAgICAgIH0sXG4gICAgICAgIGFkZEhlbHBlcnM6IGZ1bmN0aW9uIChoZWxwZXJzKSB7ICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIGhlbHBlck5hbWUgaW4gaGVscGVycykge1xuICAgICAgICAgICAgICAgIGlmICghaGVscGVycy5oYXNPd25Qcm9wZXJ0eShoZWxwZXJOYW1lKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBOYW5vVGVtcGxhdGUuYWRkSGVscGVyKGhlbHBlck5hbWUsIGhlbHBlcnNbaGVscGVyTmFtZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZW1vdmVIZWxwZXI6IGZ1bmN0aW9uIChoZWxwZXJOYW1lKSB7XG4gICAgICAgICAgICBpZiAoaGVscGVycy5oYXNPd25Qcm9wZXJ0eShoZWxwZXJOYW1lKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgX2hlbHBlcnNbaGVscGVyTmFtZV07XG4gICAgICAgICAgICB9ICAgXG4gICAgICAgIH1cbiAgICB9O1xufSgpO1xuXG5OYW5vVHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgaWRDYWNoZSA9IHt9O1xuXHR2YXIgc3RhdGVDYWNoZSA9IHt9O1xuXHR2YXIgY3VycmVudElEID0gMDtcblxuXHROYW5vU3RhdGVNYW5hZ2VyLmFkZEJlZm9yZVVwZGF0ZUNhbGxiYWNrKFwiVHJhbnNpdGlvblJlc2V0XCIsIGZ1bmN0aW9uKHVwZGF0ZURhdGEpIHtcblx0XHRjdXJyZW50SUQgPSAwO1xuXHRcdHJldHVybiB1cGRhdGVEYXRhO1xuXHR9KTtcblxuXHQvLyBnZXQgYSB0cmFuc2l0aW9uIGhhbmRsZSwgYWRkIHRoaXMgdG8geW91ciBlbGVtZW50J3MgY2xhc3Ncblx0dmFyIF9hbGxvY0lEID0gZnVuY3Rpb24odW5pcXVlSUQpIHtcblx0XHRpZih1bmlxdWVJRCA9PSBcIl9IaWRlX01hcF9jbG9zZVwiKSAvLyBoYWNrIGJlY2F1c2UgbmFubyBkb2VzIHdlaXJkIHRoaW5nIG9uIGZpcnN0IHRpY2tcblx0XHRcdHJldHVybiBcInRyYW5zaXRpb25fX21hcFwiO1xuXG5cdFx0aWYodW5pcXVlSUQgPT09IHVuZGVmaW5lZClcblx0XHRcdHVuaXF1ZUlEID0gXCJcIjtcblx0XHRyZXR1cm4gXCJ0cmFuc2l0aW9uX19cIiArIChjdXJyZW50SUQrKykgKyBcIl9cIiArIHVuaXF1ZUlELnRvU3RyaW5nKCk7XG5cdH1cblxuXHQvLyBzZXR1cCB0cmFuc2l0aW9ucywgY2FsbCB0aGlzIGV4YWN0bHkgb25jZSBhIHJlZnJlc2gsIHJldHVybnMgb2xkIHN0YXRlXG5cdHZhciBfdXBkYXRlRWxlbWVudCA9IGZ1bmN0aW9uKGlkLCBuZXdTdGF0ZSwgbWVyZ2UpIHtcblx0XHR2YXIgY2FjaGUgPSBpZENhY2hlW2lkXTtcblx0XHR2YXIgb2xkU3RhdGU7XG5cblx0XHRpZihtZXJnZSA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0bWVyZ2UgPSBmYWxzZTtcblxuXHRcdHZhciBlbGVtZW50ID0gJChcIi5cIiArIGlkKTtcblx0XHRpZihlbGVtZW50Lmxlbmd0aCA9PSAwKVxuXHRcdFx0cmV0dXJuIG5ld1N0YXRlO1xuXG5cdFx0Ly8gdmVyaWZ5IHRoYXQgdGhlIGlkIHN0aWxsIHBvaW50cyB0byB0aGUgc2FtZSB0aGluZ1xuXHRcdC8vIGFuZCBnZXQgb2xkIHN0YXRlXG5cdFx0ZWxlbWVudCA9IGVsZW1lbnRbMF07XG5cdFx0aWYoY2FjaGVcblx0XHRcdCYmIGNhY2hlLnRhZ05hbWUgPT0gZWxlbWVudC50YWdOYW1lXG5cdFx0XHQmJiBjYWNoZS50YWJJbmRleCA9PSBlbGVtZW50LnRhYkluZGV4XG5cdFx0XHQmJiBjYWNoZS5wYXJlbnQgPT0gZWxlbWVudC5wYXJlbnROb2RlLnRhZ05hbWVcblx0XHRcdCYmIGNhY2hlLmNoaWxkcmVuID09IGVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoKSB7XG5cblx0XHRcdC8vIHllcCwgdGhpcyBpcyBjb250aW51YXRpb24gb2Ygb2xkIG9iamVjdFxuXHRcdFx0b2xkU3RhdGUgPSBzdGF0ZUNhY2hlW2lkXTtcblxuXHRcdFx0aWYobWVyZ2UpIHtcblx0XHRcdFx0dmFyIG5ld1N0YXRlQ29weSA9IHt9O1xuXHRcdFx0XHRmb3IoayBpbiBvbGRTdGF0ZSlcblx0XHRcdFx0XHRuZXdTdGF0ZUNvcHlba10gPSBvbGRTdGF0ZVtrXTtcblx0XHRcdFx0Zm9yKGsgaW4gbmV3U3RhdGUpXG5cdFx0XHRcdFx0bmV3U3RhdGVDb3B5W2tdID0gbmV3U3RhdGVba107XG5cdFx0XHRcdG5ld1N0YXRlID0gbmV3U3RhdGVDb3B5O1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBub3AhXG5cdFx0XHRvbGRTdGF0ZSA9IG5ld1N0YXRlO1xuXG5cdFx0XHRpZENhY2hlW2lkXSA9IHtcblx0XHRcdFx0dGFnTmFtZTogZWxlbWVudC50YWdOYW1lLFxuXHRcdFx0XHR0YWJJbmRleDogZWxlbWVudC50YWJJbmRleCxcblx0XHRcdFx0cGFyZW50OiBlbGVtZW50LnBhcmVudE5vZGUudGFnTmFtZSxcblx0XHRcdFx0Y2hpbGRyZW46IGVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdC8vIHNhdmUgbmV3IHN0YXRlIGZvciBuZXh0IGN5Y2xlXG5cdFx0c3RhdGVDYWNoZVtpZF0gPSBuZXdTdGF0ZTtcblx0XHRyZXR1cm4gb2xkU3RhdGU7XG5cdH1cblxuXHR2YXIgX3Jlc29sdmVUYXJnZXQgPSBmdW5jdGlvbihpZCwgZmlsdGVyKSB7XG5cdFx0dmFyIGVsZW1lbnQgPSAkKFwiLlwiICsgaWQpO1xuXG5cdFx0cmV0dXJuIGZpbHRlciA/ICQoZWxlbWVudCkuY2hpbGRyZW4oZmlsdGVyKSA6ICQoZWxlbWVudCk7XG5cdH1cblxuXHQvLyBhbmltYXRlIGEgc3RhdGUgY2hhbmdlXG5cdHZhciBfYW5pbWF0ZUVsZW1lbnQgPSBmdW5jdGlvbihpZCwgZmlsdGVyLCBvbGRTdGF0ZSwgbmV3U3RhdGUsIHRpbWUpIHtcblx0XHR2YXIgdGFyZ2V0ID0gX3Jlc29sdmVUYXJnZXQoaWQsIGZpbHRlcik7XG5cblx0XHRpZih0aW1lID09PSB1bmRlZmluZWQpXG5cdFx0XHR0aW1lID0gMTkwMDtcblxuXHRcdC8vICBkbyB0aGUgYW5pbWF0aW9uXG5cdFx0dGFyZ2V0XG5cdFx0XHQuY3NzKG9sZFN0YXRlKVxuXHRcdFx0LmFuaW1hdGUobmV3U3RhdGUsIHtcblx0XHRcdFx0ZHVyYXRpb246IHRpbWUsXG5cdFx0XHRcdHF1ZXVlOiBmYWxzZVxuXHRcdFx0fSk7XG5cblx0XHQvLyBtYXliZSBjbGFzcyB0b28/XG5cdFx0dmFyIG9sZENsYXNzID0gb2xkU3RhdGVbXCIuLmNsYXNzXCJdO1xuXHRcdHZhciBuZXdDbGFzcyA9IG5ld1N0YXRlW1wiLi5jbGFzc1wiXTtcblx0XHRpZihvbGRDbGFzcyAmJiBuZXdDbGFzcykge1xuXHRcdFx0dGFyZ2V0LmFkZENsYXNzKG9sZENsYXNzKTtcblx0XHRcdGlmKG9sZENsYXNzICE9IG5ld0NsYXNzKSB7XG5cdFx0XHRcdC8vIHN0cmlwIGNsYXNzZXMgdGhhdCBhcmUgaW4gYm90aFxuXHRcdFx0XHR2YXIgb2xkQ2xhc3MgPSBvbGRDbGFzcy5zcGxpdChcIiBcIik7XG5cdFx0XHRcdHZhciBuZXdDbGFzcyA9IG5ld0NsYXNzLnNwbGl0KFwiIFwiKTtcblxuXHRcdFx0XHR2YXIgZmlsdGVyZWRPbGRDbGFzcyA9IG9sZENsYXNzLmZpbHRlcihmdW5jdGlvbih4KSB7IHJldHVybiBuZXdDbGFzcy5pbmRleE9mKHgpID09IC0xOyB9KTtcblx0XHRcdFx0dmFyIGZpbHRlcmVkTmV3Q2xhc3MgPSBuZXdDbGFzcy5maWx0ZXIoZnVuY3Rpb24oeCkgeyByZXR1cm4gb2xkQ2xhc3MuaW5kZXhPZih4KSA9PSAtMTsgfSk7XG5cblx0XHRcdFx0b2xkQ2xhc3MgPSBmaWx0ZXJlZE9sZENsYXNzLmpvaW4oXCIgXCIpO1xuXHRcdFx0XHRuZXdDbGFzcyA9IGZpbHRlcmVkTmV3Q2xhc3Muam9pbihcIiBcIik7XG5cblx0XHRcdFx0dGFyZ2V0LnN3aXRjaENsYXNzKG9sZENsYXNzLCBuZXdDbGFzcywge1xuXHRcdFx0XHRcdGR1cmF0aW9uOiB0aW1lLFxuXHRcdFx0XHRcdHF1ZXVlOiBmYWxzZVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHR2YXIgX2FuaW1hdGVUZXh0VmFsdWUgPSBmdW5jdGlvbihpZCwgZmlsdGVyLCBwbGFjZXMsIG9sZFZhbHVlLCBuZXdWYWx1ZSwgdGltZSkge1xuXHRcdHZhciB0YXJnZXQgPSBfcmVzb2x2ZVRhcmdldChpZCwgZmlsdGVyKTtcblxuXHRcdGlmKHRpbWUgPT09IHVuZGVmaW5lZClcblx0XHRcdHRpbWUgPSAxOTAwO1xuXG5cdFx0aWYocGxhY2VzID09IC0xKVxuXHRcdFx0dGFyZ2V0LnRleHQob2xkVmFsdWUudG9TdHJpbmcoKSk7Ly9vbGRWYWx1ZS50b1N0cmluZygpKTtcblx0XHRlbHNlXG5cdFx0XHR0YXJnZXQudGV4dChvbGRWYWx1ZS50b0ZpeGVkKHBsYWNlcykpOy8vb2xkVmFsdWUudG9GaXhlZChwbGFjZXMpKTtcblxuXHRcdGlmKG9sZFZhbHVlICE9IG5ld1ZhbHVlKVxuXHRcdFx0dGFyZ2V0LmFuaW1hdGUoe2k6IDF9LCB7XG5cdFx0XHRcdGR1cmF0aW9uOiB0aW1lLFxuXHRcdFx0XHRxdWV1ZTogZmFsc2UsXG5cdFx0XHRcdHN0ZXA6IGZ1bmN0aW9uKG5vdywgZngpIHtcblx0XHRcdFx0XHRpZihwbGFjZXMgPT0gLTEpIHtcblx0XHRcdFx0XHRcdGZ4LmVsZW0udGV4dENvbnRlbnQgPSAob2xkVmFsdWUgKiAoMSAtIG5vdykgKyBuZXdWYWx1ZSAqIG5vdykudG9TdHJpbmcoKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0ZnguZWxlbS50ZXh0Q29udGVudCA9IChvbGRWYWx1ZSAqICgxIC0gbm93KSArIG5ld1ZhbHVlICogbm93KS50b0ZpeGVkKHBsYWNlcyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0fVxuXG5cdHZhciBfYW5pbWF0ZUhvdmVyID0gZnVuY3Rpb24oaWQsIGZpbHRlciwgb2xkU3RhdGUsIG5ld1N0YXRlLCB0aW1lKSB7XG5cdFx0dmFyIHRhcmdldCA9IF9yZXNvbHZlVGFyZ2V0KGlkLCBmaWx0ZXIpO1xuXG5cdFx0aWYodGltZSA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0dGltZSA9IDIwMDtcblxuXHRcdGlmKG9sZFN0YXRlW1wiLi5ob3ZlclwiXSlcblx0XHRcdHRhcmdldC5hZGRDbGFzcyhcImhvdmVyXCIpO1xuXG5cdFx0dGFyZ2V0LmhvdmVyKFxuXHRcdFx0ZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRhcmdldC5zdG9wKDEsIDEpLmFkZENsYXNzKFwiaG92ZXJcIiwge1xuXHRcdFx0XHRcdGR1cmF0aW9uOiB0aW1lLFxuXHRcdFx0XHRcdHF1ZXVlOiBmYWxzZVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0X3VwZGF0ZUVsZW1lbnQoaWQsIHtcIi4uaG92ZXJcIjogdHJ1ZX0sIHRydWUpO1xuXHRcdFx0fSxcblx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0YXJnZXQuc3RvcCgxLCAxKS5yZW1vdmVDbGFzcyhcImhvdmVyXCIsIHtcblx0XHRcdFx0XHRkdXJhdGlvbjogdGltZSxcblx0XHRcdFx0XHRxdWV1ZTogZmFsc2Vcblx0XHRcdFx0fSk7XG5cdFx0XHRcdF91cGRhdGVFbGVtZW50KGlkLCB7XCIuLmhvdmVyXCI6IGZhbHNlfSwgdHJ1ZSk7XG5cdFx0XHR9XG5cdFx0KTtcblx0fVxuXG5cdC8vIGhlbHBlciBmb3IgbW9zdCBjb21tb24gdXNlXG5cdHZhciBfdHJhbnNpdGlvbkVsZW1lbnQgPSBmdW5jdGlvbihpZCwgZmlsdGVyLCBzdGF0ZSwgdGltZSkge1xuXHRcdHZhciBvbGQgPSBfdXBkYXRlRWxlbWVudChpZCwgc3RhdGUpO1xuXHRcdF9hbmltYXRlRWxlbWVudChpZCwgZmlsdGVyLCBvbGQsIHN0YXRlLCB0aW1lKTtcblx0XHRyZXR1cm4gb2xkO1xuXHR9XG5cblx0cmV0dXJuIHtcblx0XHRhbGxvY0lEOiBfYWxsb2NJRCxcblx0XHR1cGRhdGVFbGVtZW50OiBfdXBkYXRlRWxlbWVudCxcblx0XHRhbmltYXRlRWxlbWVudDogX2FuaW1hdGVFbGVtZW50LFxuXHRcdGFuaW1hdGVUZXh0VmFsdWU6IF9hbmltYXRlVGV4dFZhbHVlLFxuXHRcdGFuaW1hdGVIb3ZlcjogX2FuaW1hdGVIb3Zlcixcblx0XHR0cmFuc2l0aW9uRWxlbWVudDogX3RyYW5zaXRpb25FbGVtZW50XG5cdH07XG59KCk7XG5cbnZhciBOYW5vV2luZG93ID0gZnVuY3Rpb24gKCkgXG57XG4gICAgdmFyIG9mZnNldFgsIG9mZnNldFk7XG4gICAgdmFyIG1pbldpZHRoID0gMjgwO1xuICAgIHZhciBtaW5IZWlnaHQgPSAxNDA7XG5cbiAgICB2YXIgc2V0UG9zID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgTmFub1V0aWxpdHkud2luc2V0KFwicG9zXCIsIHggKyBcIixcIiArIHkpO1xuICAgIH07XG4gICAgdmFyIHNldFNpemUgPSBmdW5jdGlvbiAodywgaCkge1xuICAgICAgIE5hbm9VdGlsaXR5LndpbnNldChcInNpemVcIiwgdyArIFwiLFwiICsgaCk7XG4gICAgfTtcblxuICAgIHZhciBvYmV5TGltaXRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBBbGlnbm1lbnQgKFRoYW5rcyBHb29uIChDQyBCWS1OQy1TQSB2MykpXG4gICAgICAgIHZhciBwcmV2WCA9IHdpbmRvdy5zY3JlZW5MZWZ0O1xuICAgICAgICB2YXIgcHJldlkgPSB3aW5kb3cuc2NyZWVuVG9wO1xuICAgICAgICAvL1B1dCB0aGUgd2luZG93IGF0IHRvcCBsZWZ0XG4gICAgICAgIHNldFBvcygwLCAwKTtcbiAgICAgICAgLy9HZXQgYW55IG9mZnNldHMgc3RpbGwgcHJlc2VudFxuICAgICAgICBvZmZzZXRYID0gd2luZG93LnNjcmVlbkxlZnQ7XG4gICAgICAgIG9mZnNldFkgPSB3aW5kb3cuc2NyZWVuVG9wO1xuICAgICAgICAvLyBDbGFtcCBpdCB0byB0aGUgdmlld3BvcnRcbiAgICAgICAgdmFyIGNsYW1wZWRYID0gcHJldlggLSBvZmZzZXRYO1xuICAgICAgICB2YXIgY2xhbXBlZFkgPSBwcmV2WSAtIG9mZnNldFk7XG4gICAgICAgIGNsYW1wZWRYID0gY2xhbXBlZFggPCBvZmZzZXRYID8gMCA6IGNsYW1wZWRYO1xuICAgICAgICBjbGFtcGVkWSA9IGNsYW1wZWRZIDwgb2Zmc2V0WSA/IDAgOiBjbGFtcGVkWTtcbiAgICAgICAgLy8gUHV0IGl0IGJhY2tcbiAgICAgICAgc2V0UG9zKGNsYW1wZWRYLCBjbGFtcGVkWSlcbiAgICAgICAgLy8gRG9uZSB3aXRoIGFsaWdubWVudFxuXG4gICAgICAgIC8vIFNpemUgY29uc3RyYWludHNcbiAgICAgICAgdmFyIGhlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcbiAgICAgICAgdmFyIHdpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XG4gICAgICAgIGlmKCQoXCJib2R5XCIpLmhlaWdodCgpID49ICgkKHdpbmRvdykuaGVpZ2h0KCkgLSAyOSkpIHsgLy8gU2Nyb2xsYmFyISEhXG4gICAgICAgICAgICB3aWR0aCArPSAxNyAvLyAxNyBwaXhlbHMgaXMgdGhlIHdpZHRoIG9mIGEgc2Nyb2xsYmFyXG4gICAgICAgIH1cbiAgICAgICAgaWYoJChkb2N1bWVudCkud2lkdGgoKSA+ICQod2luZG93KS53aWR0aCgpKSB7IC8vIEhvcml6b250YWwgU2Nyb2xsYmFyISEhXG4gICAgICAgICAgICBoZWlnaHQgKz0gMTdcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV3V2lkdGggPSBNYXRoLm1heChtaW5XaWR0aCwgd2lkdGgpO1xuICAgICAgICB2YXIgbmV3SGVpZ2h0ID0gTWF0aC5tYXgobWluSGVpZ2h0LCBoZWlnaHQpO1xuICAgICAgICBzZXRTaXplKG5ld1dpZHRoLCBuZXdIZWlnaHQpO1xuICAgIH07XG5cbiAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLyogV2Ugd2FudCBuYW5vVUkgd2luZG93cyB0byBvYmV5IHRoZSBsaW1pdHMgcmVnYXJkbGVzcywgXG4gICAgICAgIGFuZCB3ZSdyZSBoaWphY2tpbmcgdGhpcyBsaWJyYXJ5IHRvIGRvIHNvLCBldmVuIGlmIGZhbmN5IG1vZGUgaXMgdHVybmVkIG9mZi5cbiAgICAgICAgVG8gYmUgZmFpciwgdGhpcyBkb2Vzbid0IHN0b3AgdGhlIHVzZXIgZnJvbSBzaHJpbmtpbmcgdGhlbSBwYXN0IHRoZWlyIGludGVuZGVkIGxpbWl0IHdoZW4gdGhleSdyZSBub3QgaW4gZmFuY3kgbW9kZSwgXG4gICAgICAgIGJ1dCBpdCdzIGEgbmljZSBzYWZlZ3VhcmQgYWdhaW5zdCBzaG9kZGlseS1jb2RlZCBVSXMuICovXG4gICAgICAgIG9iZXlMaW1pdHMoKTtcblxuICAgICAgICBpZighTmFub1N0YXRlTWFuYWdlci5nZXREYXRhKCkuY29uZmlnLnVzZXIuZmFuY3kpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgZmFuY3lDaHJvbWUoKTtcbiAgICAgICAgLy8gLi4uIGJ1dCB3aGVuIGZhbmN5IG1vZGUgaXMgdHVybmVkIG9uLCB3ZSBoYXZlIHRvIGRvIGl0IGFnYWluIHRvIG1ha2Ugc3VyZVxuICAgICAgICAvLyB0aGF0IHRoZSB3aW5kb3cgb2Zmc2V0cyBhcmUgY29ycmVjdCBmb3IgdGhlIHNsaWdodGx5IGRpZmZlcmVudCB3aW5kb3cuXG4gICAgICAgIG9iZXlMaW1pdHMoKTtcbiBcbiAgICAgICAgYXR0YWNoQnV0dG9ucygpO1xuICAgICAgICBhdHRhY2hEcmFnQW5kUmVzaXplKCk7XG4gICAgfTtcblxuICAgIHZhciBmYW5jeUNocm9tZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBOYW5vVXRpbGl0eS53aW5zZXQoXCJ0aXRsZWJhclwiLCAwKTtcbiAgICAgICAgTmFub1V0aWxpdHkud2luc2V0KFwiY2FuLXJlc2l6ZVwiLCAwKTtcbiAgICAgICAgTmFub1V0aWxpdHkud2luc2V0KFwidHJhbnNwYXJlbnQtY29sb3JcIiwgXCIjRkYwMEU0XCIpXG4gICAgICAgICQoJy5mYW5jeScpLnNob3coKTtcbiAgICAgICAgJCgnI3VpVGl0bGVGbHVmZicpLmNzcyhcInJpZ2h0XCIsIFwiNzJweFwiKTtcbiAgICAgICAgJCgnLnN0YXR1c2ljb24nKS5jc3MoXCJsZWZ0XCIsIFwiMzRweFwiKTtcbiAgICAgICAgJCgnI3VpVGl0bGVUZXh0JykuY3NzKFwibGVmdFwiLCBcIjY2cHhcIik7XG4gICAgfTtcblxuICAgIHZhciBhdHRhY2hCdXR0b25zID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjbG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIE5hbm9VdGlsaXR5LmNsb3NlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBtaW5pbWl6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIE5hbm9VdGlsaXR5LndpbnNldChcImlzLW1pbmltaXplZFwiLCBcInRydWVcIik7XG4gICAgICAgIH07XG4gICAgICAgICQoXCIuY2xvc2VcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKFwiLm1pbmltaXplXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBtaW5pbWl6ZSgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIGF0dGFjaERyYWdBbmRSZXNpemUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLyogRHJhZyAqL1xuICAgICAgICAkKFwiYm9keVwiKS5vbihcIm1vdXNlbW92ZVwiLCBcIiN1aVRpdGxlV3JhcHBlclwiLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgIGRyYWcoZXYpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKFwiYm9keVwiKS5vbihcIm1vdXNlZG93blwiLCBcIiN1aVRpdGxlV3JhcHBlclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkcmFnZ2luZyA9IHRydWU7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKVswXS5zZXRDYXB0dXJlKSB7ICQodGhpcylbMF0uc2V0Q2FwdHVyZSgpOyB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoXCJib2R5XCIpLm9uKFwibW91c2V1cFwiLCBcIiN1aVRpdGxlV3JhcHBlclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKCQodGhpcylbMF0ucmVsZWFzZUNhcHR1cmUpIHsgJCh0aGlzKVswXS5yZWxlYXNlQ2FwdHVyZSgpOyB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qIFJlc2l6ZSAqL1xuICAgICAgICAkKFwiYm9keVwiKS5vbihcIm1vdXNlbW92ZVwiLCBcImRpdi5yZXNpemVBcmVhXCIsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgcmVzaXplLmNhbGwodGhpcywgZXYpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKFwiYm9keVwiKS5vbihcIm1vdXNlZG93blwiLCBcImRpdi5yZXNpemVBcmVhXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc2l6aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNldENhcHR1cmUpIHsgdGhpcy5zZXRDYXB0dXJlKCk7IH1cbiAgICAgICAgfSlcblxuICAgICAgICAkKFwiYm9keVwiKS5vbihcIm1vdXNldXBcIiwgXCJkaXYucmVzaXplQXJlYVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXNpemluZyA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVsZWFzZUNhcHR1cmUpIHsgdGhpcy5yZWxlYXNlQ2FwdHVyZSgpOyB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKiBTdG9sZW4gR29vbiBjb2RlIGZ0dyAoQ0MgQlktTkMtU0EgdjMuMCkgKi9cbiAgICB2YXIgZHJhZ2dpbmcsIGxhc3RYLCBsYXN0WTtcbiAgICB2YXIgZHJhZyA9IGZ1bmN0aW9uIChldikge1xuICAgICAgICBldiA9IGV2IHx8IHdpbmRvdy5ldmVudDtcbiAgICAgICAgaWYgKGxhc3RYID09PSBldi5zY3JlZW5YICYmIGxhc3RZID09PSBldi5zY3JlZW5ZKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsYXN0WCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsYXN0WCA9IGV2LnNjcmVlblg7XG4gICAgICAgICAgICBsYXN0WSA9IGV2LmNsaWVudFk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZHJhZ2dpbmcpIHtcbiAgICAgICAgICAgIHZhciBkeCA9IChldi5zY3JlZW5YIC0gbGFzdFgpO1xuICAgICAgICAgICAgdmFyIGR5ID0gKGV2LnNjcmVlblkgLSBsYXN0WSk7XG4gICAgICAgICAgICBkeCArPSB3aW5kb3cuc2NyZWVuTGVmdCAtIG9mZnNldFg7XG4gICAgICAgICAgICBkeSArPSB3aW5kb3cuc2NyZWVuVG9wIC0gb2Zmc2V0WTtcblxuICAgICAgICAgICAgc2V0UG9zKGR4LCBkeSk7XG4gICAgICAgIH1cblxuICAgICAgICBsYXN0WCA9IGV2LnNjcmVlblg7XG4gICAgICAgIGxhc3RZID0gZXYuc2NyZWVuWTtcbiAgICB9XG5cbiAgICB2YXIgcmVzaXppbmcsIHJlc2l6ZVdvcmtpbmdcbiAgICB2YXIgcmVzaXplID0gZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgIGlmIChyZXNpemVXb3JraW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXNpemVXb3JraW5nID0gdHJ1ZTtcbiAgICAgICAgZXYgPSBldiB8fCB3aW5kb3cuZXZlbnQ7XG5cbiAgICAgICAgaWYgKGxhc3RYID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxhc3RYID0gZXYuc2NyZWVuWCAtIG9mZnNldFg7XG4gICAgICAgICAgICBsYXN0WSA9IGV2LnNjcmVlblkgLSBvZmZzZXRZO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc2l6aW5nKSB7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgIGlmKCQoXCJib2R5XCIpLmhlaWdodCgpID49ICgkKHdpbmRvdykuaGVpZ2h0KCkgLSAyOSkpIHsgLy8gVmVydGljYWwgU2Nyb2xsYmFyISEhXG4gICAgICAgICAgICAgICAgd2lkdGggKz0gMTcgLy8gMTcgcGl4ZWxzIGlzIHRoZSB3aWR0aCBvZiBhIHNjcm9sbGJhclxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZigkKGRvY3VtZW50KS53aWR0aCgpID4gJCh3aW5kb3cpLndpZHRoKCkpIHsgLy8gSG9yaXpvbnRhbCBTY3JvbGxiYXIhISFcbiAgICAgICAgICAgICAgICBoZWlnaHQgKz0gMTdcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHJ4ID0gTnVtYmVyKCQodGhpcykuYXR0cihcInJ4XCIpKTtcbiAgICAgICAgICAgIHZhciByeSA9IE51bWJlcigkKHRoaXMpLmF0dHIoXCJyeVwiKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBkeCA9ICgoZXYuc2NyZWVuWC1vZmZzZXRYKSAtIGxhc3RYKTtcbiAgICAgICAgICAgIHZhciBkeSA9ICgoZXYuc2NyZWVuWS1vZmZzZXRZKSAtIGxhc3RZKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIG5ld1ggPSB3aW5kb3cuc2NyZWVuTGVmdCAtIG9mZnNldFg7XG4gICAgICAgICAgICB2YXIgbmV3WSA9IHdpbmRvdy5zY3JlZW5Ub3AgLSBvZmZzZXRZO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgbmV3VyA9IHdpZHRoICsgKGR4ICogcngpO1xuICAgICAgICAgICAgaWYocnggPT0gLTEpe1xuICAgICAgICAgICAgICAgIG5ld1ggKz0gZHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbmV3SCA9IGhlaWdodCArIChkeSAqIHJ5KTtcbiAgICAgICAgICAgIGlmKHJ5ID09IC0xKXtcbiAgICAgICAgICAgICAgICBuZXdZICs9IGR5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBuZXdXID0gTWF0aC5tYXgobWluV2lkdGgsIG5ld1cpO1xuICAgICAgICAgICAgbmV3SCA9IE1hdGgubWF4KG1pbkhlaWdodCwgbmV3SCk7IFxuICAgICAgICAgICAgc2V0UG9zKG5ld1gsIG5ld1kpO1xuICAgICAgICAgICAgc2V0U2l6ZShuZXdXLCBuZXdIKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxhc3RYID0gZXYuc2NyZWVuWCAtIG9mZnNldFg7XG4gICAgICAgIGxhc3RZID0gZXYuc2NyZWVuWSAtIG9mZnNldFk7XG5cbiAgICAgICAgcmVzaXplV29ya2luZyA9IGZhbHNlO1xuICAgIH07XG4gICAgLyogRW5kIHN0b2xlbiBHb29uIGNvZGUgKi9cblxuICAgIHJldHVybiB7XG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHsgLy9jcmF6eSBidXQgZW5zdXJlcyBjb3JyZWN0IGxvYWQgb3JkZXIgKG5hbm91dGlsIC0gbmFub3RlbXBsYXRlIC0gbmFub3dpbmRvdylcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCd0ZW1wbGF0ZXNMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaW5pdCgpO1xuICAgICAgICAgICAgfSk7IFxuICAgICAgICB9XG4gICAgfTtcbn0oKTsiXX0=
